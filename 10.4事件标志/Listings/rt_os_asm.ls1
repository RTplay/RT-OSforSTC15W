A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\rt_os_asm.OBJ
ASSEMBLER INVOKED BY: D:\Keil_v5\C51\BIN\A51.EXE .\Objects\rt_os_asm.src PR(.\Listings\rt_os_asm.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\Objects\rt_os_asm.SRC generated from: RT_OS\rt_os_asm.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        D:\Keil_v5\C51\BIN\C51.EXE RT_OS\rt_os_asm.c LARGE OPTIMIZE(0,SPEED) BROWSE INCDIR
                             (.\bsp;.\RT_OS;.\driver) DEFINE(SYSTEM_DETECT_MODE,DEBUG_ENABLE,xMUTEX_ENABLE,xSEM_ENABLE,x
                             MSGQ_ENABLE,FLAG_ENABLE) DEBUG OBJECTEXTEND CODE PRINT(.\Listings\rt_os_asm.lst) SRC(.\Objects\rt_os_asm.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    RT_OS_ASM
                       8     
  00DA                 9     CCF2    BIT     0D8H.2
  00E7                10     ACC7    BIT     0E0H.7
  0093                11     P0M1    DATA    093H
  0092                12     P1M0    DATA    092H
  0096                13     P2M0    DATA    096H
  0091                14     P1M1    DATA    091H
  0080                15     P0      DATA    080H
  00B2                16     P3M0    DATA    0B2H
  0095                17     P2M1    DATA    095H
  0090                18     P1      DATA    090H
  00B4                19     P4M0    DATA    0B4H
  00B1                20     P3M1    DATA    0B1H
  00A0                21     P2      DATA    0A0H
  00CA                22     P5M0    DATA    0CAH
  00B3                23     P4M1    DATA    0B3H
  00B0                24     P3      DATA    0B0H
  00AB                25     WKTCH   DATA    0ABH
  00B4                26     T0      BIT     0B0H.4
  00D6                27     AC      BIT     0D0H.6
  00CC                28     P6M0    DATA    0CCH
  00C9                29     P5M1    DATA    0C9H
  00C0                30     P4      DATA    0C0H
  00B5                31     CLKOUT0 BIT     0B0H.5
  00B5                32     T1      BIT     0B0H.5
  00E2                33     P7M0    DATA    0E2H
  00CB                34     P6M1    DATA    0CBH
  00C8                35     P5      DATA    0C8H
  00C6                36     ISP_TRIG        DATA    0C6H
  00AF                37     EA      BIT     0A8H.7
  00B4                38     CLKOUT1 BIT     0B0H.4
  00A4                39     SPI_SS_2        BIT     0A0H.4
  00E8                40     P6      DATA    0E8H
  00E1                41     P7M1    DATA    0E1H
  00CC                42     SPI_SS_3        BIT     0C8H.4
  0094                43     SPI_MISO        BIT     090H.4
  0093                44     SPI_MOSI        BIT     090H.3
  0091                45     CCP0    BIT     090H.1
  00F8                46     P7      DATA    0F8H
  00AA                47     WKTCL   DATA    0AAH
  0090                48     CCP1    BIT     090H.0
  00CE                49     SPCTL   DATA    0CEH
  00DF                50     CF      BIT     0D8H.7
  00B7                51     CCP2    BIT     0B0H.7
  00F9                52     CH      DATA    0F9H
  00A2                53     P_SW1   DATA    0A2H
  00BA                54     P_SW2   DATA    0BAH
  00AD                55     EADC    BIT     0A8H.5
  00A1                56     SPI_SCLK_2      BIT     0A0H.1
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     2

  00A8                57     IE      DATA    0A8H
  00C3                58     SPI_SCLK_3      BIT     0C0H.3
  00E9                59     CL      DATA    0E9H
  00C5                60     IAP_CMD DATA    0C5H
  00FA                61     CCAP0H  DATA    0FAH
  00FB                62     CCAP1H  DATA    0FBH
  00FC                63     CCAP2H  DATA    0FCH
  00BD                64     ADC_RES DATA    0BDH
  00B6                65     IPH2    DATA    0B6H
  00DE                66     CR      BIT     0D8H.6
  00EA                67     CCAP0L  DATA    0EAH
  00B7                68     RD      BIT     0B0H.7
  00EB                69     CCAP1L  DATA    0EBH
  00DA                70     CCAPM0  DATA    0DAH
  00EC                71     CCAP2L  DATA    0ECH
  00DB                72     CCAPM1  DATA    0DBH
  00AC                73     ES      BIT     0A8H.4
  00DC                74     CCAPM2  DATA    0DCH
  00BD                75     PADC    BIT     0B8H.5
  00A2                76     SPI_MISO_2      BIT     0A0H.2
  00A3                77     SPI_MOSI_2      BIT     0A0H.3
  00B8                78     IP      DATA    0B8H
  00C1                79     SPI_MISO_3      BIT     0C0H.1
  00C0                80     SPI_MOSI_3      BIT     0C0H.0
  0098                81     RI      BIT     098H.0
  00B2                82     INT0    BIT     0B0H.2
  00D7                83     CY      BIT     0D0H.7
  0099                84     TI      BIT     098H.1
  00B3                85     INT1    BIT     0B0H.3
  0097                86     CLK_DIV DATA    097H
  00C3                87     IAP_ADDRH       DATA    0C3H
  0090                88     RXD2    BIT     090H.0
  00C5                89     ISP_CMD DATA    0C5H
  00BC                90     PS      BIT     0B8H.4
  0091                91     TXD2    BIT     090H.1
  0081                92     SP      DATA    081H
  00D9                93     CMOD    DATA    0D9H
  00D8                94     CCON    DATA    0D8H
  00C4                95     IAP_ADDRL       DATA    0C4H
  00BF                96     PPCA    BIT     0B8H.7
  00D2                97     OV      BIT     0D0H.2
  00B6                98     WR      BIT     0B0H.6
  00AE                99     ELVD    BIT     0A8H.6
  0080               100     P00     BIT     080H.0
  0090               101     P10     BIT     090H.0
  0081               102     P01     BIT     080H.1
  00BC               103     ADC_CONTR       DATA    0BCH
  0099               104     SBUF    DATA    099H
  0087               105     PCON    DATA    087H
  00A0               106     P20     BIT     0A0H.0
  0091               107     P11     BIT     090H.1
  0082               108     P02     BIT     080H.2
  00C3               109     ISP_ADDRH       DATA    0C3H
  00B0               110     P30     BIT     0B0H.0
  00A1               111     P21     BIT     0A0H.1
  0092               112     P12     BIT     090H.2
  0083               113     P03     BIT     080H.3
  00C0               114     P40     BIT     0C0H.0
  00B1               115     P31     BIT     0B0H.1
  00A2               116     P22     BIT     0A0H.2
  0093               117     P13     BIT     090H.3
  0084               118     P04     BIT     080H.4
  0098               119     SCON    DATA    098H
  008F               120     WAKE_CLKO       DATA    08FH
  00C8               121     P50     BIT     0C8H.0
  00C1               122     P41     BIT     0C0H.1
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     3

  00B2               123     P32     BIT     0B0H.2
  00A3               124     P23     BIT     0A0H.3
  0094               125     P14     BIT     090H.4
  0085               126     P05     BIT     080H.5
  0089               127     TMOD    DATA    089H
  0088               128     TCON    DATA    088H
  00C9               129     P51     BIT     0C8H.1
  00C2               130     P42     BIT     0C0H.2
  00B3               131     P33     BIT     0B0H.3
  00A4               132     P24     BIT     0A0H.4
  0095               133     P15     BIT     090H.5
  0086               134     P06     BIT     080H.6
  00C4               135     ISP_ADDRL       DATA    0C4H
  00BE               136     PLVD    BIT     0B8H.6
  00CA               137     P52     BIT     0C8H.2
  00C3               138     P43     BIT     0C0H.3
  00B4               139     P34     BIT     0B0H.4
  00A5               140     P25     BIT     0A0H.5
  0096               141     P16     BIT     090H.6
  0087               142     P07     BIT     080H.7
  00CB               143     P53     BIT     0C8H.3
  00C4               144     P44     BIT     0C0H.4
  00B5               145     P35     BIT     0B0H.5
  00A6               146     P26     BIT     0A0H.6
  0097               147     P17     BIT     090H.7
  00CC               148     P54     BIT     0C8H.4
  00C5               149     P45     BIT     0C0H.5
  00B6               150     P36     BIT     0B0H.6
  00A7               151     P27     BIT     0A0H.7
  00CD               152     P55     BIT     0C8H.5
  00C6               153     P46     BIT     0C0H.6
  00B7               154     P37     BIT     0B0H.7
  00CE               155     P56     BIT     0C8H.6
  00C7               156     P47     BIT     0C0H.7
  00CF               157     P57     BIT     0C8H.7
  0089               158     IE0     BIT     088H.1
  00A1               159     BUS_SPEED       DATA    0A1H
  008B               160     IE1     BIT     088H.3
  00AF               161     IE2     DATA    0AFH
  00F0               162     B       DATA    0F0H
  008E               163     AUXR    DATA    08EH
  00C7               164     IAP_CONTR       DATA    0C7H
  00E0               165     ACC     DATA    0E0H
  00A9               166     ET0     BIT     0A8H.1
  00AB               167     ET1     BIT     0A8H.3
  008D               168     TF0     BIT     088H.5
  008F               169     TF1     BIT     088H.7
  00B5               170     IP2     DATA    0B5H
  008C               171     RL_TH0  DATA    08CH
  009A               172     RB8     BIT     098H.2
  008D               173     RL_TH1  DATA    08DH
  008C               174     TH0     DATA    08CH
  00A8               175     EX0     BIT     0A8H.0
  0088               176     IT0     BIT     088H.0
  00D6               177     RL_T2H  DATA    0D6H
  008D               178     TH1     DATA    08DH
  00AA               179     EX1     BIT     0A8H.2
  009B               180     TB8     BIT     098H.3
  008A               181     IT1     BIT     088H.2
  00D4               182     RL_T3H  DATA    0D4H
  00D6               183     TH2     DATA    0D6H
  00D6               184     T2H     DATA    0D6H
  00D0               185     P       BIT     0D0H.0
  00D2               186     RL_T4H  DATA    0D2H
  00D4               187     TH3     DATA    0D4H
  00D4               188     T3H     DATA    0D4H
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     4

  008A               189     RL_TL0  DATA    08AH
  009F               190     SM0     BIT     098H.7
  00D2               191     TH4     DATA    0D2H
  00D2               192     T4H     DATA    0D2H
  008B               193     RL_TL1  DATA    08BH
  008A               194     TL0     DATA    08AH
  009E               195     SM1     BIT     098H.6
  00D7               196     RL_T2L  DATA    0D7H
  008B               197     TL1     DATA    08BH
  009D               198     SM2     BIT     098H.5
  00D5               199     RL_T3L  DATA    0D5H
  00D7               200     TL2     DATA    0D7H
  00D7               201     T2L     DATA    0D7H
  00D3               202     RL_T4L  DATA    0D3H
  00D5               203     TL3     DATA    0D5H
  00D5               204     T3L     DATA    0D5H
  00B9               205     PT0     BIT     0B8H.1
  00D3               206     TL4     DATA    0D3H
  00D3               207     T4L     DATA    0D3H
  00BB               208     PT1     BIT     0B8H.3
  00D3               209     RS0     BIT     0D0H.3
  00C7               210     ISP_CONTR       DATA    0C7H
  008C               211     TR0     BIT     088H.4
  00D4               212     RS1     BIT     0D0H.4
  00C2               213     IAP_DATA        DATA    0C2H
  008E               214     TR1     BIT     088H.6
  00B8               215     PX0     BIT     0B8H.0
  00C1               216     WDT_CONTR       DATA    0C1H
  00BA               217     PX1     BIT     0B8H.2
  00F2               218     PCA_PWM0        DATA    0F2H
  00F3               219     PCA_PWM1        DATA    0F3H
  00F4               220     PCA_PWM2        DATA    0F4H
  009D               221     P1ASF   DATA    09DH
  0083               222     DPH     DATA    083H
  00D1               223     T4T3M   DATA    0D1H
  00BE               224     ADC_RESL        DATA    0BEH
  0082               225     DPL     DATA    082H
  00CD               226     SPSTAT  DATA    0CDH
  00B7               227     IPH     DATA    0B7H
  009B               228     S2BUF   DATA    09BH
  0097               229     PCON2   DATA    097H
  00AD               230     S3BUF   DATA    0ADH
  009C               231     REN     BIT     098H.4
  0085               232     S4BUF   DATA    085H
  009A               233     S2CON   DATA    09AH
  00AC               234     S3CON   DATA    0ACH
  00C2               235     ISP_DATA        DATA    0C2H
  0084               236     S4CON   DATA    084H
  00B9               237     SADEN   DATA    0B9H
  00B0               238     RXD     BIT     0B0H.0
  00A9               239     SADDR   DATA    0A9H
  00B1               240     TXD     BIT     0B0H.1
  00F0               241     B0      BIT     0F0H.0
  00F1               242     B1      BIT     0F0H.1
  00C6               243     IAP_TRIG        DATA    0C6H
  00A2               244     AUXR1   DATA    0A2H
  00F2               245     B2      BIT     0F0H.2
  0092               246     SPI_SS  BIT     090H.2
  008F               247     AUXR2   DATA    08FH
  00F3               248     B3      BIT     0F0H.3
  00F4               249     B4      BIT     0F0H.4
  00D5               250     F0      BIT     0D0H.5
  00F5               251     B5      BIT     0F0H.5
  00D1               252     F1      BIT     0D0H.1
  008F               253     INT_CLKO        DATA    08FH
  00F6               254     B6      BIT     0F0H.6
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     5

  00E0               255     ACC0    BIT     0E0H.0
  00F7               256     B7      BIT     0F0H.7
  00E1               257     ACC1    BIT     0E0H.1
  00E2               258     ACC2    BIT     0E0H.2
  00E3               259     ACC3    BIT     0E0H.3
  00D0               260     PSW     DATA    0D0H
  00E4               261     ACC4    BIT     0E0H.4
  0095               262     SPI_SCLK        BIT     090H.5
  00D8               263     CCF0    BIT     0D8H.0
  00E5               264     ACC5    BIT     0E0H.5
  00D9               265     CCF1    BIT     0D8H.1
  00E6               266     ACC6    BIT     0E0H.6
  00CF               267     SPDAT   DATA    0CFH
  0094               268     P0M0    DATA    094H
                     269     ?PR?OS_TASK_SW?RT_OS_ASM                 SEGMENT CODE 
                     270     ?XD?OS_TASK_SW?RT_OS_ASM                 SEGMENT XDATA 
                     271     ?PR?timer0_int?RT_OS_ASM                 SEGMENT CODE 
                     272     ?XD?timer0_int?RT_OS_ASM                 SEGMENT XDATA 
                     273     ?C_INITSEG           SEGMENT CODE 
                     274     ?XD?RT_OS_ASM        SEGMENT XDATA 
                     275             EXTRN   XDATA (sys_stat)
                     276             EXTRN   XDATA (os_task_run)
                     277             EXTRN   XDATA (os_task_running_ID)
                     278             EXTRN   CODE (_get_stack_used)
                     279             EXTRN   XDATA (os_tcb)
                     280             EXTRN   CODE (?C?OFFXADD)
                     281             EXTRN   CODE (?C?IILDX)
                     282             PUBLIC  int_count
                     283             PUBLIC  timer0_int
                     284             PUBLIC  OS_TASK_SW
                     285     
----                 286             RSEG  ?XD?timer0_int?RT_OS_ASM
0000                 287     ?timer0_int?BYTE:
0002                 288             ORG  2
0002                 289               i?147:   DS   1
0006                 290             ORG  6
0006                 291     temp_task_sequence?148:   DS   1
0006                 292             ORG  6
0006                 293         temp_id?149:   DS   1
0007                 294             ORG  7
0007                 295     temp_temp_id?150:   DS   1
0002                 296             ORG  2
0002                 297               i?151:   DS   1
0003                 298             ORG  3
0003                 299               j?152:   DS   1
0004                 300             ORG  4
0004                 301     highest_prio_id?153:   DS   1
0005                 302             ORG  5
0005                 303     task_sequence?154:   DS   1
0000                 304             ORG  0
0000                 305               i?155:   DS   1
0001                 306             ORG  1
0001                 307     need_schedule?156:   DS   1
                     308     
----                 309             RSEG  ?XD?OS_TASK_SW?RT_OS_ASM
0000                 310     ?OS_TASK_SW?BYTE:
0004                 311             ORG  4
0004                 312     temp_task_sequence?040:   DS   1
0004                 313             ORG  4
0004                 314         temp_id?041:   DS   1
0005                 315             ORG  5
0005                 316     temp_temp_id?042:   DS   1
0000                 317             ORG  0
0000                 318               i?043:   DS   1
0001                 319             ORG  1
0001                 320               j?044:   DS   1
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     6

0002                 321             ORG  2
0002                 322     highest_prio_id?045:   DS   1
0003                 323             ORG  3
0003                 324     task_sequence?046:   DS   1
                     325     
----                 326             RSEG  ?XD?RT_OS_ASM
0000                 327           int_count:   DS   1
                     328     
----                 329             RSEG  ?C_INITSEG
0000 41              330             DB      041H
0001 0000     F      331             DW      int_count
0003 00              332             DB      000H
                     333     
                     334     ; #include "rt_os.h"
                     335     ; #include "rt_os_private.h"
                     336     ; 
                     337     ; //»ŒŒÒµ˜∂»∫Ø £¨÷ªƒ‹‘⁄∑«÷–∂œ÷– π”√
                     338     ; void OS_TASK_SW(void)
                     339     
----                 340             RSEG  ?PR?OS_TASK_SW?RT_OS_ASM
0000                 341     OS_TASK_SW:
                     342             USING   0
                     343                             ; SOURCE LINE # 5
                     344     ; {
                     345                             ; SOURCE LINE # 6
                     346     ;     char i = 0, j = 0;
                     347                             ; SOURCE LINE # 7
0000 900000   F      348             MOV     DPTR,#i?043
0003 E4              349             CLR     A
0004 F0              350             MOVX    @DPTR,A
0005 900000   F      351             MOV     DPTR,#j?044
0008 E4              352             CLR     A
0009 F0              353             MOVX    @DPTR,A
                     354     ;     u8 highest_prio_id = 0;
                     355                             ; SOURCE LINE # 8
000A 900000   F      356             MOV     DPTR,#highest_prio_id?045
000D E4              357             CLR     A
000E F0              358             MOVX    @DPTR,A
                     359     ;     u8 task_sequence = 0;//µ±«∞»ŒŒÒµƒ“—‘À––∂”¡–÷–“ª∂® «0
                     360                             ; SOURCE LINE # 9
000F 900000   F      361             MOV     DPTR,#task_sequence?046
0012 E4              362             CLR     A
0013 F0              363             MOVX    @DPTR,A
                     364     ;     OS_ENTER_CRITICAL();
                     365                             ; SOURCE LINE # 10
0014 C2AF            366             CLR     EA
                     367     ; #pragma asm
                     368     ;     PUSH     ACC
0016 C0E0            369               PUSH     ACC
                     370     ;     PUSH     B
0018 C0F0            371               PUSH     B
                     372     ;     PUSH     DPH
001A C083            373               PUSH     DPH
                     374     ;     PUSH     DPL
001C C082            375               PUSH     DPL
                     376     ;     PUSH     PSW
001E C0D0            377               PUSH     PSW
                     378     ;     MOV      PSW,#00H
0020 75D000          379               MOV      PSW,#00H
                     380     ;     PUSH     AR0
0023 C000            381               PUSH     AR0
                     382     ;     PUSH     AR1
0025 C001            383               PUSH     AR1
                     384     ;     PUSH     AR2
0027 C002            385               PUSH     AR2
                     386     ;     PUSH     AR3
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     7

0029 C003            387               PUSH     AR3
                     388     ;     PUSH     AR4
002B C004            389               PUSH     AR4
                     390     ;     PUSH     AR5
002D C005            391               PUSH     AR5
                     392     ;     PUSH     AR6
002F C006            393               PUSH     AR6
                     394     ;     PUSH     AR7
0031 C007            395               PUSH     AR7
                     396     ; #pragma endasm
                     397     ;     os_tcb[os_task_running_ID].OSTCBStkPtr = SP;
                     398                             ; SOURCE LINE # 27
0033 900000   F      399             MOV     DPTR,#os_task_running_ID
0036 E0              400             MOVX    A,@DPTR
0037 FF              401             MOV     R7,A
0038 EF              402             MOV     A,R7
0039 75F00E          403             MOV     B,#0EH
003C A4              404             MUL     AB
003D 2400     F      405             ADD     A,#LOW (os_tcb)
003F F582            406             MOV     DPL,A
0041 E4              407             CLR     A
0042 3400     F      408             ADDC    A,#HIGH (os_tcb)
0044 F583            409             MOV     DPH,A
0046 E581            410             MOV     A,SP
0048 F0              411             MOVX    @DPTR,A
                     412     ; //«–ªª»ŒŒÒ’ª
                     413     ;     for (; i<TASK_SIZE; i++) { //’“µΩ”≈œ»º∂◊Ó∏ﬂ»ŒŒÒ£¨≤¢«“ «‘⁄“—‘À––»ŒŒÒ∂”¡–µƒ◊Ó∫Û£¨»Áπ˚“—
                             ‘À––»ŒŒÒ∂”¡–÷–√ª”–‘Ú”≈œ»‘À––
                     414                             ; SOURCE LINE # 29
0049                 415     ?C0001:
0049 900000   F      416             MOV     DPTR,#i?043
004C E0              417             MOVX    A,@DPTR
004D FF              418             MOV     R7,A
004E EF              419             MOV     A,R7
004F 33              420             RLC     A
0050 95E0            421             SUBB    A,ACC
0052 FE              422             MOV     R6,A
0053 C3              423             CLR     C
0054 EF              424             MOV     A,R7
0055 9408            425             SUBB    A,#08H
0057 EE              426             MOV     A,R6
0058 6480            427             XRL     A,#080H
005A 9480            428             SUBB    A,#080H
005C 4003            429             JC      $ + 5H
005E 020000   F      430             LJMP    ?C0002
                     431     ;         if (os_tcb[i].OSTCBStatus == OS_STAT_RDY) {
                     432                             ; SOURCE LINE # 30
0061 900000   F      433             MOV     DPTR,#i?043
0064 E0              434             MOVX    A,@DPTR
0065 FF              435             MOV     R7,A
0066 EF              436             MOV     A,R7
0067 33              437             RLC     A
0068 95E0            438             SUBB    A,ACC
006A FE              439             MOV     R6,A
006B 900000   F      440             MOV     DPTR,#os_tcb+03H
006E 75F00E          441             MOV     B,#0EH
0071 EF              442             MOV     A,R7
0072 120000   F      443             LCALL   ?C?OFFXADD
0075 EE              444             MOV     A,R6
0076 75F00E          445             MOV     B,#0EH
0079 A4              446             MUL     AB
007A 2583            447             ADD     A,DPH
007C F583            448             MOV     DPH,A
007E E0              449             MOVX    A,@DPTR
007F FE              450             MOV     R6,A
0080 A3              451             INC     DPTR
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     8

0081 E0              452             MOVX    A,@DPTR
0082 FF              453             MOV     R7,A
0083 EF              454             MOV     A,R7
0084 6402            455             XRL     A,#02H
0086 4E              456             ORL     A,R6
0087 6003            457             JZ      $ + 5H
0089 020000   F      458             LJMP    ?C0003
                     459     ;             if (os_tcb[i].OSTCBPrio > os_tcb[highest_prio_id].OSTCBPrio) {
                     460                             ; SOURCE LINE # 31
008C 900000   F      461             MOV     DPTR,#i?043
008F E0              462             MOVX    A,@DPTR
0090 FF              463             MOV     R7,A
0091 EF              464             MOV     A,R7
0092 33              465             RLC     A
0093 95E0            466             SUBB    A,ACC
0095 FE              467             MOV     R6,A
0096 900000   F      468             MOV     DPTR,#os_tcb+05H
0099 75F00E          469             MOV     B,#0EH
009C EF              470             MOV     A,R7
009D 120000   F      471             LCALL   ?C?OFFXADD
00A0 EE              472             MOV     A,R6
00A1 75F00E          473             MOV     B,#0EH
00A4 A4              474             MUL     AB
00A5 2583            475             ADD     A,DPH
00A7 F583            476             MOV     DPH,A
00A9 E0              477             MOVX    A,@DPTR
00AA FF              478             MOV     R7,A
00AB 900000   F      479             MOV     DPTR,#highest_prio_id?045
00AE E0              480             MOVX    A,@DPTR
00AF FE              481             MOV     R6,A
00B0 EE              482             MOV     A,R6
00B1 75F00E          483             MOV     B,#0EH
00B4 A4              484             MUL     AB
00B5 2400     F      485             ADD     A,#LOW (os_tcb+05H)
00B7 F582            486             MOV     DPL,A
00B9 E4              487             CLR     A
00BA 3400     F      488             ADDC    A,#HIGH (os_tcb+05H)
00BC F583            489             MOV     DPH,A
00BE E0              490             MOVX    A,@DPTR
00BF FE              491             MOV     R6,A
00C0 EF              492             MOV     A,R7
00C1 D3              493             SETB    C
00C2 9E              494             SUBB    A,R6
00C3 5003            495             JNC     $ + 5H
00C5 020000   F      496             LJMP    ?C0005
                     497     ;                 highest_prio_id = i;
                     498                             ; SOURCE LINE # 32
00C8 900000   F      499             MOV     DPTR,#i?043
00CB E0              500             MOVX    A,@DPTR
00CC FF              501             MOV     R7,A
00CD 900000   F      502             MOV     DPTR,#highest_prio_id?045
00D0 EF              503             MOV     A,R7
00D1 F0              504             MOVX    @DPTR,A
                     505     ;                 //≤È’“∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
                     506     ;                 task_sequence = 0xFF;//œ»ºŸ…Ë’‚∏ˆ≈≈‘⁄◊Ó◊Ó◊Ó∫Û√Ê
                     507                             ; SOURCE LINE # 34
00D2 900000   F      508             MOV     DPTR,#task_sequence?046
00D5 74FF            509             MOV     A,#0FFH
00D7 F0              510             MOVX    @DPTR,A
                     511     ;                 for (j=0; j<TASK_SIZE; j++) {
                     512                             ; SOURCE LINE # 35
00D8 900000   F      513             MOV     DPTR,#j?044
00DB E4              514             CLR     A
00DC F0              515             MOVX    @DPTR,A
00DD                 516     ?C0006:
00DD 900000   F      517             MOV     DPTR,#j?044
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE     9

00E0 E0              518             MOVX    A,@DPTR
00E1 FF              519             MOV     R7,A
00E2 EF              520             MOV     A,R7
00E3 33              521             RLC     A
00E4 95E0            522             SUBB    A,ACC
00E6 FE              523             MOV     R6,A
00E7 C3              524             CLR     C
00E8 EF              525             MOV     A,R7
00E9 9408            526             SUBB    A,#08H
00EB EE              527             MOV     A,R6
00EC 6480            528             XRL     A,#080H
00EE 9480            529             SUBB    A,#080H
00F0 4003            530             JC      $ + 5H
00F2 020000   F      531             LJMP    ?C0003
                     532     ;                     if (os_task_run[j] == i) {
                     533                             ; SOURCE LINE # 36
00F5 900000   F      534             MOV     DPTR,#j?044
00F8 E0              535             MOVX    A,@DPTR
00F9 FF              536             MOV     R7,A
00FA EF              537             MOV     A,R7
00FB 33              538             RLC     A
00FC 95E0            539             SUBB    A,ACC
00FE FE              540             MOV     R6,A
00FF 7400     F      541             MOV     A,#LOW (os_task_run)
0101 2F              542             ADD     A,R7
0102 F582            543             MOV     DPL,A
0104 7400     F      544             MOV     A,#HIGH (os_task_run)
0106 3E              545             ADDC    A,R6
0107 F583            546             MOV     DPH,A
0109 E0              547             MOVX    A,@DPTR
010A FF              548             MOV     R7,A
010B 900000   F      549             MOV     DPTR,#i?043
010E E0              550             MOVX    A,@DPTR
010F FE              551             MOV     R6,A
0110 EE              552             MOV     A,R6
0111 B5070D          553             CJNE    A,AR7,?C0009
                     554     ;                         task_sequence = j;
                     555                             ; SOURCE LINE # 37
0114 900000   F      556             MOV     DPTR,#j?044
0117 E0              557             MOVX    A,@DPTR
0118 FF              558             MOV     R7,A
0119 900000   F      559             MOV     DPTR,#task_sequence?046
011C EF              560             MOV     A,R7
011D F0              561             MOVX    @DPTR,A
                     562     ;                         break;
                     563                             ; SOURCE LINE # 38
011E 020000   F      564             LJMP    ?C0003
                     565     ;                     }
                     566                             ; SOURCE LINE # 39
0121                 567     ?C0009:
                     568     ;                     if (os_task_run[j] == 0xFF)
                     569                             ; SOURCE LINE # 40
0121 900000   F      570             MOV     DPTR,#j?044
0124 E0              571             MOVX    A,@DPTR
0125 FF              572             MOV     R7,A
0126 EF              573             MOV     A,R7
0127 33              574             RLC     A
0128 95E0            575             SUBB    A,ACC
012A FE              576             MOV     R6,A
012B 7400     F      577             MOV     A,#LOW (os_task_run)
012D 2F              578             ADD     A,R7
012E F582            579             MOV     DPL,A
0130 7400     F      580             MOV     A,#HIGH (os_task_run)
0132 3E              581             ADDC    A,R6
0133 F583            582             MOV     DPH,A
0135 E0              583             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    10

0136 FF              584             MOV     R7,A
0137 7E00            585             MOV     R6,#00H
0139 EF              586             MOV     A,R7
013A 64FF            587             XRL     A,#0FFH
013C 4E              588             ORL     A,R6
013D 7003            589             JNZ     $ + 5H
013F 020000   F      590             LJMP    ?C0003
                     591     ;                          break;
                     592                             ; SOURCE LINE # 41
                     593     ;                 }
                     594                             ; SOURCE LINE # 42
0142 900000   F      595             MOV     DPTR,#j?044
0145 E0              596             MOVX    A,@DPTR
0146 04              597             INC     A
0147 F0              598             MOVX    @DPTR,A
0148 8093            599             SJMP    ?C0006
                     600     ;             } else if (os_tcb[i].OSTCBPrio == os_tcb[highest_prio_id].OSTCBPrio) {
                     601                             ; SOURCE LINE # 43
014A 020000   F      602             LJMP    ?C0003
014D                 603     ?C0005:
014D 900000   F      604             MOV     DPTR,#i?043
0150 E0              605             MOVX    A,@DPTR
0151 FF              606             MOV     R7,A
0152 EF              607             MOV     A,R7
0153 33              608             RLC     A
0154 95E0            609             SUBB    A,ACC
0156 FE              610             MOV     R6,A
0157 900000   F      611             MOV     DPTR,#os_tcb+05H
015A 75F00E          612             MOV     B,#0EH
015D EF              613             MOV     A,R7
015E 120000   F      614             LCALL   ?C?OFFXADD
0161 EE              615             MOV     A,R6
0162 75F00E          616             MOV     B,#0EH
0165 A4              617             MUL     AB
0166 2583            618             ADD     A,DPH
0168 F583            619             MOV     DPH,A
016A E0              620             MOVX    A,@DPTR
016B FF              621             MOV     R7,A
016C 900000   F      622             MOV     DPTR,#highest_prio_id?045
016F E0              623             MOVX    A,@DPTR
0170 FE              624             MOV     R6,A
0171 EE              625             MOV     A,R6
0172 75F00E          626             MOV     B,#0EH
0175 A4              627             MUL     AB
0176 2400     F      628             ADD     A,#LOW (os_tcb+05H)
0178 F582            629             MOV     DPL,A
017A E4              630             CLR     A
017B 3400     F      631             ADDC    A,#HIGH (os_tcb+05H)
017D F583            632             MOV     DPH,A
017F E0              633             MOVX    A,@DPTR
0180 FE              634             MOV     R6,A
0181 EF              635             MOV     A,R7
0182 6E              636             XRL     A,R6
0183 6003            637             JZ      $ + 5H
0185 020000   F      638             LJMP    ?C0003
                     639     ;                 //≤È’“–¬’“µΩµƒ∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
                     640     ;                 u8 temp_task_sequence = 0xFF;//Õ¨”≈œ»º∂ π”√µƒ¡Ÿ ±»ŒŒÒ–Ú¡–
                     641                             ; SOURCE LINE # 45
0188 900000   F      642             MOV     DPTR,#temp_task_sequence?040
018B 74FF            643             MOV     A,#0FFH
018D F0              644             MOVX    @DPTR,A
                     645     ;                 for (j=0; j<TASK_SIZE; j++) { //≤È’“–¬µƒÕ¨º∂»ŒŒÒ‘⁄»ŒŒÒ∂”¡–÷–µƒ≈≈Œª
                     646                             ; SOURCE LINE # 46
018E 900000   F      647             MOV     DPTR,#j?044
0191 E4              648             CLR     A
0192 F0              649             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    11

0193                 650     ?C0013:
0193 900000   F      651             MOV     DPTR,#j?044
0196 E0              652             MOVX    A,@DPTR
0197 FF              653             MOV     R7,A
0198 EF              654             MOV     A,R7
0199 33              655             RLC     A
019A 95E0            656             SUBB    A,ACC
019C FE              657             MOV     R6,A
019D C3              658             CLR     C
019E EF              659             MOV     A,R7
019F 9408            660             SUBB    A,#08H
01A1 EE              661             MOV     A,R6
01A2 6480            662             XRL     A,#080H
01A4 9480            663             SUBB    A,#080H
01A6 5051            664             JNC     ?C0014
                     665     ;                     if (os_task_run[j] == i) {
                     666                             ; SOURCE LINE # 47
01A8 900000   F      667             MOV     DPTR,#j?044
01AB E0              668             MOVX    A,@DPTR
01AC FF              669             MOV     R7,A
01AD EF              670             MOV     A,R7
01AE 33              671             RLC     A
01AF 95E0            672             SUBB    A,ACC
01B1 FE              673             MOV     R6,A
01B2 7400     F      674             MOV     A,#LOW (os_task_run)
01B4 2F              675             ADD     A,R7
01B5 F582            676             MOV     DPL,A
01B7 7400     F      677             MOV     A,#HIGH (os_task_run)
01B9 3E              678             ADDC    A,R6
01BA F583            679             MOV     DPH,A
01BC E0              680             MOVX    A,@DPTR
01BD FF              681             MOV     R7,A
01BE 900000   F      682             MOV     DPTR,#i?043
01C1 E0              683             MOVX    A,@DPTR
01C2 FE              684             MOV     R6,A
01C3 EE              685             MOV     A,R6
01C4 B5070C          686             CJNE    A,AR7,?C0016
                     687     ;                         temp_task_sequence = j;
                     688                             ; SOURCE LINE # 48
01C7 900000   F      689             MOV     DPTR,#j?044
01CA E0              690             MOVX    A,@DPTR
01CB FF              691             MOV     R7,A
01CC 900000   F      692             MOV     DPTR,#temp_task_sequence?040
01CF EF              693             MOV     A,R7
01D0 F0              694             MOVX    @DPTR,A
                     695     ;                         break;
                     696                             ; SOURCE LINE # 49
01D1 8026            697             SJMP    ?C0014
                     698     ;                     }
                     699                             ; SOURCE LINE # 50
01D3                 700     ?C0016:
                     701     ;                     if (os_task_run[j] == 0xFF)
                     702                             ; SOURCE LINE # 51
01D3 900000   F      703             MOV     DPTR,#j?044
01D6 E0              704             MOVX    A,@DPTR
01D7 FF              705             MOV     R7,A
01D8 EF              706             MOV     A,R7
01D9 33              707             RLC     A
01DA 95E0            708             SUBB    A,ACC
01DC FE              709             MOV     R6,A
01DD 7400     F      710             MOV     A,#LOW (os_task_run)
01DF 2F              711             ADD     A,R7
01E0 F582            712             MOV     DPL,A
01E2 7400     F      713             MOV     A,#HIGH (os_task_run)
01E4 3E              714             ADDC    A,R6
01E5 F583            715             MOV     DPH,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    12

01E7 E0              716             MOVX    A,@DPTR
01E8 FF              717             MOV     R7,A
01E9 7E00            718             MOV     R6,#00H
01EB EF              719             MOV     A,R7
01EC 64FF            720             XRL     A,#0FFH
01EE 4E              721             ORL     A,R6
01EF 6008            722             JZ      ?C0014
                     723     ;                          break;
                     724                             ; SOURCE LINE # 52
                     725     ;                 }
                     726                             ; SOURCE LINE # 53
01F1 900000   F      727             MOV     DPTR,#j?044
01F4 E0              728             MOVX    A,@DPTR
01F5 04              729             INC     A
01F6 F0              730             MOVX    @DPTR,A
01F7 809A            731             SJMP    ?C0013
01F9                 732     ?C0014:
                     733     ;                 if (temp_task_sequence > task_sequence) { //¥À¥¶Œ“√«√ª”–øº¬«¡Ω∏ˆœ‡Õ¨”≈œ»º
                             ∂∂º√ª‘⁄“—‘À––»ŒŒÒ∂”¡–÷–µƒ«Èøˆ£¨’‚÷÷«Èøˆœ¬‘À––µ⁄“ª∏ˆ±ª’“µΩµƒ»ŒŒÒ
                     734                             ; SOURCE LINE # 54
01F9 900000   F      735             MOV     DPTR,#task_sequence?046
01FC E0              736             MOVX    A,@DPTR
01FD FF              737             MOV     R7,A
01FE 900000   F      738             MOV     DPTR,#temp_task_sequence?040
0201 E0              739             MOVX    A,@DPTR
0202 FE              740             MOV     R6,A
0203 EE              741             MOV     A,R6
0204 D3              742             SETB    C
0205 9F              743             SUBB    A,R7
0206 4014            744             JC      ?C0003
                     745     ;                     highest_prio_id = i;
                     746                             ; SOURCE LINE # 55
0208 900000   F      747             MOV     DPTR,#i?043
020B E0              748             MOVX    A,@DPTR
020C FF              749             MOV     R7,A
020D 900000   F      750             MOV     DPTR,#highest_prio_id?045
0210 EF              751             MOV     A,R7
0211 F0              752             MOVX    @DPTR,A
                     753     ;                     task_sequence = temp_task_sequence;
                     754                             ; SOURCE LINE # 56
0212 900000   F      755             MOV     DPTR,#temp_task_sequence?040
0215 E0              756             MOVX    A,@DPTR
0216 FF              757             MOV     R7,A
0217 900000   F      758             MOV     DPTR,#task_sequence?046
021A EF              759             MOV     A,R7
021B F0              760             MOVX    @DPTR,A
                     761     ;                 }
                     762                             ; SOURCE LINE # 57
                     763     ;             }
                     764                             ; SOURCE LINE # 58
                     765     ;         }
                     766                             ; SOURCE LINE # 59
                     767     ;     }
                     768                             ; SOURCE LINE # 60
021C                 769     ?C0003:
021C 900000   F      770             MOV     DPTR,#i?043
021F E0              771             MOVX    A,@DPTR
0220 04              772             INC     A
0221 F0              773             MOVX    @DPTR,A
0222 020000   F      774             LJMP    ?C0001
0225                 775     ?C0002:
                     776     ;     os_task_running_ID = highest_prio_id;
                     777                             ; SOURCE LINE # 61
0225 900000   F      778             MOV     DPTR,#highest_prio_id?045
0228 E0              779             MOVX    A,@DPTR
0229 FF              780             MOV     R7,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    13

022A 900000   F      781             MOV     DPTR,#os_task_running_ID
022D EF              782             MOV     A,R7
022E F0              783             MOVX    @DPTR,A
                     784     ;     //∞—µ±«∞»ŒŒÒ≤Â»Î“—‘À––»ŒŒÒ∂”¡–÷–
                     785     ;     {
                     786                             ; SOURCE LINE # 63
                     787     ;         u8 temp_id = os_task_running_ID, temp_temp_id;
                     788                             ; SOURCE LINE # 64
022F 900000   F      789             MOV     DPTR,#os_task_running_ID
0232 E0              790             MOVX    A,@DPTR
0233 FF              791             MOV     R7,A
0234 900000   F      792             MOV     DPTR,#temp_id?041
0237 EF              793             MOV     A,R7
0238 F0              794             MOVX    @DPTR,A
                     795     ;         if (task_sequence == 0xFF) { //≤ª‘⁄»ŒŒÒ∂”¡–÷–£¨÷±Ω”Õ∑≤Â
                     796                             ; SOURCE LINE # 65
0239 900000   F      797             MOV     DPTR,#task_sequence?046
023C E0              798             MOVX    A,@DPTR
023D FF              799             MOV     R7,A
023E 7E00            800             MOV     R6,#00H
0240 EF              801             MOV     A,R7
0241 64FF            802             XRL     A,#0FFH
0243 4E              803             ORL     A,R6
0244 6003            804             JZ      $ + 5H
0246 020000   F      805             LJMP    ?C0019
                     806     ;             for (j=0; j<TASK_SIZE; j++) {
                     807                             ; SOURCE LINE # 66
0249 900000   F      808             MOV     DPTR,#j?044
024C E4              809             CLR     A
024D F0              810             MOVX    @DPTR,A
024E                 811     ?C0020:
024E 900000   F      812             MOV     DPTR,#j?044
0251 E0              813             MOVX    A,@DPTR
0252 FF              814             MOV     R7,A
0253 EF              815             MOV     A,R7
0254 33              816             RLC     A
0255 95E0            817             SUBB    A,ACC
0257 FE              818             MOV     R6,A
0258 C3              819             CLR     C
0259 EF              820             MOV     A,R7
025A 9408            821             SUBB    A,#08H
025C EE              822             MOV     A,R6
025D 6480            823             XRL     A,#080H
025F 9480            824             SUBB    A,#080H
0261 4003            825             JC      $ + 5H
0263 020000   F      826             LJMP    ?C0024
                     827     ;                 if (os_task_run[j] == 0xFF) {
                     828                             ; SOURCE LINE # 67
0266 900000   F      829             MOV     DPTR,#j?044
0269 E0              830             MOVX    A,@DPTR
026A FF              831             MOV     R7,A
026B EF              832             MOV     A,R7
026C 33              833             RLC     A
026D 95E0            834             SUBB    A,ACC
026F FE              835             MOV     R6,A
0270 7400     F      836             MOV     A,#LOW (os_task_run)
0272 2F              837             ADD     A,R7
0273 F582            838             MOV     DPL,A
0275 7400     F      839             MOV     A,#HIGH (os_task_run)
0277 3E              840             ADDC    A,R6
0278 F583            841             MOV     DPH,A
027A E0              842             MOVX    A,@DPTR
027B FF              843             MOV     R7,A
027C 7E00            844             MOV     R6,#00H
027E EF              845             MOV     A,R7
027F 64FF            846             XRL     A,#0FFH
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    14

0281 4E              847             ORL     A,R6
0282 701F            848             JNZ     ?C0023
                     849     ;                     os_task_run[j] = temp_id;
                     850                             ; SOURCE LINE # 68
0284 900000   F      851             MOV     DPTR,#temp_id?041
0287 E0              852             MOVX    A,@DPTR
0288 FF              853             MOV     R7,A
0289 900000   F      854             MOV     DPTR,#j?044
028C E0              855             MOVX    A,@DPTR
028D FE              856             MOV     R6,A
028E EE              857             MOV     A,R6
028F FD              858             MOV     R5,A
0290 33              859             RLC     A
0291 95E0            860             SUBB    A,ACC
0293 FC              861             MOV     R4,A
0294 7400     F      862             MOV     A,#LOW (os_task_run)
0296 2D              863             ADD     A,R5
0297 F582            864             MOV     DPL,A
0299 7400     F      865             MOV     A,#HIGH (os_task_run)
029B 3C              866             ADDC    A,R4
029C F583            867             MOV     DPH,A
029E EF              868             MOV     A,R7
029F F0              869             MOVX    @DPTR,A
                     870     ;                     break;
                     871                             ; SOURCE LINE # 69
02A0 020000   F      872             LJMP    ?C0024
                     873     ;                 }
                     874                             ; SOURCE LINE # 70
02A3                 875     ?C0023:
                     876     ;                 temp_temp_id = os_task_run[j];
                     877                             ; SOURCE LINE # 71
02A3 900000   F      878             MOV     DPTR,#j?044
02A6 E0              879             MOVX    A,@DPTR
02A7 FF              880             MOV     R7,A
02A8 EF              881             MOV     A,R7
02A9 33              882             RLC     A
02AA 95E0            883             SUBB    A,ACC
02AC FE              884             MOV     R6,A
02AD 7400     F      885             MOV     A,#LOW (os_task_run)
02AF 2F              886             ADD     A,R7
02B0 F582            887             MOV     DPL,A
02B2 7400     F      888             MOV     A,#HIGH (os_task_run)
02B4 3E              889             ADDC    A,R6
02B5 F583            890             MOV     DPH,A
02B7 E0              891             MOVX    A,@DPTR
02B8 FF              892             MOV     R7,A
02B9 900000   F      893             MOV     DPTR,#temp_temp_id?042
02BC EF              894             MOV     A,R7
02BD F0              895             MOVX    @DPTR,A
                     896     ;                 os_task_run[j] = temp_id;
                     897                             ; SOURCE LINE # 72
02BE 900000   F      898             MOV     DPTR,#temp_id?041
02C1 E0              899             MOVX    A,@DPTR
02C2 FF              900             MOV     R7,A
02C3 900000   F      901             MOV     DPTR,#j?044
02C6 E0              902             MOVX    A,@DPTR
02C7 FE              903             MOV     R6,A
02C8 EE              904             MOV     A,R6
02C9 FD              905             MOV     R5,A
02CA 33              906             RLC     A
02CB 95E0            907             SUBB    A,ACC
02CD FC              908             MOV     R4,A
02CE 7400     F      909             MOV     A,#LOW (os_task_run)
02D0 2D              910             ADD     A,R5
02D1 F582            911             MOV     DPL,A
02D3 7400     F      912             MOV     A,#HIGH (os_task_run)
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    15

02D5 3C              913             ADDC    A,R4
02D6 F583            914             MOV     DPH,A
02D8 EF              915             MOV     A,R7
02D9 F0              916             MOVX    @DPTR,A
                     917     ;                 temp_id = temp_temp_id;
                     918                             ; SOURCE LINE # 73
02DA 900000   F      919             MOV     DPTR,#temp_temp_id?042
02DD E0              920             MOVX    A,@DPTR
02DE FF              921             MOV     R7,A
02DF 900000   F      922             MOV     DPTR,#temp_id?041
02E2 EF              923             MOV     A,R7
02E3 F0              924             MOVX    @DPTR,A
                     925     ;             }
                     926                             ; SOURCE LINE # 74
02E4 900000   F      927             MOV     DPTR,#j?044
02E7 E0              928             MOVX    A,@DPTR
02E8 04              929             INC     A
02E9 F0              930             MOVX    @DPTR,A
02EA 020000   F      931             LJMP    ?C0020
                     932     ;         } else { //“—‘⁄»ŒŒÒ∂”¡–÷–£¨‘⁄À˘‘⁄Œª÷√«∞“∆
                     933                             ; SOURCE LINE # 75
02ED 805E            934             SJMP    ?C0024
02EF                 935     ?C0019:
                     936     ;             for (j = task_sequence; j>0; j--) {
                     937                             ; SOURCE LINE # 76
02EF 900000   F      938             MOV     DPTR,#task_sequence?046
02F2 E0              939             MOVX    A,@DPTR
02F3 FF              940             MOV     R7,A
02F4 900000   F      941             MOV     DPTR,#j?044
02F7 EF              942             MOV     A,R7
02F8 F0              943             MOVX    @DPTR,A
02F9                 944     ?C0025:
02F9 900000   F      945             MOV     DPTR,#j?044
02FC E0              946             MOVX    A,@DPTR
02FD FF              947             MOV     R7,A
02FE EF              948             MOV     A,R7
02FF 33              949             RLC     A
0300 95E0            950             SUBB    A,ACC
0302 FE              951             MOV     R6,A
0303 D3              952             SETB    C
0304 EF              953             MOV     A,R7
0305 9400            954             SUBB    A,#00H
0307 EE              955             MOV     A,R6
0308 6480            956             XRL     A,#080H
030A 9480            957             SUBB    A,#080H
030C 4035            958             JC      ?C0026
                     959     ;                 os_task_run[j] = os_task_run[j-1];
                     960                             ; SOURCE LINE # 77
030E 900000   F      961             MOV     DPTR,#j?044
0311 E0              962             MOVX    A,@DPTR
0312 FF              963             MOV     R7,A
0313 EF              964             MOV     A,R7
0314 33              965             RLC     A
0315 95E0            966             SUBB    A,ACC
0317 FE              967             MOV     R6,A
0318 7400     F      968             MOV     A,#LOW (os_task_run+0FFFFH)
031A 2F              969             ADD     A,R7
031B F582            970             MOV     DPL,A
031D 7400     F      971             MOV     A,#HIGH (os_task_run+0FFFFH)
031F 3E              972             ADDC    A,R6
0320 F583            973             MOV     DPH,A
0322 E0              974             MOVX    A,@DPTR
0323 FF              975             MOV     R7,A
0324 900000   F      976             MOV     DPTR,#j?044
0327 E0              977             MOVX    A,@DPTR
0328 FE              978             MOV     R6,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    16

0329 EE              979             MOV     A,R6
032A FD              980             MOV     R5,A
032B 33              981             RLC     A
032C 95E0            982             SUBB    A,ACC
032E FC              983             MOV     R4,A
032F 7400     F      984             MOV     A,#LOW (os_task_run)
0331 2D              985             ADD     A,R5
0332 F582            986             MOV     DPL,A
0334 7400     F      987             MOV     A,#HIGH (os_task_run)
0336 3C              988             ADDC    A,R4
0337 F583            989             MOV     DPH,A
0339 EF              990             MOV     A,R7
033A F0              991             MOVX    @DPTR,A
                     992     ;             }
                     993                             ; SOURCE LINE # 78
033B 900000   F      994             MOV     DPTR,#j?044
033E E0              995             MOVX    A,@DPTR
033F 14              996             DEC     A
0340 F0              997             MOVX    @DPTR,A
0341 80B6            998             SJMP    ?C0025
0343                 999     ?C0026:
                    1000     ;             os_task_run[0] = os_task_running_ID;
                    1001                             ; SOURCE LINE # 79
0343 900000   F     1002             MOV     DPTR,#os_task_running_ID
0346 E0             1003             MOVX    A,@DPTR
0347 FF             1004             MOV     R7,A
0348 900000   F     1005             MOV     DPTR,#os_task_run
034B EF             1006             MOV     A,R7
034C F0             1007             MOVX    @DPTR,A
                    1008     ;         }
                    1009                             ; SOURCE LINE # 80
034D                1010     ?C0024:
                    1011     ;     }
                    1012                             ; SOURCE LINE # 81
                    1013     ;     if (os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr == 0)//∏¯µ±«∞‘À––µƒ ±º‰∆¨∏≥÷µ
                    1014                             ; SOURCE LINE # 82
034D 900000   F     1015             MOV     DPTR,#os_task_running_ID
0350 E0             1016             MOVX    A,@DPTR
0351 FF             1017             MOV     R7,A
0352 EF             1018             MOV     A,R7
0353 75F00E         1019             MOV     B,#0EH
0356 A4             1020             MUL     AB
0357 2400     F     1021             ADD     A,#LOW (os_tcb+07H)
0359 F582           1022             MOV     DPL,A
035B E4             1023             CLR     A
035C 3400     F     1024             ADDC    A,#HIGH (os_tcb+07H)
035E F583           1025             MOV     DPH,A
0360 E0             1026             MOVX    A,@DPTR
0361 FF             1027             MOV     R7,A
0362 7E00           1028             MOV     R6,#00H
0364 EF             1029             MOV     A,R7
0365 4E             1030             ORL     A,R6
0366 702A           1031             JNZ     ?C0028
                    1032     ;         os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr = os_tcb[os_task_running_ID].OSTCBT
                             imeQuanta;
                    1033                             ; SOURCE LINE # 83
0368 900000   F     1034             MOV     DPTR,#os_task_running_ID
036B E0             1035             MOVX    A,@DPTR
036C FF             1036             MOV     R7,A
036D EF             1037             MOV     A,R7
036E 75F00E         1038             MOV     B,#0EH
0371 A4             1039             MUL     AB
0372 2400     F     1040             ADD     A,#LOW (os_tcb+06H)
0374 F582           1041             MOV     DPL,A
0376 E4             1042             CLR     A
0377 3400     F     1043             ADDC    A,#HIGH (os_tcb+06H)
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    17

0379 F583           1044             MOV     DPH,A
037B E0             1045             MOVX    A,@DPTR
037C FF             1046             MOV     R7,A
037D 900000   F     1047             MOV     DPTR,#os_task_running_ID
0380 E0             1048             MOVX    A,@DPTR
0381 FE             1049             MOV     R6,A
0382 EE             1050             MOV     A,R6
0383 75F00E         1051             MOV     B,#0EH
0386 A4             1052             MUL     AB
0387 2400     F     1053             ADD     A,#LOW (os_tcb+07H)
0389 F582           1054             MOV     DPL,A
038B E4             1055             CLR     A
038C 3400     F     1056             ADDC    A,#HIGH (os_tcb+07H)
038E F583           1057             MOV     DPH,A
0390 EF             1058             MOV     A,R7
0391 F0             1059             MOVX    @DPTR,A
0392                1060     ?C0028:
                    1061     ;     os_tcb[os_task_running_ID].OSTCBStatus = OS_STAT_RUNNING;
                    1062                             ; SOURCE LINE # 84
0392 900000   F     1063             MOV     DPTR,#os_task_running_ID
0395 E0             1064             MOVX    A,@DPTR
0396 FF             1065             MOV     R7,A
0397 EF             1066             MOV     A,R7
0398 75F00E         1067             MOV     B,#0EH
039B A4             1068             MUL     AB
039C 2400     F     1069             ADD     A,#LOW (os_tcb+03H)
039E F582           1070             MOV     DPL,A
03A0 E4             1071             CLR     A
03A1 3400     F     1072             ADDC    A,#HIGH (os_tcb+03H)
03A3 F583           1073             MOV     DPH,A
03A5 E4             1074             CLR     A
03A6 F0             1075             MOVX    @DPTR,A
03A7 A3             1076             INC     DPTR
03A8 7401           1077             MOV     A,#01H
03AA F0             1078             MOVX    @DPTR,A
                    1079     ;     SP = os_tcb[os_task_running_ID].OSTCBStkPtr;
                    1080                             ; SOURCE LINE # 85
03AB 900000   F     1081             MOV     DPTR,#os_task_running_ID
03AE E0             1082             MOVX    A,@DPTR
03AF FF             1083             MOV     R7,A
03B0 EF             1084             MOV     A,R7
03B1 75F00E         1085             MOV     B,#0EH
03B4 A4             1086             MUL     AB
03B5 2400     F     1087             ADD     A,#LOW (os_tcb)
03B7 F582           1088             MOV     DPL,A
03B9 E4             1089             CLR     A
03BA 3400     F     1090             ADDC    A,#HIGH (os_tcb)
03BC F583           1091             MOV     DPH,A
03BE E0             1092             MOVX    A,@DPTR
03BF FF             1093             MOV     R7,A
03C0 8F81           1094             MOV     SP,R7
                    1095     ; #pragma asm
                    1096     ;     POP      AR7
03C2 D007           1097               POP      AR7
                    1098     ;     POP      AR6
03C4 D006           1099               POP      AR6
                    1100     ;     POP      AR5
03C6 D005           1101               POP      AR5
                    1102     ;     POP      AR4
03C8 D004           1103               POP      AR4
                    1104     ;     POP      AR3
03CA D003           1105               POP      AR3
                    1106     ;     POP      AR2
03CC D002           1107               POP      AR2
                    1108     ;     POP      AR1
03CE D001           1109               POP      AR1
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    18

                    1110     ;     POP      AR0
03D0 D000           1111               POP      AR0
                    1112     ;     POP      PSW
03D2 D0D0           1113               POP      PSW
                    1114     ;     POP      DPL
03D4 D082           1115               POP      DPL
                    1116     ;     POP      DPH
03D6 D083           1117               POP      DPH
                    1118     ;     POP      B
03D8 D0F0           1119               POP      B
                    1120     ;     POP      ACC
03DA D0E0           1121               POP      ACC
                    1122     ; #pragma endasm
                    1123     ;     OS_EXIT_CRITICAL();
                    1124                             ; SOURCE LINE # 101
03DC D2AF           1125             SETB    EA
                    1126     ; }
                    1127                             ; SOURCE LINE # 102
03DE 22             1128             RET     
                    1129     ; END OF OS_TASK_SW
                    1130     
----                1131     CSEG    AT      0000BH
000B 020000   F     1132             LJMP    timer0_int
                    1133     
                    1134     ; 
                    1135     ; #ifdef SYSTEM_DETECT_MODE
                    1136     ; u8  int_count = 0;
                    1137     ; #endif
                    1138     ; /********************* Timer0÷–∂œ∫Ø ************************/
                    1139     ; void timer0_int (void) interrupt TIMER0_VECTOR {
                    1140     
----                1141             RSEG  ?PR?timer0_int?RT_OS_ASM
                    1142             USING   0
0000                1143     timer0_int:
0000 C0E0           1144             PUSH    ACC
0002 C0F0           1145             PUSH    B
0004 C083           1146             PUSH    DPH
0006 C082           1147             PUSH    DPL
0008 C0D0           1148             PUSH    PSW
000A 75D000         1149             MOV     PSW,#00H
000D C000           1150             PUSH    AR0
000F C001           1151             PUSH    AR1
0011 C002           1152             PUSH    AR2
0013 C003           1153             PUSH    AR3
0015 C004           1154             PUSH    AR4
0017 C005           1155             PUSH    AR5
0019 C006           1156             PUSH    AR6
001B C007           1157             PUSH    AR7
                    1158             USING   0
                    1159                             ; SOURCE LINE # 108
                    1160     ;     u8 i;
                    1161     ;     BOOLEAN need_schedule = FALSE;
                    1162                             ; SOURCE LINE # 110
001D 900000   F     1163             MOV     DPTR,#need_schedule?156
0020 E4             1164             CLR     A
0021 F0             1165             MOVX    @DPTR,A
                    1166     ; #pragma asm
                    1167     ;     MOV AR1,AR1
0022 850101         1168               MOV AR1,AR1
                    1169     ; #pragma endasm
                    1170     ; #ifdef SYSTEM_DETECT_MODE
                    1171     ;     if (++int_count == 100) {
                    1172                             ; SOURCE LINE # 115
0025 900000   F     1173             MOV     DPTR,#int_count
0028 E0             1174             MOVX    A,@DPTR
0029 04             1175             INC     A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    19

002A FF             1176             MOV     R7,A
002B F0             1177             MOVX    @DPTR,A
002C 7E00           1178             MOV     R6,#00H
002E EF             1179             MOV     A,R7
002F 6464           1180             XRL     A,#064H
0031 4E             1181             ORL     A,R6
0032 6003           1182             JZ      $ + 5H
0034 020000   F     1183             LJMP    ?C0030
                    1184     ;         u8 i = 0;
                    1185                             ; SOURCE LINE # 116
0037 900000   F     1186             MOV     DPTR,#i?147
003A E4             1187             CLR     A
003B F0             1188             MOVX    @DPTR,A
                    1189     ;         os_tcb[os_task_running_ID].OSTCBCyclesTot++;
                    1190                             ; SOURCE LINE # 117
003C 900000   F     1191             MOV     DPTR,#os_task_running_ID
003F E0             1192             MOVX    A,@DPTR
0040 FF             1193             MOV     R7,A
0041 EF             1194             MOV     A,R7
0042 75F00E         1195             MOV     B,#0EH
0045 A4             1196             MUL     AB
0046 2400     F     1197             ADD     A,#LOW (os_tcb+0BH)
0048 F582           1198             MOV     DPL,A
004A E4             1199             CLR     A
004B 3400     F     1200             ADDC    A,#HIGH (os_tcb+0BH)
004D F583           1201             MOV     DPH,A
004F E0             1202             MOVX    A,@DPTR
0050 04             1203             INC     A
0051 F0             1204             MOVX    @DPTR,A
                    1205     ;         for (; i<TASK_SIZE; i++) {
                    1206                             ; SOURCE LINE # 118
0052                1207     ?C0031:
0052 900000   F     1208             MOV     DPTR,#i?147
0055 E0             1209             MOVX    A,@DPTR
0056 FF             1210             MOV     R7,A
0057 7E00           1211             MOV     R6,#00H
0059 C3             1212             CLR     C
005A EF             1213             MOV     A,R7
005B 9408           1214             SUBB    A,#08H
005D EE             1215             MOV     A,R6
005E 6480           1216             XRL     A,#080H
0060 9480           1217             SUBB    A,#080H
0062 4003           1218             JC      $ + 5H
0064 020000   F     1219             LJMP    ?C0032
                    1220     ;             sys_stat[i].OSSSStatus = os_tcb[i].OSTCBStatus;
                    1221                             ; SOURCE LINE # 119
0067 900000   F     1222             MOV     DPTR,#i?147
006A E0             1223             MOVX    A,@DPTR
006B FF             1224             MOV     R7,A
006C EF             1225             MOV     A,R7
006D 75F00E         1226             MOV     B,#0EH
0070 A4             1227             MUL     AB
0071 2400     F     1228             ADD     A,#LOW (os_tcb+03H)
0073 F582           1229             MOV     DPL,A
0075 E4             1230             CLR     A
0076 3400     F     1231             ADDC    A,#HIGH (os_tcb+03H)
0078 F583           1232             MOV     DPH,A
007A E0             1233             MOVX    A,@DPTR
007B FE             1234             MOV     R6,A
007C A3             1235             INC     DPTR
007D E0             1236             MOVX    A,@DPTR
007E FF             1237             MOV     R7,A
007F 900000   F     1238             MOV     DPTR,#i?147
0082 E0             1239             MOVX    A,@DPTR
0083 FD             1240             MOV     R5,A
0084 ED             1241             MOV     A,R5
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    20

0085 25E0           1242             ADD     A,ACC
0087 25E0           1243             ADD     A,ACC
0089 2400     F     1244             ADD     A,#LOW (sys_stat)
008B F582           1245             MOV     DPL,A
008D E4             1246             CLR     A
008E 3400     F     1247             ADDC    A,#HIGH (sys_stat)
0090 F583           1248             MOV     DPH,A
0092 EE             1249             MOV     A,R6
0093 F0             1250             MOVX    @DPTR,A
0094 A3             1251             INC     DPTR
0095 EF             1252             MOV     A,R7
0096 F0             1253             MOVX    @DPTR,A
                    1254     ;             sys_stat[i].OSSSCyclesTot = os_tcb[i].OSTCBCyclesTot;
                    1255                             ; SOURCE LINE # 120
0097 900000   F     1256             MOV     DPTR,#i?147
009A E0             1257             MOVX    A,@DPTR
009B FF             1258             MOV     R7,A
009C EF             1259             MOV     A,R7
009D 75F00E         1260             MOV     B,#0EH
00A0 A4             1261             MUL     AB
00A1 2400     F     1262             ADD     A,#LOW (os_tcb+0BH)
00A3 F582           1263             MOV     DPL,A
00A5 E4             1264             CLR     A
00A6 3400     F     1265             ADDC    A,#HIGH (os_tcb+0BH)
00A8 F583           1266             MOV     DPH,A
00AA E0             1267             MOVX    A,@DPTR
00AB FF             1268             MOV     R7,A
00AC 900000   F     1269             MOV     DPTR,#i?147
00AF E0             1270             MOVX    A,@DPTR
00B0 FE             1271             MOV     R6,A
00B1 EE             1272             MOV     A,R6
00B2 25E0           1273             ADD     A,ACC
00B4 25E0           1274             ADD     A,ACC
00B6 2400     F     1275             ADD     A,#LOW (sys_stat+02H)
00B8 F582           1276             MOV     DPL,A
00BA E4             1277             CLR     A
00BB 3400     F     1278             ADDC    A,#HIGH (sys_stat+02H)
00BD F583           1279             MOV     DPH,A
00BF EF             1280             MOV     A,R7
00C0 F0             1281             MOVX    @DPTR,A
                    1282     ;             sys_stat[i].OSSSMaxUsedStk = get_stack_used(os_tcb[i].OSTCBStkBottomPtr, os_t
                             cb[i].OSTCBStkSize);
                    1283                             ; SOURCE LINE # 121
00C1 900000   F     1284             MOV     DPTR,#i?147
00C4 E0             1285             MOVX    A,@DPTR
00C5 FF             1286             MOV     R7,A
00C6 EF             1287             MOV     A,R7
00C7 75F00E         1288             MOV     B,#0EH
00CA A4             1289             MUL     AB
00CB 2400     F     1290             ADD     A,#LOW (os_tcb+08H)
00CD F582           1291             MOV     DPL,A
00CF E4             1292             CLR     A
00D0 3400     F     1293             ADDC    A,#HIGH (os_tcb+08H)
00D2 F583           1294             MOV     DPH,A
00D4 E0             1295             MOVX    A,@DPTR
00D5 FB             1296             MOV     R3,A
00D6 A3             1297             INC     DPTR
00D7 E0             1298             MOVX    A,@DPTR
00D8 FA             1299             MOV     R2,A
00D9 A3             1300             INC     DPTR
00DA E0             1301             MOVX    A,@DPTR
00DB F9             1302             MOV     R1,A
00DC 900000   F     1303             MOV     DPTR,#i?147
00DF E0             1304             MOVX    A,@DPTR
00E0 FF             1305             MOV     R7,A
00E1 EF             1306             MOV     A,R7
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    21

00E2 75F00E         1307             MOV     B,#0EH
00E5 A4             1308             MUL     AB
00E6 2400     F     1309             ADD     A,#LOW (os_tcb+0CH)
00E8 F582           1310             MOV     DPL,A
00EA E4             1311             CLR     A
00EB 3400     F     1312             ADDC    A,#HIGH (os_tcb+0CH)
00ED F583           1313             MOV     DPH,A
00EF E0             1314             MOVX    A,@DPTR
00F0 FD             1315             MOV     R5,A
00F1 120000   F     1316             LCALL   _get_stack_used
00F4 900000   F     1317             MOV     DPTR,#i?147
00F7 E0             1318             MOVX    A,@DPTR
00F8 FE             1319             MOV     R6,A
00F9 EE             1320             MOV     A,R6
00FA 25E0           1321             ADD     A,ACC
00FC 25E0           1322             ADD     A,ACC
00FE 2400     F     1323             ADD     A,#LOW (sys_stat+03H)
0100 F582           1324             MOV     DPL,A
0102 E4             1325             CLR     A
0103 3400     F     1326             ADDC    A,#HIGH (sys_stat+03H)
0105 F583           1327             MOV     DPH,A
0107 EF             1328             MOV     A,R7
0108 F0             1329             MOVX    @DPTR,A
                    1330     ;             os_tcb[i].OSTCBCyclesTot = 0;
                    1331                             ; SOURCE LINE # 122
0109 900000   F     1332             MOV     DPTR,#i?147
010C E0             1333             MOVX    A,@DPTR
010D FF             1334             MOV     R7,A
010E EF             1335             MOV     A,R7
010F 75F00E         1336             MOV     B,#0EH
0112 A4             1337             MUL     AB
0113 2400     F     1338             ADD     A,#LOW (os_tcb+0BH)
0115 F582           1339             MOV     DPL,A
0117 E4             1340             CLR     A
0118 3400     F     1341             ADDC    A,#HIGH (os_tcb+0BH)
011A F583           1342             MOV     DPH,A
011C E4             1343             CLR     A
011D F0             1344             MOVX    @DPTR,A
                    1345     ;         }
                    1346                             ; SOURCE LINE # 123
011E 900000   F     1347             MOV     DPTR,#i?147
0121 E0             1348             MOVX    A,@DPTR
0122 04             1349             INC     A
0123 F0             1350             MOVX    @DPTR,A
0124 020000   F     1351             LJMP    ?C0031
0127                1352     ?C0032:
                    1353     ;         int_count = 0;
                    1354                             ; SOURCE LINE # 124
0127 900000   F     1355             MOV     DPTR,#int_count
012A E4             1356             CLR     A
012B F0             1357             MOVX    @DPTR,A
                    1358     ;     }
                    1359                             ; SOURCE LINE # 125
012C 8016           1360             SJMP    ?C0034
012E                1361     ?C0030:
                    1362     ;     else {
                    1363                             ; SOURCE LINE # 126
                    1364     ;         os_tcb[os_task_running_ID].OSTCBCyclesTot++;
                    1365                             ; SOURCE LINE # 127
012E 900000   F     1366             MOV     DPTR,#os_task_running_ID
0131 E0             1367             MOVX    A,@DPTR
0132 FF             1368             MOV     R7,A
0133 EF             1369             MOV     A,R7
0134 75F00E         1370             MOV     B,#0EH
0137 A4             1371             MUL     AB
0138 2400     F     1372             ADD     A,#LOW (os_tcb+0BH)
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    22

013A F582           1373             MOV     DPL,A
013C E4             1374             CLR     A
013D 3400     F     1375             ADDC    A,#HIGH (os_tcb+0BH)
013F F583           1376             MOV     DPH,A
0141 E0             1377             MOVX    A,@DPTR
0142 04             1378             INC     A
0143 F0             1379             MOVX    @DPTR,A
                    1380     ;     }
                    1381                             ; SOURCE LINE # 128
0144                1382     ?C0034:
                    1383     ; #endif
                    1384     ;     for(i=0; i<TASK_SIZE; i++) { //»ŒŒÒ ±÷”
                    1385                             ; SOURCE LINE # 130
0144 900000   F     1386             MOV     DPTR,#i?155
0147 E4             1387             CLR     A
0148 F0             1388             MOVX    @DPTR,A
0149                1389     ?C0035:
0149 900000   F     1390             MOV     DPTR,#i?155
014C E0             1391             MOVX    A,@DPTR
014D FF             1392             MOV     R7,A
014E 7E00           1393             MOV     R6,#00H
0150 C3             1394             CLR     C
0151 EF             1395             MOV     A,R7
0152 9408           1396             SUBB    A,#08H
0154 EE             1397             MOV     A,R6
0155 6480           1398             XRL     A,#080H
0157 9480           1399             SUBB    A,#080H
0159 507B           1400             JNC     ?C0036
                    1401     ;         if(os_tcb[i].OSTCBDly) {
                    1402                             ; SOURCE LINE # 131
015B 900000   F     1403             MOV     DPTR,#i?155
015E E0             1404             MOVX    A,@DPTR
015F FF             1405             MOV     R7,A
0160 EF             1406             MOV     A,R7
0161 75F00E         1407             MOV     B,#0EH
0164 A4             1408             MUL     AB
0165 2400     F     1409             ADD     A,#LOW (os_tcb+01H)
0167 F582           1410             MOV     DPL,A
0169 E4             1411             CLR     A
016A 3400     F     1412             ADDC    A,#HIGH (os_tcb+01H)
016C F583           1413             MOV     DPH,A
016E E0             1414             MOVX    A,@DPTR
016F FE             1415             MOV     R6,A
0170 A3             1416             INC     DPTR
0171 E0             1417             MOVX    A,@DPTR
0172 FF             1418             MOV     R7,A
0173 EF             1419             MOV     A,R7
0174 4E             1420             ORL     A,R6
0175 6056           1421             JZ      ?C0037
                    1422     ;             os_tcb[i].OSTCBDly--;
                    1423                             ; SOURCE LINE # 132
0177 900000   F     1424             MOV     DPTR,#i?155
017A E0             1425             MOVX    A,@DPTR
017B FF             1426             MOV     R7,A
017C EF             1427             MOV     A,R7
017D 75F00E         1428             MOV     B,#0EH
0180 A4             1429             MUL     AB
0181 2400     F     1430             ADD     A,#LOW (os_tcb+01H)
0183 F582           1431             MOV     DPL,A
0185 E4             1432             CLR     A
0186 3400     F     1433             ADDC    A,#HIGH (os_tcb+01H)
0188 F583           1434             MOV     DPH,A
018A 74FF           1435             MOV     A,#0FFH
018C 75F0FF         1436             MOV     B,#0FFH
018F 120000   F     1437             LCALL   ?C?IILDX
                    1438     ;             if(os_tcb[i].OSTCBDly == 0) { //µ±»ŒŒÒ ±÷”µΩ ±,±ÿ–Î «”…∂® ±∆˜ºı ±µƒ≤≈––
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    23

                    1439                             ; SOURCE LINE # 133
0192 900000   F     1440             MOV     DPTR,#i?155
0195 E0             1441             MOVX    A,@DPTR
0196 FF             1442             MOV     R7,A
0197 EF             1443             MOV     A,R7
0198 75F00E         1444             MOV     B,#0EH
019B A4             1445             MUL     AB
019C 2400     F     1446             ADD     A,#LOW (os_tcb+01H)
019E F582           1447             MOV     DPL,A
01A0 E4             1448             CLR     A
01A1 3400     F     1449             ADDC    A,#HIGH (os_tcb+01H)
01A3 F583           1450             MOV     DPH,A
01A5 E0             1451             MOVX    A,@DPTR
01A6 FE             1452             MOV     R6,A
01A7 A3             1453             INC     DPTR
01A8 E0             1454             MOVX    A,@DPTR
01A9 FF             1455             MOV     R7,A
01AA EF             1456             MOV     A,R7
01AB 4E             1457             ORL     A,R6
01AC 701F           1458             JNZ     ?C0037
                    1459     ;                 //os_rdy_tbl |= (0x01<<i); // π»ŒŒÒ‘⁄æÕ–˜±Ì÷–÷√Œª
                    1460     ;                 os_tcb[i].OSTCBStatus = OS_STAT_RDY;
                    1461                             ; SOURCE LINE # 135
01AE 900000   F     1462             MOV     DPTR,#i?155
01B1 E0             1463             MOVX    A,@DPTR
01B2 FF             1464             MOV     R7,A
01B3 EF             1465             MOV     A,R7
01B4 75F00E         1466             MOV     B,#0EH
01B7 A4             1467             MUL     AB
01B8 2400     F     1468             ADD     A,#LOW (os_tcb+03H)
01BA F582           1469             MOV     DPL,A
01BC E4             1470             CLR     A
01BD 3400     F     1471             ADDC    A,#HIGH (os_tcb+03H)
01BF F583           1472             MOV     DPH,A
01C1 E4             1473             CLR     A
01C2 F0             1474             MOVX    @DPTR,A
01C3 A3             1475             INC     DPTR
01C4 7402           1476             MOV     A,#02H
01C6 F0             1477             MOVX    @DPTR,A
                    1478     ;                 need_schedule = TRUE;//“ÚŒ™ ±º‰µΩ£¨ø…ƒ‹∏ﬂº∂»ŒŒÒ◊º±∏æÕ–˜£¨–Ë“™µ˜∂»
                    1479                             ; SOURCE LINE # 136
01C7 900000   F     1480             MOV     DPTR,#need_schedule?156
01CA 7401           1481             MOV     A,#01H
01CC F0             1482             MOVX    @DPTR,A
                    1483     ;             }
                    1484                             ; SOURCE LINE # 137
                    1485     ;         }
                    1486                             ; SOURCE LINE # 138
                    1487     ;     }
                    1488                             ; SOURCE LINE # 139
01CD                1489     ?C0037:
01CD 900000   F     1490             MOV     DPTR,#i?155
01D0 E0             1491             MOVX    A,@DPTR
01D1 04             1492             INC     A
01D2 F0             1493             MOVX    @DPTR,A
01D3 020000   F     1494             LJMP    ?C0035
01D6                1495     ?C0036:
                    1496     ;     // ±º‰∆¨¬÷◊™º∆ ¬ﬂº≠
                    1497     ;     if (os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr == 0) { //µ±«∞‘À––»ŒŒÒ ±º‰∆¨∫ƒæ°£¨÷
                             ¥––÷–∂œœ¬»ŒŒÒµ˜∂»
                    1498                             ; SOURCE LINE # 141
01D6 900000   F     1499             MOV     DPTR,#os_task_running_ID
01D9 E0             1500             MOVX    A,@DPTR
01DA FF             1501             MOV     R7,A
01DB EF             1502             MOV     A,R7
01DC 75F00E         1503             MOV     B,#0EH
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    24

01DF A4             1504             MUL     AB
01E0 2400     F     1505             ADD     A,#LOW (os_tcb+07H)
01E2 F582           1506             MOV     DPL,A
01E4 E4             1507             CLR     A
01E5 3400     F     1508             ADDC    A,#HIGH (os_tcb+07H)
01E7 F583           1509             MOV     DPH,A
01E9 E0             1510             MOVX    A,@DPTR
01EA FF             1511             MOV     R7,A
01EB 7E00           1512             MOV     R6,#00H
01ED EF             1513             MOV     A,R7
01EE 4E             1514             ORL     A,R6
01EF 7008           1515             JNZ     ?C0040
                    1516     ;         need_schedule = TRUE; //“ÚŒ™ ±º‰∆¨∫ƒæ°£¨–Ë“™µ˜∂»
                    1517                             ; SOURCE LINE # 142
01F1 900000   F     1518             MOV     DPTR,#need_schedule?156
01F4 7401           1519             MOV     A,#01H
01F6 F0             1520             MOVX    @DPTR,A
                    1521     ;     } else { // ±º‰∆¨Œ¥µΩ£¨Ω¯––◊‘ºı
                    1522                             ; SOURCE LINE # 143
01F7 8016           1523             SJMP    ?C0041
01F9                1524     ?C0040:
                    1525     ;         os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr--;
                    1526                             ; SOURCE LINE # 144
01F9 900000   F     1527             MOV     DPTR,#os_task_running_ID
01FC E0             1528             MOVX    A,@DPTR
01FD FF             1529             MOV     R7,A
01FE EF             1530             MOV     A,R7
01FF 75F00E         1531             MOV     B,#0EH
0202 A4             1532             MUL     AB
0203 2400     F     1533             ADD     A,#LOW (os_tcb+07H)
0205 F582           1534             MOV     DPL,A
0207 E4             1535             CLR     A
0208 3400     F     1536             ADDC    A,#HIGH (os_tcb+07H)
020A F583           1537             MOV     DPH,A
020C E0             1538             MOVX    A,@DPTR
020D 14             1539             DEC     A
020E F0             1540             MOVX    @DPTR,A
                    1541     ;     }
                    1542                             ; SOURCE LINE # 145
020F                1543     ?C0041:
                    1544     ;     if (need_schedule == TRUE) { //µ˜∂»»ŒŒÒ÷¥––¥˙¬Î
                    1545                             ; SOURCE LINE # 146
020F 900000   F     1546             MOV     DPTR,#need_schedule?156
0212 E0             1547             MOVX    A,@DPTR
0213 FF             1548             MOV     R7,A
0214 7E00           1549             MOV     R6,#00H
0216 EF             1550             MOV     A,R7
0217 6401           1551             XRL     A,#01H
0219 4E             1552             ORL     A,R6
021A 6003           1553             JZ      $ + 5H
021C 020000   F     1554             LJMP    ?C0071
                    1555     ;         char i = 0, j = 0;
                    1556                             ; SOURCE LINE # 147
021F 900000   F     1557             MOV     DPTR,#i?151
0222 E4             1558             CLR     A
0223 F0             1559             MOVX    @DPTR,A
0224 900000   F     1560             MOV     DPTR,#j?152
0227 E4             1561             CLR     A
0228 F0             1562             MOVX    @DPTR,A
                    1563     ;         u8 highest_prio_id = 0;
                    1564                             ; SOURCE LINE # 148
0229 900000   F     1565             MOV     DPTR,#highest_prio_id?153
022C E4             1566             CLR     A
022D F0             1567             MOVX    @DPTR,A
                    1568     ;         u8 task_sequence = 0;//µ±«∞»ŒŒÒµƒ“—‘À––∂”¡–÷–“ª∂® «0
                    1569                             ; SOURCE LINE # 149
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    25

022E 900000   F     1570             MOV     DPTR,#task_sequence?154
0231 E4             1571             CLR     A
0232 F0             1572             MOVX    @DPTR,A
                    1573     ;         //SP -= 2;
                    1574     ;         os_tcb[os_task_running_ID].OSTCBStkPtr = SP;
                    1575                             ; SOURCE LINE # 151
0233 900000   F     1576             MOV     DPTR,#os_task_running_ID
0236 E0             1577             MOVX    A,@DPTR
0237 FF             1578             MOV     R7,A
0238 EF             1579             MOV     A,R7
0239 75F00E         1580             MOV     B,#0EH
023C A4             1581             MUL     AB
023D 2400     F     1582             ADD     A,#LOW (os_tcb)
023F F582           1583             MOV     DPL,A
0241 E4             1584             CLR     A
0242 3400     F     1585             ADDC    A,#HIGH (os_tcb)
0244 F583           1586             MOV     DPH,A
0246 E581           1587             MOV     A,SP
0248 F0             1588             MOVX    @DPTR,A
                    1589     ;         os_tcb[os_task_running_ID].OSTCBStatus = OS_STAT_RDY;
                    1590                             ; SOURCE LINE # 152
0249 900000   F     1591             MOV     DPTR,#os_task_running_ID
024C E0             1592             MOVX    A,@DPTR
024D FF             1593             MOV     R7,A
024E EF             1594             MOV     A,R7
024F 75F00E         1595             MOV     B,#0EH
0252 A4             1596             MUL     AB
0253 2400     F     1597             ADD     A,#LOW (os_tcb+03H)
0255 F582           1598             MOV     DPL,A
0257 E4             1599             CLR     A
0258 3400     F     1600             ADDC    A,#HIGH (os_tcb+03H)
025A F583           1601             MOV     DPH,A
025C E4             1602             CLR     A
025D F0             1603             MOVX    @DPTR,A
025E A3             1604             INC     DPTR
025F 7402           1605             MOV     A,#02H
0261 F0             1606             MOVX    @DPTR,A
                    1607     ;         //«–ªª»ŒŒÒ’ª
                    1608     ;         for (; i<TASK_SIZE; i++) { //’“µΩ”≈œ»º∂◊Ó∏ﬂ»ŒŒÒ£¨≤¢«“ «‘⁄“—‘À––»ŒŒÒ∂”¡–µƒ◊Ó∫Û£¨»Á
                             π˚“—‘À––»ŒŒÒ∂”¡–÷–√ª”–‘Ú”≈œ»‘À––
                    1609                             ; SOURCE LINE # 154
0262                1610     ?C0043:
0262 900000   F     1611             MOV     DPTR,#i?151
0265 E0             1612             MOVX    A,@DPTR
0266 FF             1613             MOV     R7,A
0267 EF             1614             MOV     A,R7
0268 33             1615             RLC     A
0269 95E0           1616             SUBB    A,ACC
026B FE             1617             MOV     R6,A
026C C3             1618             CLR     C
026D EF             1619             MOV     A,R7
026E 9408           1620             SUBB    A,#08H
0270 EE             1621             MOV     A,R6
0271 6480           1622             XRL     A,#080H
0273 9480           1623             SUBB    A,#080H
0275 4003           1624             JC      $ + 5H
0277 020000   F     1625             LJMP    ?C0044
                    1626     ;             if (os_tcb[i].OSTCBStatus == OS_STAT_RDY) {
                    1627                             ; SOURCE LINE # 155
027A 900000   F     1628             MOV     DPTR,#i?151
027D E0             1629             MOVX    A,@DPTR
027E FF             1630             MOV     R7,A
027F EF             1631             MOV     A,R7
0280 33             1632             RLC     A
0281 95E0           1633             SUBB    A,ACC
0283 FE             1634             MOV     R6,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    26

0284 900000   F     1635             MOV     DPTR,#os_tcb+03H
0287 75F00E         1636             MOV     B,#0EH
028A EF             1637             MOV     A,R7
028B 120000   F     1638             LCALL   ?C?OFFXADD
028E EE             1639             MOV     A,R6
028F 75F00E         1640             MOV     B,#0EH
0292 A4             1641             MUL     AB
0293 2583           1642             ADD     A,DPH
0295 F583           1643             MOV     DPH,A
0297 E0             1644             MOVX    A,@DPTR
0298 FE             1645             MOV     R6,A
0299 A3             1646             INC     DPTR
029A E0             1647             MOVX    A,@DPTR
029B FF             1648             MOV     R7,A
029C EF             1649             MOV     A,R7
029D 6402           1650             XRL     A,#02H
029F 4E             1651             ORL     A,R6
02A0 6003           1652             JZ      $ + 5H
02A2 020000   F     1653             LJMP    ?C0045
                    1654     ;                 if (os_tcb[i].OSTCBPrio > os_tcb[highest_prio_id].OSTCBPrio) {
                    1655                             ; SOURCE LINE # 156
02A5 900000   F     1656             MOV     DPTR,#i?151
02A8 E0             1657             MOVX    A,@DPTR
02A9 FF             1658             MOV     R7,A
02AA EF             1659             MOV     A,R7
02AB 33             1660             RLC     A
02AC 95E0           1661             SUBB    A,ACC
02AE FE             1662             MOV     R6,A
02AF 900000   F     1663             MOV     DPTR,#os_tcb+05H
02B2 75F00E         1664             MOV     B,#0EH
02B5 EF             1665             MOV     A,R7
02B6 120000   F     1666             LCALL   ?C?OFFXADD
02B9 EE             1667             MOV     A,R6
02BA 75F00E         1668             MOV     B,#0EH
02BD A4             1669             MUL     AB
02BE 2583           1670             ADD     A,DPH
02C0 F583           1671             MOV     DPH,A
02C2 E0             1672             MOVX    A,@DPTR
02C3 FF             1673             MOV     R7,A
02C4 900000   F     1674             MOV     DPTR,#highest_prio_id?153
02C7 E0             1675             MOVX    A,@DPTR
02C8 FE             1676             MOV     R6,A
02C9 EE             1677             MOV     A,R6
02CA 75F00E         1678             MOV     B,#0EH
02CD A4             1679             MUL     AB
02CE 2400     F     1680             ADD     A,#LOW (os_tcb+05H)
02D0 F582           1681             MOV     DPL,A
02D2 E4             1682             CLR     A
02D3 3400     F     1683             ADDC    A,#HIGH (os_tcb+05H)
02D5 F583           1684             MOV     DPH,A
02D7 E0             1685             MOVX    A,@DPTR
02D8 FE             1686             MOV     R6,A
02D9 EF             1687             MOV     A,R7
02DA D3             1688             SETB    C
02DB 9E             1689             SUBB    A,R6
02DC 5003           1690             JNC     $ + 5H
02DE 020000   F     1691             LJMP    ?C0047
                    1692     ;                     highest_prio_id = i;
                    1693                             ; SOURCE LINE # 157
02E1 900000   F     1694             MOV     DPTR,#i?151
02E4 E0             1695             MOVX    A,@DPTR
02E5 FF             1696             MOV     R7,A
02E6 900000   F     1697             MOV     DPTR,#highest_prio_id?153
02E9 EF             1698             MOV     A,R7
02EA F0             1699             MOVX    @DPTR,A
                    1700     ;                     //≤È’“∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    27

                    1701     ;                     task_sequence = 0xFF;//œ»ºŸ…Ë’‚∏ˆ≈≈‘⁄◊Ó◊Ó◊Ó∫Û√Ê
                    1702                             ; SOURCE LINE # 159
02EB 900000   F     1703             MOV     DPTR,#task_sequence?154
02EE 74FF           1704             MOV     A,#0FFH
02F0 F0             1705             MOVX    @DPTR,A
                    1706     ;                     for (j=0; j<TASK_SIZE; j++) {
                    1707                             ; SOURCE LINE # 160
02F1 900000   F     1708             MOV     DPTR,#j?152
02F4 E4             1709             CLR     A
02F5 F0             1710             MOVX    @DPTR,A
02F6                1711     ?C0048:
02F6 900000   F     1712             MOV     DPTR,#j?152
02F9 E0             1713             MOVX    A,@DPTR
02FA FF             1714             MOV     R7,A
02FB EF             1715             MOV     A,R7
02FC 33             1716             RLC     A
02FD 95E0           1717             SUBB    A,ACC
02FF FE             1718             MOV     R6,A
0300 C3             1719             CLR     C
0301 EF             1720             MOV     A,R7
0302 9408           1721             SUBB    A,#08H
0304 EE             1722             MOV     A,R6
0305 6480           1723             XRL     A,#080H
0307 9480           1724             SUBB    A,#080H
0309 4003           1725             JC      $ + 5H
030B 020000   F     1726             LJMP    ?C0045
                    1727     ;                         if (os_task_run[j] == i) {
                    1728                             ; SOURCE LINE # 161
030E 900000   F     1729             MOV     DPTR,#j?152
0311 E0             1730             MOVX    A,@DPTR
0312 FF             1731             MOV     R7,A
0313 EF             1732             MOV     A,R7
0314 33             1733             RLC     A
0315 95E0           1734             SUBB    A,ACC
0317 FE             1735             MOV     R6,A
0318 7400     F     1736             MOV     A,#LOW (os_task_run)
031A 2F             1737             ADD     A,R7
031B F582           1738             MOV     DPL,A
031D 7400     F     1739             MOV     A,#HIGH (os_task_run)
031F 3E             1740             ADDC    A,R6
0320 F583           1741             MOV     DPH,A
0322 E0             1742             MOVX    A,@DPTR
0323 FF             1743             MOV     R7,A
0324 900000   F     1744             MOV     DPTR,#i?151
0327 E0             1745             MOVX    A,@DPTR
0328 FE             1746             MOV     R6,A
0329 EE             1747             MOV     A,R6
032A B5070D         1748             CJNE    A,AR7,?C0051
                    1749     ;                             task_sequence = j;
                    1750                             ; SOURCE LINE # 162
032D 900000   F     1751             MOV     DPTR,#j?152
0330 E0             1752             MOVX    A,@DPTR
0331 FF             1753             MOV     R7,A
0332 900000   F     1754             MOV     DPTR,#task_sequence?154
0335 EF             1755             MOV     A,R7
0336 F0             1756             MOVX    @DPTR,A
                    1757     ;                             break;
                    1758                             ; SOURCE LINE # 163
0337 020000   F     1759             LJMP    ?C0045
                    1760     ;                         }
                    1761                             ; SOURCE LINE # 164
033A                1762     ?C0051:
                    1763     ;                         if (os_task_run[j] == 0xFF)
                    1764                             ; SOURCE LINE # 165
033A 900000   F     1765             MOV     DPTR,#j?152
033D E0             1766             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    28

033E FF             1767             MOV     R7,A
033F EF             1768             MOV     A,R7
0340 33             1769             RLC     A
0341 95E0           1770             SUBB    A,ACC
0343 FE             1771             MOV     R6,A
0344 7400     F     1772             MOV     A,#LOW (os_task_run)
0346 2F             1773             ADD     A,R7
0347 F582           1774             MOV     DPL,A
0349 7400     F     1775             MOV     A,#HIGH (os_task_run)
034B 3E             1776             ADDC    A,R6
034C F583           1777             MOV     DPH,A
034E E0             1778             MOVX    A,@DPTR
034F FF             1779             MOV     R7,A
0350 7E00           1780             MOV     R6,#00H
0352 EF             1781             MOV     A,R7
0353 64FF           1782             XRL     A,#0FFH
0355 4E             1783             ORL     A,R6
0356 7003           1784             JNZ     $ + 5H
0358 020000   F     1785             LJMP    ?C0045
                    1786     ;                          break;
                    1787                             ; SOURCE LINE # 166
                    1788     ;                     }
                    1789                             ; SOURCE LINE # 167
035B 900000   F     1790             MOV     DPTR,#j?152
035E E0             1791             MOVX    A,@DPTR
035F 04             1792             INC     A
0360 F0             1793             MOVX    @DPTR,A
0361 8093           1794             SJMP    ?C0048
                    1795     ;                 } else if (os_tcb[i].OSTCBPrio == os_tcb[highest_prio_id].OSTCBPrio) {
                    1796                             ; SOURCE LINE # 168
0363 020000   F     1797             LJMP    ?C0045
0366                1798     ?C0047:
0366 900000   F     1799             MOV     DPTR,#i?151
0369 E0             1800             MOVX    A,@DPTR
036A FF             1801             MOV     R7,A
036B EF             1802             MOV     A,R7
036C 33             1803             RLC     A
036D 95E0           1804             SUBB    A,ACC
036F FE             1805             MOV     R6,A
0370 900000   F     1806             MOV     DPTR,#os_tcb+05H
0373 75F00E         1807             MOV     B,#0EH
0376 EF             1808             MOV     A,R7
0377 120000   F     1809             LCALL   ?C?OFFXADD
037A EE             1810             MOV     A,R6
037B 75F00E         1811             MOV     B,#0EH
037E A4             1812             MUL     AB
037F 2583           1813             ADD     A,DPH
0381 F583           1814             MOV     DPH,A
0383 E0             1815             MOVX    A,@DPTR
0384 FF             1816             MOV     R7,A
0385 900000   F     1817             MOV     DPTR,#highest_prio_id?153
0388 E0             1818             MOVX    A,@DPTR
0389 FE             1819             MOV     R6,A
038A EE             1820             MOV     A,R6
038B 75F00E         1821             MOV     B,#0EH
038E A4             1822             MUL     AB
038F 2400     F     1823             ADD     A,#LOW (os_tcb+05H)
0391 F582           1824             MOV     DPL,A
0393 E4             1825             CLR     A
0394 3400     F     1826             ADDC    A,#HIGH (os_tcb+05H)
0396 F583           1827             MOV     DPH,A
0398 E0             1828             MOVX    A,@DPTR
0399 FE             1829             MOV     R6,A
039A EF             1830             MOV     A,R7
039B 6E             1831             XRL     A,R6
039C 6003           1832             JZ      $ + 5H
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    29

039E 020000   F     1833             LJMP    ?C0045
                    1834     ;                     //≤È’“–¬’“µΩµƒ∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
                    1835     ;                     u8 temp_task_sequence = 0xFF;//Õ¨”≈œ»º∂ π”√µƒ¡Ÿ ±»ŒŒÒ–Ú¡–
                    1836                             ; SOURCE LINE # 170
03A1 900000   F     1837             MOV     DPTR,#temp_task_sequence?148
03A4 74FF           1838             MOV     A,#0FFH
03A6 F0             1839             MOVX    @DPTR,A
                    1840     ;                     for (j=0; j<TASK_SIZE; j++) { //≤È’“–¬µƒÕ¨º∂»ŒŒÒ‘⁄»ŒŒÒ∂”¡–÷–µƒ≈≈Œª
                    1841                             ; SOURCE LINE # 171
03A7 900000   F     1842             MOV     DPTR,#j?152
03AA E4             1843             CLR     A
03AB F0             1844             MOVX    @DPTR,A
03AC                1845     ?C0055:
03AC 900000   F     1846             MOV     DPTR,#j?152
03AF E0             1847             MOVX    A,@DPTR
03B0 FF             1848             MOV     R7,A
03B1 EF             1849             MOV     A,R7
03B2 33             1850             RLC     A
03B3 95E0           1851             SUBB    A,ACC
03B5 FE             1852             MOV     R6,A
03B6 C3             1853             CLR     C
03B7 EF             1854             MOV     A,R7
03B8 9408           1855             SUBB    A,#08H
03BA EE             1856             MOV     A,R6
03BB 6480           1857             XRL     A,#080H
03BD 9480           1858             SUBB    A,#080H
03BF 5051           1859             JNC     ?C0056
                    1860     ;                         if (os_task_run[j] == i) {
                    1861                             ; SOURCE LINE # 172
03C1 900000   F     1862             MOV     DPTR,#j?152
03C4 E0             1863             MOVX    A,@DPTR
03C5 FF             1864             MOV     R7,A
03C6 EF             1865             MOV     A,R7
03C7 33             1866             RLC     A
03C8 95E0           1867             SUBB    A,ACC
03CA FE             1868             MOV     R6,A
03CB 7400     F     1869             MOV     A,#LOW (os_task_run)
03CD 2F             1870             ADD     A,R7
03CE F582           1871             MOV     DPL,A
03D0 7400     F     1872             MOV     A,#HIGH (os_task_run)
03D2 3E             1873             ADDC    A,R6
03D3 F583           1874             MOV     DPH,A
03D5 E0             1875             MOVX    A,@DPTR
03D6 FF             1876             MOV     R7,A
03D7 900000   F     1877             MOV     DPTR,#i?151
03DA E0             1878             MOVX    A,@DPTR
03DB FE             1879             MOV     R6,A
03DC EE             1880             MOV     A,R6
03DD B5070C         1881             CJNE    A,AR7,?C0058
                    1882     ;                             temp_task_sequence = j;
                    1883                             ; SOURCE LINE # 173
03E0 900000   F     1884             MOV     DPTR,#j?152
03E3 E0             1885             MOVX    A,@DPTR
03E4 FF             1886             MOV     R7,A
03E5 900000   F     1887             MOV     DPTR,#temp_task_sequence?148
03E8 EF             1888             MOV     A,R7
03E9 F0             1889             MOVX    @DPTR,A
                    1890     ;                             break;
                    1891                             ; SOURCE LINE # 174
03EA 8026           1892             SJMP    ?C0056
                    1893     ;                         }
                    1894                             ; SOURCE LINE # 175
03EC                1895     ?C0058:
                    1896     ;                         if (os_task_run[j] == 0xFF)
                    1897                             ; SOURCE LINE # 176
03EC 900000   F     1898             MOV     DPTR,#j?152
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    30

03EF E0             1899             MOVX    A,@DPTR
03F0 FF             1900             MOV     R7,A
03F1 EF             1901             MOV     A,R7
03F2 33             1902             RLC     A
03F3 95E0           1903             SUBB    A,ACC
03F5 FE             1904             MOV     R6,A
03F6 7400     F     1905             MOV     A,#LOW (os_task_run)
03F8 2F             1906             ADD     A,R7
03F9 F582           1907             MOV     DPL,A
03FB 7400     F     1908             MOV     A,#HIGH (os_task_run)
03FD 3E             1909             ADDC    A,R6
03FE F583           1910             MOV     DPH,A
0400 E0             1911             MOVX    A,@DPTR
0401 FF             1912             MOV     R7,A
0402 7E00           1913             MOV     R6,#00H
0404 EF             1914             MOV     A,R7
0405 64FF           1915             XRL     A,#0FFH
0407 4E             1916             ORL     A,R6
0408 6008           1917             JZ      ?C0056
                    1918     ;                          break;
                    1919                             ; SOURCE LINE # 177
                    1920     ;                     }
                    1921                             ; SOURCE LINE # 178
040A 900000   F     1922             MOV     DPTR,#j?152
040D E0             1923             MOVX    A,@DPTR
040E 04             1924             INC     A
040F F0             1925             MOVX    @DPTR,A
0410 809A           1926             SJMP    ?C0055
0412                1927     ?C0056:
                    1928     ;                     if (temp_task_sequence > task_sequence) { //¥À¥¶Œ“√«√ª”–øº¬«¡Ω∏ˆœ‡Õ¨”
                             ≈œ»º∂∂º√ª‘⁄“—‘À––»ŒŒÒ∂”¡–÷–µƒ«Èøˆ£¨’‚÷÷«Èøˆœ¬‘À––µ⁄“ª∏ˆ±ª’“µΩµƒ»ŒŒÒ
                    1929                             ; SOURCE LINE # 179
0412 900000   F     1930             MOV     DPTR,#task_sequence?154
0415 E0             1931             MOVX    A,@DPTR
0416 FF             1932             MOV     R7,A
0417 900000   F     1933             MOV     DPTR,#temp_task_sequence?148
041A E0             1934             MOVX    A,@DPTR
041B FE             1935             MOV     R6,A
041C EE             1936             MOV     A,R6
041D D3             1937             SETB    C
041E 9F             1938             SUBB    A,R7
041F 4014           1939             JC      ?C0045
                    1940     ;                         highest_prio_id = i;
                    1941                             ; SOURCE LINE # 180
0421 900000   F     1942             MOV     DPTR,#i?151
0424 E0             1943             MOVX    A,@DPTR
0425 FF             1944             MOV     R7,A
0426 900000   F     1945             MOV     DPTR,#highest_prio_id?153
0429 EF             1946             MOV     A,R7
042A F0             1947             MOVX    @DPTR,A
                    1948     ;                         task_sequence = temp_task_sequence;
                    1949                             ; SOURCE LINE # 181
042B 900000   F     1950             MOV     DPTR,#temp_task_sequence?148
042E E0             1951             MOVX    A,@DPTR
042F FF             1952             MOV     R7,A
0430 900000   F     1953             MOV     DPTR,#task_sequence?154
0433 EF             1954             MOV     A,R7
0434 F0             1955             MOVX    @DPTR,A
                    1956     ;                     }
                    1957                             ; SOURCE LINE # 182
                    1958     ;                 }
                    1959                             ; SOURCE LINE # 183
                    1960     ;             }
                    1961                             ; SOURCE LINE # 184
                    1962     ;         }
                    1963                             ; SOURCE LINE # 185
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    31

0435                1964     ?C0045:
0435 900000   F     1965             MOV     DPTR,#i?151
0438 E0             1966             MOVX    A,@DPTR
0439 04             1967             INC     A
043A F0             1968             MOVX    @DPTR,A
043B 020000   F     1969             LJMP    ?C0043
043E                1970     ?C0044:
                    1971     ;         os_task_running_ID = highest_prio_id;
                    1972                             ; SOURCE LINE # 186
043E 900000   F     1973             MOV     DPTR,#highest_prio_id?153
0441 E0             1974             MOVX    A,@DPTR
0442 FF             1975             MOV     R7,A
0443 900000   F     1976             MOV     DPTR,#os_task_running_ID
0446 EF             1977             MOV     A,R7
0447 F0             1978             MOVX    @DPTR,A
                    1979     ;         //∞—µ±«∞»ŒŒÒ≤Â»Î“—‘À––»ŒŒÒ∂”¡–÷–
                    1980     ;         {
                    1981                             ; SOURCE LINE # 188
                    1982     ;             u8 temp_id = os_task_running_ID, temp_temp_id;
                    1983                             ; SOURCE LINE # 189
0448 900000   F     1984             MOV     DPTR,#os_task_running_ID
044B E0             1985             MOVX    A,@DPTR
044C FF             1986             MOV     R7,A
044D 900000   F     1987             MOV     DPTR,#temp_id?149
0450 EF             1988             MOV     A,R7
0451 F0             1989             MOVX    @DPTR,A
                    1990     ;             if (task_sequence == 0xFF) { //≤ª‘⁄»ŒŒÒ∂”¡–÷–£¨÷±Ω”Õ∑≤Â
                    1991                             ; SOURCE LINE # 190
0452 900000   F     1992             MOV     DPTR,#task_sequence?154
0455 E0             1993             MOVX    A,@DPTR
0456 FF             1994             MOV     R7,A
0457 7E00           1995             MOV     R6,#00H
0459 EF             1996             MOV     A,R7
045A 64FF           1997             XRL     A,#0FFH
045C 4E             1998             ORL     A,R6
045D 6003           1999             JZ      $ + 5H
045F 020000   F     2000             LJMP    ?C0061
                    2001     ;                 for (j=0; j<TASK_SIZE; j++) {
                    2002                             ; SOURCE LINE # 191
0462 900000   F     2003             MOV     DPTR,#j?152
0465 E4             2004             CLR     A
0466 F0             2005             MOVX    @DPTR,A
0467                2006     ?C0062:
0467 900000   F     2007             MOV     DPTR,#j?152
046A E0             2008             MOVX    A,@DPTR
046B FF             2009             MOV     R7,A
046C EF             2010             MOV     A,R7
046D 33             2011             RLC     A
046E 95E0           2012             SUBB    A,ACC
0470 FE             2013             MOV     R6,A
0471 C3             2014             CLR     C
0472 EF             2015             MOV     A,R7
0473 9408           2016             SUBB    A,#08H
0475 EE             2017             MOV     A,R6
0476 6480           2018             XRL     A,#080H
0478 9480           2019             SUBB    A,#080H
047A 4003           2020             JC      $ + 5H
047C 020000   F     2021             LJMP    ?C0066
                    2022     ;                     if (os_task_run[j] == 0xFF) {
                    2023                             ; SOURCE LINE # 192
047F 900000   F     2024             MOV     DPTR,#j?152
0482 E0             2025             MOVX    A,@DPTR
0483 FF             2026             MOV     R7,A
0484 EF             2027             MOV     A,R7
0485 33             2028             RLC     A
0486 95E0           2029             SUBB    A,ACC
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    32

0488 FE             2030             MOV     R6,A
0489 7400     F     2031             MOV     A,#LOW (os_task_run)
048B 2F             2032             ADD     A,R7
048C F582           2033             MOV     DPL,A
048E 7400     F     2034             MOV     A,#HIGH (os_task_run)
0490 3E             2035             ADDC    A,R6
0491 F583           2036             MOV     DPH,A
0493 E0             2037             MOVX    A,@DPTR
0494 FF             2038             MOV     R7,A
0495 7E00           2039             MOV     R6,#00H
0497 EF             2040             MOV     A,R7
0498 64FF           2041             XRL     A,#0FFH
049A 4E             2042             ORL     A,R6
049B 701F           2043             JNZ     ?C0065
                    2044     ;                         os_task_run[j] = temp_id;
                    2045                             ; SOURCE LINE # 193
049D 900000   F     2046             MOV     DPTR,#temp_id?149
04A0 E0             2047             MOVX    A,@DPTR
04A1 FF             2048             MOV     R7,A
04A2 900000   F     2049             MOV     DPTR,#j?152
04A5 E0             2050             MOVX    A,@DPTR
04A6 FE             2051             MOV     R6,A
04A7 EE             2052             MOV     A,R6
04A8 FD             2053             MOV     R5,A
04A9 33             2054             RLC     A
04AA 95E0           2055             SUBB    A,ACC
04AC FC             2056             MOV     R4,A
04AD 7400     F     2057             MOV     A,#LOW (os_task_run)
04AF 2D             2058             ADD     A,R5
04B0 F582           2059             MOV     DPL,A
04B2 7400     F     2060             MOV     A,#HIGH (os_task_run)
04B4 3C             2061             ADDC    A,R4
04B5 F583           2062             MOV     DPH,A
04B7 EF             2063             MOV     A,R7
04B8 F0             2064             MOVX    @DPTR,A
                    2065     ;                         break;
                    2066                             ; SOURCE LINE # 194
04B9 020000   F     2067             LJMP    ?C0066
                    2068     ;                     }
                    2069                             ; SOURCE LINE # 195
04BC                2070     ?C0065:
                    2071     ;                     temp_temp_id = os_task_run[j];
                    2072                             ; SOURCE LINE # 196
04BC 900000   F     2073             MOV     DPTR,#j?152
04BF E0             2074             MOVX    A,@DPTR
04C0 FF             2075             MOV     R7,A
04C1 EF             2076             MOV     A,R7
04C2 33             2077             RLC     A
04C3 95E0           2078             SUBB    A,ACC
04C5 FE             2079             MOV     R6,A
04C6 7400     F     2080             MOV     A,#LOW (os_task_run)
04C8 2F             2081             ADD     A,R7
04C9 F582           2082             MOV     DPL,A
04CB 7400     F     2083             MOV     A,#HIGH (os_task_run)
04CD 3E             2084             ADDC    A,R6
04CE F583           2085             MOV     DPH,A
04D0 E0             2086             MOVX    A,@DPTR
04D1 FF             2087             MOV     R7,A
04D2 900000   F     2088             MOV     DPTR,#temp_temp_id?150
04D5 EF             2089             MOV     A,R7
04D6 F0             2090             MOVX    @DPTR,A
                    2091     ;                     os_task_run[j] = temp_id;
                    2092                             ; SOURCE LINE # 197
04D7 900000   F     2093             MOV     DPTR,#temp_id?149
04DA E0             2094             MOVX    A,@DPTR
04DB FF             2095             MOV     R7,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    33

04DC 900000   F     2096             MOV     DPTR,#j?152
04DF E0             2097             MOVX    A,@DPTR
04E0 FE             2098             MOV     R6,A
04E1 EE             2099             MOV     A,R6
04E2 FD             2100             MOV     R5,A
04E3 33             2101             RLC     A
04E4 95E0           2102             SUBB    A,ACC
04E6 FC             2103             MOV     R4,A
04E7 7400     F     2104             MOV     A,#LOW (os_task_run)
04E9 2D             2105             ADD     A,R5
04EA F582           2106             MOV     DPL,A
04EC 7400     F     2107             MOV     A,#HIGH (os_task_run)
04EE 3C             2108             ADDC    A,R4
04EF F583           2109             MOV     DPH,A
04F1 EF             2110             MOV     A,R7
04F2 F0             2111             MOVX    @DPTR,A
                    2112     ;                     temp_id = temp_temp_id;
                    2113                             ; SOURCE LINE # 198
04F3 900000   F     2114             MOV     DPTR,#temp_temp_id?150
04F6 E0             2115             MOVX    A,@DPTR
04F7 FF             2116             MOV     R7,A
04F8 900000   F     2117             MOV     DPTR,#temp_id?149
04FB EF             2118             MOV     A,R7
04FC F0             2119             MOVX    @DPTR,A
                    2120     ;                 }
                    2121                             ; SOURCE LINE # 199
04FD 900000   F     2122             MOV     DPTR,#j?152
0500 E0             2123             MOVX    A,@DPTR
0501 04             2124             INC     A
0502 F0             2125             MOVX    @DPTR,A
0503 020000   F     2126             LJMP    ?C0062
                    2127     ;             } else { //“—‘⁄»ŒŒÒ∂”¡–÷–£¨‘⁄À˘‘⁄Œª÷√«∞“∆
                    2128                             ; SOURCE LINE # 200
0506 805E           2129             SJMP    ?C0066
0508                2130     ?C0061:
                    2131     ;                 for (j = task_sequence; j>0; j--) {
                    2132                             ; SOURCE LINE # 201
0508 900000   F     2133             MOV     DPTR,#task_sequence?154
050B E0             2134             MOVX    A,@DPTR
050C FF             2135             MOV     R7,A
050D 900000   F     2136             MOV     DPTR,#j?152
0510 EF             2137             MOV     A,R7
0511 F0             2138             MOVX    @DPTR,A
0512                2139     ?C0067:
0512 900000   F     2140             MOV     DPTR,#j?152
0515 E0             2141             MOVX    A,@DPTR
0516 FF             2142             MOV     R7,A
0517 EF             2143             MOV     A,R7
0518 33             2144             RLC     A
0519 95E0           2145             SUBB    A,ACC
051B FE             2146             MOV     R6,A
051C D3             2147             SETB    C
051D EF             2148             MOV     A,R7
051E 9400           2149             SUBB    A,#00H
0520 EE             2150             MOV     A,R6
0521 6480           2151             XRL     A,#080H
0523 9480           2152             SUBB    A,#080H
0525 4035           2153             JC      ?C0068
                    2154     ;                     os_task_run[j] = os_task_run[j-1];
                    2155                             ; SOURCE LINE # 202
0527 900000   F     2156             MOV     DPTR,#j?152
052A E0             2157             MOVX    A,@DPTR
052B FF             2158             MOV     R7,A
052C EF             2159             MOV     A,R7
052D 33             2160             RLC     A
052E 95E0           2161             SUBB    A,ACC
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    34

0530 FE             2162             MOV     R6,A
0531 7400     F     2163             MOV     A,#LOW (os_task_run+0FFFFH)
0533 2F             2164             ADD     A,R7
0534 F582           2165             MOV     DPL,A
0536 7400     F     2166             MOV     A,#HIGH (os_task_run+0FFFFH)
0538 3E             2167             ADDC    A,R6
0539 F583           2168             MOV     DPH,A
053B E0             2169             MOVX    A,@DPTR
053C FF             2170             MOV     R7,A
053D 900000   F     2171             MOV     DPTR,#j?152
0540 E0             2172             MOVX    A,@DPTR
0541 FE             2173             MOV     R6,A
0542 EE             2174             MOV     A,R6
0543 FD             2175             MOV     R5,A
0544 33             2176             RLC     A
0545 95E0           2177             SUBB    A,ACC
0547 FC             2178             MOV     R4,A
0548 7400     F     2179             MOV     A,#LOW (os_task_run)
054A 2D             2180             ADD     A,R5
054B F582           2181             MOV     DPL,A
054D 7400     F     2182             MOV     A,#HIGH (os_task_run)
054F 3C             2183             ADDC    A,R4
0550 F583           2184             MOV     DPH,A
0552 EF             2185             MOV     A,R7
0553 F0             2186             MOVX    @DPTR,A
                    2187     ;                 }
                    2188                             ; SOURCE LINE # 203
0554 900000   F     2189             MOV     DPTR,#j?152
0557 E0             2190             MOVX    A,@DPTR
0558 14             2191             DEC     A
0559 F0             2192             MOVX    @DPTR,A
055A 80B6           2193             SJMP    ?C0067
055C                2194     ?C0068:
                    2195     ;                 os_task_run[0] = os_task_running_ID;
                    2196                             ; SOURCE LINE # 204
055C 900000   F     2197             MOV     DPTR,#os_task_running_ID
055F E0             2198             MOVX    A,@DPTR
0560 FF             2199             MOV     R7,A
0561 900000   F     2200             MOV     DPTR,#os_task_run
0564 EF             2201             MOV     A,R7
0565 F0             2202             MOVX    @DPTR,A
                    2203     ;             }
                    2204                             ; SOURCE LINE # 205
0566                2205     ?C0066:
                    2206     ;         }
                    2207                             ; SOURCE LINE # 206
                    2208     ;         if (os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr == 0) //∏¯µ±«∞‘À––µƒ ±º‰∆¨∏≥÷µ
                    2209                             ; SOURCE LINE # 207
0566 900000   F     2210             MOV     DPTR,#os_task_running_ID
0569 E0             2211             MOVX    A,@DPTR
056A FF             2212             MOV     R7,A
056B EF             2213             MOV     A,R7
056C 75F00E         2214             MOV     B,#0EH
056F A4             2215             MUL     AB
0570 2400     F     2216             ADD     A,#LOW (os_tcb+07H)
0572 F582           2217             MOV     DPL,A
0574 E4             2218             CLR     A
0575 3400     F     2219             ADDC    A,#HIGH (os_tcb+07H)
0577 F583           2220             MOV     DPH,A
0579 E0             2221             MOVX    A,@DPTR
057A FF             2222             MOV     R7,A
057B 7E00           2223             MOV     R6,#00H
057D EF             2224             MOV     A,R7
057E 4E             2225             ORL     A,R6
057F 702A           2226             JNZ     ?C0070
                    2227     ;             os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr = os_tcb[os_task_running_ID].OS
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    35

                             TCBTimeQuanta;
                    2228                             ; SOURCE LINE # 208
0581 900000   F     2229             MOV     DPTR,#os_task_running_ID
0584 E0             2230             MOVX    A,@DPTR
0585 FF             2231             MOV     R7,A
0586 EF             2232             MOV     A,R7
0587 75F00E         2233             MOV     B,#0EH
058A A4             2234             MUL     AB
058B 2400     F     2235             ADD     A,#LOW (os_tcb+06H)
058D F582           2236             MOV     DPL,A
058F E4             2237             CLR     A
0590 3400     F     2238             ADDC    A,#HIGH (os_tcb+06H)
0592 F583           2239             MOV     DPH,A
0594 E0             2240             MOVX    A,@DPTR
0595 FF             2241             MOV     R7,A
0596 900000   F     2242             MOV     DPTR,#os_task_running_ID
0599 E0             2243             MOVX    A,@DPTR
059A FE             2244             MOV     R6,A
059B EE             2245             MOV     A,R6
059C 75F00E         2246             MOV     B,#0EH
059F A4             2247             MUL     AB
05A0 2400     F     2248             ADD     A,#LOW (os_tcb+07H)
05A2 F582           2249             MOV     DPL,A
05A4 E4             2250             CLR     A
05A5 3400     F     2251             ADDC    A,#HIGH (os_tcb+07H)
05A7 F583           2252             MOV     DPH,A
05A9 EF             2253             MOV     A,R7
05AA F0             2254             MOVX    @DPTR,A
05AB                2255     ?C0070:
                    2256     ;         os_tcb[os_task_running_ID].OSTCBStatus = OS_STAT_RUNNING;
                    2257                             ; SOURCE LINE # 209
05AB 900000   F     2258             MOV     DPTR,#os_task_running_ID
05AE E0             2259             MOVX    A,@DPTR
05AF FF             2260             MOV     R7,A
05B0 EF             2261             MOV     A,R7
05B1 75F00E         2262             MOV     B,#0EH
05B4 A4             2263             MUL     AB
05B5 2400     F     2264             ADD     A,#LOW (os_tcb+03H)
05B7 F582           2265             MOV     DPL,A
05B9 E4             2266             CLR     A
05BA 3400     F     2267             ADDC    A,#HIGH (os_tcb+03H)
05BC F583           2268             MOV     DPH,A
05BE E4             2269             CLR     A
05BF F0             2270             MOVX    @DPTR,A
05C0 A3             2271             INC     DPTR
05C1 7401           2272             MOV     A,#01H
05C3 F0             2273             MOVX    @DPTR,A
                    2274     ;         SP = os_tcb[os_task_running_ID].OSTCBStkPtr;
                    2275                             ; SOURCE LINE # 210
05C4 900000   F     2276             MOV     DPTR,#os_task_running_ID
05C7 E0             2277             MOVX    A,@DPTR
05C8 FF             2278             MOV     R7,A
05C9 EF             2279             MOV     A,R7
05CA 75F00E         2280             MOV     B,#0EH
05CD A4             2281             MUL     AB
05CE 2400     F     2282             ADD     A,#LOW (os_tcb)
05D0 F582           2283             MOV     DPL,A
05D2 E4             2284             CLR     A
05D3 3400     F     2285             ADDC    A,#HIGH (os_tcb)
05D5 F583           2286             MOV     DPH,A
05D7 E0             2287             MOVX    A,@DPTR
05D8 FF             2288             MOV     R7,A
05D9 8F81           2289             MOV     SP,R7
                    2290     ;     }
                    2291                             ; SOURCE LINE # 211
                    2292     ; }
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    36

                    2293                             ; SOURCE LINE # 212
05DB                2294     ?C0071:
05DB D007           2295             POP     AR7
05DD D006           2296             POP     AR6
05DF D005           2297             POP     AR5
05E1 D004           2298             POP     AR4
05E3 D003           2299             POP     AR3
05E5 D002           2300             POP     AR2
05E7 D001           2301             POP     AR1
05E9 D000           2302             POP     AR0
05EB D0D0           2303             POP     PSW
05ED D082           2304             POP     DPL
05EF D083           2305             POP     DPH
05F1 D0F0           2306             POP     B
05F3 D0E0           2307             POP     ACC
05F5 32             2308             RETI    
                    2309     ; END OF timer0_int
                    2310     
                    2311             END
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    37

SYMBOL TABLE LISTING
------ ----- -------


N A M E                   T Y P E  V A L U E   ATTRIBUTES

?C0001 . . . . . . . . .  C ADDR   0049H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0002 . . . . . . . . .  C ADDR   0225H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0003 . . . . . . . . .  C ADDR   021CH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0005 . . . . . . . . .  C ADDR   014DH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0006 . . . . . . . . .  C ADDR   00DDH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0009 . . . . . . . . .  C ADDR   0121H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0013 . . . . . . . . .  C ADDR   0193H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0014 . . . . . . . . .  C ADDR   01F9H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0016 . . . . . . . . .  C ADDR   01D3H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0019 . . . . . . . . .  C ADDR   02EFH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0020 . . . . . . . . .  C ADDR   024EH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0023 . . . . . . . . .  C ADDR   02A3H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0024 . . . . . . . . .  C ADDR   034DH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0025 . . . . . . . . .  C ADDR   02F9H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0026 . . . . . . . . .  C ADDR   0343H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0028 . . . . . . . . .  C ADDR   0392H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0030 . . . . . . . . .  C ADDR   012EH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0031 . . . . . . . . .  C ADDR   0052H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0032 . . . . . . . . .  C ADDR   0127H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0034 . . . . . . . . .  C ADDR   0144H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0035 . . . . . . . . .  C ADDR   0149H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0036 . . . . . . . . .  C ADDR   01D6H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0037 . . . . . . . . .  C ADDR   01CDH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0040 . . . . . . . . .  C ADDR   01F9H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0041 . . . . . . . . .  C ADDR   020FH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0043 . . . . . . . . .  C ADDR   0262H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0044 . . . . . . . . .  C ADDR   043EH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0045 . . . . . . . . .  C ADDR   0435H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0047 . . . . . . . . .  C ADDR   0366H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0048 . . . . . . . . .  C ADDR   02F6H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0051 . . . . . . . . .  C ADDR   033AH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0055 . . . . . . . . .  C ADDR   03ACH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0056 . . . . . . . . .  C ADDR   0412H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0058 . . . . . . . . .  C ADDR   03ECH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0061 . . . . . . . . .  C ADDR   0508H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0062 . . . . . . . . .  C ADDR   0467H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0065 . . . . . . . . .  C ADDR   04BCH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0066 . . . . . . . . .  C ADDR   0566H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0067 . . . . . . . . .  C ADDR   0512H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0068 . . . . . . . . .  C ADDR   055CH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0070 . . . . . . . . .  C ADDR   05ABH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0071 . . . . . . . . .  C ADDR   05DBH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C?IILDX . . . . . . . .  C ADDR   -----       EXT
?C?OFFXADD . . . . . . .  C ADDR   -----       EXT
?C_INITSEG . . . . . . .  C SEG    0004H       REL=UNIT
?OS_TASK_SW?BYTE . . . .  X ADDR   0000H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
?PR?OS_TASK_SW?RT_OS_ASM  C SEG    03DFH       REL=UNIT
?PR?TIMER0_INT?RT_OS_ASM  C SEG    05F6H       REL=UNIT
?TIMER0_INT?BYTE . . . .  X ADDR   0000H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
?XD?OS_TASK_SW?RT_OS_ASM  X SEG    0006H       REL=UNIT
?XD?RT_OS_ASM. . . . . .  X SEG    0001H       REL=UNIT
?XD?TIMER0_INT?RT_OS_ASM  X SEG    0008H       REL=UNIT
AC . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . . . . .  D ADDR   00E0H   A   
ACC0 . . . . . . . . . .  B ADDR   00E0H.0 A   
ACC1 . . . . . . . . . .  B ADDR   00E0H.1 A   
ACC2 . . . . . . . . . .  B ADDR   00E0H.2 A   
ACC3 . . . . . . . . . .  B ADDR   00E0H.3 A   
ACC4 . . . . . . . . . .  B ADDR   00E0H.4 A   
ACC5 . . . . . . . . . .  B ADDR   00E0H.5 A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    38

ACC6 . . . . . . . . . .  B ADDR   00E0H.6 A   
ACC7 . . . . . . . . . .  B ADDR   00E0H.7 A   
ADC_CONTR. . . . . . . .  D ADDR   00BCH   A   
ADC_RES. . . . . . . . .  D ADDR   00BDH   A   
ADC_RESL . . . . . . . .  D ADDR   00BEH   A   
AR0. . . . . . . . . . .  D ADDR   0000H   A   
AR1. . . . . . . . . . .  D ADDR   0001H   A   
AR2. . . . . . . . . . .  D ADDR   0002H   A   
AR3. . . . . . . . . . .  D ADDR   0003H   A   
AR4. . . . . . . . . . .  D ADDR   0004H   A   
AR5. . . . . . . . . . .  D ADDR   0005H   A   
AR6. . . . . . . . . . .  D ADDR   0006H   A   
AR7. . . . . . . . . . .  D ADDR   0007H   A   
AUXR . . . . . . . . . .  D ADDR   008EH   A   
AUXR1. . . . . . . . . .  D ADDR   00A2H   A   
AUXR2. . . . . . . . . .  D ADDR   008FH   A   
B. . . . . . . . . . . .  D ADDR   00F0H   A   
B0 . . . . . . . . . . .  B ADDR   00F0H.0 A   
B1 . . . . . . . . . . .  B ADDR   00F0H.1 A   
B2 . . . . . . . . . . .  B ADDR   00F0H.2 A   
B3 . . . . . . . . . . .  B ADDR   00F0H.3 A   
B4 . . . . . . . . . . .  B ADDR   00F0H.4 A   
B5 . . . . . . . . . . .  B ADDR   00F0H.5 A   
B6 . . . . . . . . . . .  B ADDR   00F0H.6 A   
B7 . . . . . . . . . . .  B ADDR   00F0H.7 A   
BUS_SPEED. . . . . . . .  D ADDR   00A1H   A   
CCAP0H . . . . . . . . .  D ADDR   00FAH   A   
CCAP0L . . . . . . . . .  D ADDR   00EAH   A   
CCAP1H . . . . . . . . .  D ADDR   00FBH   A   
CCAP1L . . . . . . . . .  D ADDR   00EBH   A   
CCAP2H . . . . . . . . .  D ADDR   00FCH   A   
CCAP2L . . . . . . . . .  D ADDR   00ECH   A   
CCAPM0 . . . . . . . . .  D ADDR   00DAH   A   
CCAPM1 . . . . . . . . .  D ADDR   00DBH   A   
CCAPM2 . . . . . . . . .  D ADDR   00DCH   A   
CCF0 . . . . . . . . . .  B ADDR   00D8H.0 A   
CCF1 . . . . . . . . . .  B ADDR   00D8H.1 A   
CCF2 . . . . . . . . . .  B ADDR   00D8H.2 A   
CCON . . . . . . . . . .  D ADDR   00D8H   A   
CCP0 . . . . . . . . . .  B ADDR   0090H.1 A   
CCP1 . . . . . . . . . .  B ADDR   0090H.0 A   
CCP2 . . . . . . . . . .  B ADDR   00B0H.7 A   
CF . . . . . . . . . . .  B ADDR   00D8H.7 A   
CH . . . . . . . . . . .  D ADDR   00F9H   A   
CL . . . . . . . . . . .  D ADDR   00E9H   A   
CLKOUT0. . . . . . . . .  B ADDR   00B0H.5 A   
CLKOUT1. . . . . . . . .  B ADDR   00B0H.4 A   
CLK_DIV. . . . . . . . .  D ADDR   0097H   A   
CMOD . . . . . . . . . .  D ADDR   00D9H   A   
CR . . . . . . . . . . .  B ADDR   00D8H.6 A   
CY . . . . . . . . . . .  B ADDR   00D0H.7 A   
DPH. . . . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . . . . .  B ADDR   00A8H.7 A   
EADC . . . . . . . . . .  B ADDR   00A8H.5 A   
ELVD . . . . . . . . . .  B ADDR   00A8H.6 A   
ES . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0. . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . . . . .  B ADDR   00A8H.3 A   
EX0. . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . . . . .  B ADDR   00A8H.2 A   
F0 . . . . . . . . . . .  B ADDR   00D0H.5 A   
F1 . . . . . . . . . . .  B ADDR   00D0H.1 A   
HIGHEST_PRIO_ID?045. . .  X ADDR   0002H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
HIGHEST_PRIO_ID?153. . .  X ADDR   0004H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
I?043. . . . . . . . . .  X ADDR   0000H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    39

I?147. . . . . . . . . .  X ADDR   0002H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
I?151. . . . . . . . . .  X ADDR   0002H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
I?155. . . . . . . . . .  X ADDR   0000H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
IAP_ADDRH. . . . . . . .  D ADDR   00C3H   A   
IAP_ADDRL. . . . . . . .  D ADDR   00C4H   A   
IAP_CMD. . . . . . . . .  D ADDR   00C5H   A   
IAP_CONTR. . . . . . . .  D ADDR   00C7H   A   
IAP_DATA . . . . . . . .  D ADDR   00C2H   A   
IAP_TRIG . . . . . . . .  D ADDR   00C6H   A   
IE . . . . . . . . . . .  D ADDR   00A8H   A   
IE0. . . . . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . . . . .  B ADDR   0088H.3 A   
IE2. . . . . . . . . . .  D ADDR   00AFH   A   
INT0 . . . . . . . . . .  B ADDR   00B0H.2 A   
INT1 . . . . . . . . . .  B ADDR   00B0H.3 A   
INT_CLKO . . . . . . . .  D ADDR   008FH   A   
INT_COUNT. . . . . . . .  X ADDR   0000H   R   SEG=?XD?RT_OS_ASM
IP . . . . . . . . . . .  D ADDR   00B8H   A   
IP2. . . . . . . . . . .  D ADDR   00B5H   A   
IPH. . . . . . . . . . .  D ADDR   00B7H   A   
IPH2 . . . . . . . . . .  D ADDR   00B6H   A   
ISP_ADDRH. . . . . . . .  D ADDR   00C3H   A   
ISP_ADDRL. . . . . . . .  D ADDR   00C4H   A   
ISP_CMD. . . . . . . . .  D ADDR   00C5H   A   
ISP_CONTR. . . . . . . .  D ADDR   00C7H   A   
ISP_DATA . . . . . . . .  D ADDR   00C2H   A   
ISP_TRIG . . . . . . . .  D ADDR   00C6H   A   
IT0. . . . . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . . . . .  B ADDR   0088H.2 A   
J?044. . . . . . . . . .  X ADDR   0001H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
J?152. . . . . . . . . .  X ADDR   0003H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
NEED_SCHEDULE?156. . . .  X ADDR   0001H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
OS_TASK_RUN. . . . . . .  X ADDR   -----       EXT
OS_TASK_RUNNING_ID . . .  X ADDR   -----       EXT
OS_TASK_SW . . . . . . .  C ADDR   0000H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
OS_TCB . . . . . . . . .  X ADDR   -----       EXT
OV . . . . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . . . . .  D ADDR   0080H   A   
P00. . . . . . . . . . .  B ADDR   0080H.0 A   
P01. . . . . . . . . . .  B ADDR   0080H.1 A   
P02. . . . . . . . . . .  B ADDR   0080H.2 A   
P03. . . . . . . . . . .  B ADDR   0080H.3 A   
P04. . . . . . . . . . .  B ADDR   0080H.4 A   
P05. . . . . . . . . . .  B ADDR   0080H.5 A   
P06. . . . . . . . . . .  B ADDR   0080H.6 A   
P07. . . . . . . . . . .  B ADDR   0080H.7 A   
P0M0 . . . . . . . . . .  D ADDR   0094H   A   
P0M1 . . . . . . . . . .  D ADDR   0093H   A   
P1 . . . . . . . . . . .  D ADDR   0090H   A   
P10. . . . . . . . . . .  B ADDR   0090H.0 A   
P11. . . . . . . . . . .  B ADDR   0090H.1 A   
P12. . . . . . . . . . .  B ADDR   0090H.2 A   
P13. . . . . . . . . . .  B ADDR   0090H.3 A   
P14. . . . . . . . . . .  B ADDR   0090H.4 A   
P15. . . . . . . . . . .  B ADDR   0090H.5 A   
P16. . . . . . . . . . .  B ADDR   0090H.6 A   
P17. . . . . . . . . . .  B ADDR   0090H.7 A   
P1ASF. . . . . . . . . .  D ADDR   009DH   A   
P1M0 . . . . . . . . . .  D ADDR   0092H   A   
P1M1 . . . . . . . . . .  D ADDR   0091H   A   
P2 . . . . . . . . . . .  D ADDR   00A0H   A   
P20. . . . . . . . . . .  B ADDR   00A0H.0 A   
P21. . . . . . . . . . .  B ADDR   00A0H.1 A   
P22. . . . . . . . . . .  B ADDR   00A0H.2 A   
P23. . . . . . . . . . .  B ADDR   00A0H.3 A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    40

P24. . . . . . . . . . .  B ADDR   00A0H.4 A   
P25. . . . . . . . . . .  B ADDR   00A0H.5 A   
P26. . . . . . . . . . .  B ADDR   00A0H.6 A   
P27. . . . . . . . . . .  B ADDR   00A0H.7 A   
P2M0 . . . . . . . . . .  D ADDR   0096H   A   
P2M1 . . . . . . . . . .  D ADDR   0095H   A   
P3 . . . . . . . . . . .  D ADDR   00B0H   A   
P30. . . . . . . . . . .  B ADDR   00B0H.0 A   
P31. . . . . . . . . . .  B ADDR   00B0H.1 A   
P32. . . . . . . . . . .  B ADDR   00B0H.2 A   
P33. . . . . . . . . . .  B ADDR   00B0H.3 A   
P34. . . . . . . . . . .  B ADDR   00B0H.4 A   
P35. . . . . . . . . . .  B ADDR   00B0H.5 A   
P36. . . . . . . . . . .  B ADDR   00B0H.6 A   
P37. . . . . . . . . . .  B ADDR   00B0H.7 A   
P3M0 . . . . . . . . . .  D ADDR   00B2H   A   
P3M1 . . . . . . . . . .  D ADDR   00B1H   A   
P4 . . . . . . . . . . .  D ADDR   00C0H   A   
P40. . . . . . . . . . .  B ADDR   00C0H.0 A   
P41. . . . . . . . . . .  B ADDR   00C0H.1 A   
P42. . . . . . . . . . .  B ADDR   00C0H.2 A   
P43. . . . . . . . . . .  B ADDR   00C0H.3 A   
P44. . . . . . . . . . .  B ADDR   00C0H.4 A   
P45. . . . . . . . . . .  B ADDR   00C0H.5 A   
P46. . . . . . . . . . .  B ADDR   00C0H.6 A   
P47. . . . . . . . . . .  B ADDR   00C0H.7 A   
P4M0 . . . . . . . . . .  D ADDR   00B4H   A   
P4M1 . . . . . . . . . .  D ADDR   00B3H   A   
P5 . . . . . . . . . . .  D ADDR   00C8H   A   
P50. . . . . . . . . . .  B ADDR   00C8H.0 A   
P51. . . . . . . . . . .  B ADDR   00C8H.1 A   
P52. . . . . . . . . . .  B ADDR   00C8H.2 A   
P53. . . . . . . . . . .  B ADDR   00C8H.3 A   
P54. . . . . . . . . . .  B ADDR   00C8H.4 A   
P55. . . . . . . . . . .  B ADDR   00C8H.5 A   
P56. . . . . . . . . . .  B ADDR   00C8H.6 A   
P57. . . . . . . . . . .  B ADDR   00C8H.7 A   
P5M0 . . . . . . . . . .  D ADDR   00CAH   A   
P5M1 . . . . . . . . . .  D ADDR   00C9H   A   
P6 . . . . . . . . . . .  D ADDR   00E8H   A   
P6M0 . . . . . . . . . .  D ADDR   00CCH   A   
P6M1 . . . . . . . . . .  D ADDR   00CBH   A   
P7 . . . . . . . . . . .  D ADDR   00F8H   A   
P7M0 . . . . . . . . . .  D ADDR   00E2H   A   
P7M1 . . . . . . . . . .  D ADDR   00E1H   A   
PADC . . . . . . . . . .  B ADDR   00B8H.5 A   
PCA_PWM0 . . . . . . . .  D ADDR   00F2H   A   
PCA_PWM1 . . . . . . . .  D ADDR   00F3H   A   
PCA_PWM2 . . . . . . . .  D ADDR   00F4H   A   
PCON . . . . . . . . . .  D ADDR   0087H   A   
PCON2. . . . . . . . . .  D ADDR   0097H   A   
PLVD . . . . . . . . . .  B ADDR   00B8H.6 A   
PPCA . . . . . . . . . .  B ADDR   00B8H.7 A   
PS . . . . . . . . . . .  B ADDR   00B8H.4 A   
PSW. . . . . . . . . . .  D ADDR   00D0H   A   
PT0. . . . . . . . . . .  B ADDR   00B8H.1 A   
PT1. . . . . . . . . . .  B ADDR   00B8H.3 A   
PX0. . . . . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . . . . .  B ADDR   00B8H.2 A   
P_SW1. . . . . . . . . .  D ADDR   00A2H   A   
P_SW2. . . . . . . . . .  D ADDR   00BAH   A   
RB8. . . . . . . . . . .  B ADDR   0098H.2 A   
RD . . . . . . . . . . .  B ADDR   00B0H.7 A   
REN. . . . . . . . . . .  B ADDR   0098H.4 A   
RI . . . . . . . . . . .  B ADDR   0098H.0 A   
RL_T2H . . . . . . . . .  D ADDR   00D6H   A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    41

RL_T2L . . . . . . . . .  D ADDR   00D7H   A   
RL_T3H . . . . . . . . .  D ADDR   00D4H   A   
RL_T3L . . . . . . . . .  D ADDR   00D5H   A   
RL_T4H . . . . . . . . .  D ADDR   00D2H   A   
RL_T4L . . . . . . . . .  D ADDR   00D3H   A   
RL_TH0 . . . . . . . . .  D ADDR   008CH   A   
RL_TH1 . . . . . . . . .  D ADDR   008DH   A   
RL_TL0 . . . . . . . . .  D ADDR   008AH   A   
RL_TL1 . . . . . . . . .  D ADDR   008BH   A   
RS0. . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . . . . .  B ADDR   00D0H.4 A   
RT_OS_ASM. . . . . . . .  N NUMB   -----       
RXD. . . . . . . . . . .  B ADDR   00B0H.0 A   
RXD2 . . . . . . . . . .  B ADDR   0090H.0 A   
S2BUF. . . . . . . . . .  D ADDR   009BH   A   
S2CON. . . . . . . . . .  D ADDR   009AH   A   
S3BUF. . . . . . . . . .  D ADDR   00ADH   A   
S3CON. . . . . . . . . .  D ADDR   00ACH   A   
S4BUF. . . . . . . . . .  D ADDR   0085H   A   
S4CON. . . . . . . . . .  D ADDR   0084H   A   
SADDR. . . . . . . . . .  D ADDR   00A9H   A   
SADEN. . . . . . . . . .  D ADDR   00B9H   A   
SBUF . . . . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . . . . .  D ADDR   0098H   A   
SM0. . . . . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . . . . .  D ADDR   0081H   A   
SPCTL. . . . . . . . . .  D ADDR   00CEH   A   
SPDAT. . . . . . . . . .  D ADDR   00CFH   A   
SPI_MISO . . . . . . . .  B ADDR   0090H.4 A   
SPI_MISO_2 . . . . . . .  B ADDR   00A0H.2 A   
SPI_MISO_3 . . . . . . .  B ADDR   00C0H.1 A   
SPI_MOSI . . . . . . . .  B ADDR   0090H.3 A   
SPI_MOSI_2 . . . . . . .  B ADDR   00A0H.3 A   
SPI_MOSI_3 . . . . . . .  B ADDR   00C0H.0 A   
SPI_SCLK . . . . . . . .  B ADDR   0090H.5 A   
SPI_SCLK_2 . . . . . . .  B ADDR   00A0H.1 A   
SPI_SCLK_3 . . . . . . .  B ADDR   00C0H.3 A   
SPI_SS . . . . . . . . .  B ADDR   0090H.2 A   
SPI_SS_2 . . . . . . . .  B ADDR   00A0H.4 A   
SPI_SS_3 . . . . . . . .  B ADDR   00C8H.4 A   
SPSTAT . . . . . . . . .  D ADDR   00CDH   A   
SYS_STAT . . . . . . . .  X ADDR   -----       EXT
T0 . . . . . . . . . . .  B ADDR   00B0H.4 A   
T1 . . . . . . . . . . .  B ADDR   00B0H.5 A   
T2H. . . . . . . . . . .  D ADDR   00D6H   A   
T2L. . . . . . . . . . .  D ADDR   00D7H   A   
T3H. . . . . . . . . . .  D ADDR   00D4H   A   
T3L. . . . . . . . . . .  D ADDR   00D5H   A   
T4H. . . . . . . . . . .  D ADDR   00D2H   A   
T4L. . . . . . . . . . .  D ADDR   00D3H   A   
T4T3M. . . . . . . . . .  D ADDR   00D1H   A   
TASK_SEQUENCE?046. . . .  X ADDR   0003H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TASK_SEQUENCE?154. . . .  X ADDR   0005H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TB8. . . . . . . . . . .  B ADDR   0098H.3 A   
TCON . . . . . . . . . .  D ADDR   0088H   A   
TEMP_ID?041. . . . . . .  X ADDR   0004H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TEMP_ID?149. . . . . . .  X ADDR   0006H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TEMP_TASK_SEQUENCE?040 .  X ADDR   0004H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TEMP_TASK_SEQUENCE?148 .  X ADDR   0006H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TEMP_TEMP_ID?042 . . . .  X ADDR   0005H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TEMP_TEMP_ID?150 . . . .  X ADDR   0007H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TF0. . . . . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . . . . .  B ADDR   0088H.7 A   
TH0. . . . . . . . . . .  D ADDR   008CH   A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/18/2019 23:52:14 PAGE    42

TH1. . . . . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . . . . .  D ADDR   00D6H   A   
TH3. . . . . . . . . . .  D ADDR   00D4H   A   
TH4. . . . . . . . . . .  D ADDR   00D2H   A   
TI . . . . . . . . . . .  B ADDR   0098H.1 A   
TIMER0_INT . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
TL0. . . . . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . . . . .  D ADDR   00D7H   A   
TL3. . . . . . . . . . .  D ADDR   00D5H   A   
TL4. . . . . . . . . . .  D ADDR   00D3H   A   
TMOD . . . . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . . . . .  B ADDR   0088H.6 A   
TXD. . . . . . . . . . .  B ADDR   00B0H.1 A   
TXD2 . . . . . . . . . .  B ADDR   0090H.1 A   
WAKE_CLKO. . . . . . . .  D ADDR   008FH   A   
WDT_CONTR. . . . . . . .  D ADDR   00C1H   A   
WKTCH. . . . . . . . . .  D ADDR   00ABH   A   
WKTCL. . . . . . . . . .  D ADDR   00AAH   A   
WR . . . . . . . . . . .  B ADDR   00B0H.6 A   
_GET_STACK_USED. . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
