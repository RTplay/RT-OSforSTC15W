A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\rt_os_asm.OBJ
ASSEMBLER INVOKED BY: D:\Keil_v5\C51\BIN\A51.EXE .\Objects\rt_os_asm.src PR(.\Listings\rt_os_asm.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\Objects\rt_os_asm.SRC generated from: RT_OS\rt_os_asm.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        D:\Keil_v5\C51\BIN\C51.EXE RT_OS\rt_os_asm.c LARGE OPTIMIZE(9,SPEED) BROWSE INCDIR
                             (.\bsp;.\RT_OS;.\driver) DEFINE(xSYSTEM_DETECT_MODE,DEBUG_ENABLE) DEBUG OBJECTEXTEND CODE P
                             RINT(.\Listings\rt_os_asm.lst) SRC(.\Objects\rt_os_asm.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    RT_OS_ASM
                       8     
  00DA                 9     CCF2    BIT     0D8H.2
  00E7                10     ACC7    BIT     0E0H.7
  0093                11     P0M1    DATA    093H
  0092                12     P1M0    DATA    092H
  0096                13     P2M0    DATA    096H
  0091                14     P1M1    DATA    091H
  0080                15     P0      DATA    080H
  00B2                16     P3M0    DATA    0B2H
  0095                17     P2M1    DATA    095H
  0090                18     P1      DATA    090H
  00B4                19     P4M0    DATA    0B4H
  00B1                20     P3M1    DATA    0B1H
  00A0                21     P2      DATA    0A0H
  00CA                22     P5M0    DATA    0CAH
  00B3                23     P4M1    DATA    0B3H
  00B0                24     P3      DATA    0B0H
  00AB                25     WKTCH   DATA    0ABH
  00B4                26     T0      BIT     0B0H.4
  00D6                27     AC      BIT     0D0H.6
  00CC                28     P6M0    DATA    0CCH
  00C9                29     P5M1    DATA    0C9H
  00C0                30     P4      DATA    0C0H
  00B5                31     CLKOUT0 BIT     0B0H.5
  00B5                32     T1      BIT     0B0H.5
  00E2                33     P7M0    DATA    0E2H
  00CB                34     P6M1    DATA    0CBH
  00C8                35     P5      DATA    0C8H
  00C6                36     ISP_TRIG        DATA    0C6H
  00AF                37     EA      BIT     0A8H.7
  00B4                38     CLKOUT1 BIT     0B0H.4
  00A4                39     SPI_SS_2        BIT     0A0H.4
  00E8                40     P6      DATA    0E8H
  00E1                41     P7M1    DATA    0E1H
  00CC                42     SPI_SS_3        BIT     0C8H.4
  0094                43     SPI_MISO        BIT     090H.4
  0093                44     SPI_MOSI        BIT     090H.3
  0091                45     CCP0    BIT     090H.1
  00F8                46     P7      DATA    0F8H
  00AA                47     WKTCL   DATA    0AAH
  0090                48     CCP1    BIT     090H.0
  00CE                49     SPCTL   DATA    0CEH
  00DF                50     CF      BIT     0D8H.7
  00B7                51     CCP2    BIT     0B0H.7
  00F9                52     CH      DATA    0F9H
  00A2                53     P_SW1   DATA    0A2H
  00BA                54     P_SW2   DATA    0BAH
  00AD                55     EADC    BIT     0A8H.5
  00A1                56     SPI_SCLK_2      BIT     0A0H.1
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     2

  00A8                57     IE      DATA    0A8H
  00C3                58     SPI_SCLK_3      BIT     0C0H.3
  00E9                59     CL      DATA    0E9H
  00C5                60     IAP_CMD DATA    0C5H
  00FA                61     CCAP0H  DATA    0FAH
  00FB                62     CCAP1H  DATA    0FBH
  00FC                63     CCAP2H  DATA    0FCH
  00BD                64     ADC_RES DATA    0BDH
  00B6                65     IPH2    DATA    0B6H
  00DE                66     CR      BIT     0D8H.6
  00EA                67     CCAP0L  DATA    0EAH
  00B7                68     RD      BIT     0B0H.7
  00EB                69     CCAP1L  DATA    0EBH
  00DA                70     CCAPM0  DATA    0DAH
  00EC                71     CCAP2L  DATA    0ECH
  00DB                72     CCAPM1  DATA    0DBH
  00AC                73     ES      BIT     0A8H.4
  00DC                74     CCAPM2  DATA    0DCH
  00BD                75     PADC    BIT     0B8H.5
  00A2                76     SPI_MISO_2      BIT     0A0H.2
  00A3                77     SPI_MOSI_2      BIT     0A0H.3
  00B8                78     IP      DATA    0B8H
  00C1                79     SPI_MISO_3      BIT     0C0H.1
  00C0                80     SPI_MOSI_3      BIT     0C0H.0
  0098                81     RI      BIT     098H.0
  00B2                82     INT0    BIT     0B0H.2
  00D7                83     CY      BIT     0D0H.7
  0099                84     TI      BIT     098H.1
  00B3                85     INT1    BIT     0B0H.3
  0097                86     CLK_DIV DATA    097H
  00C3                87     IAP_ADDRH       DATA    0C3H
  0090                88     RXD2    BIT     090H.0
  00C5                89     ISP_CMD DATA    0C5H
  00BC                90     PS      BIT     0B8H.4
  0091                91     TXD2    BIT     090H.1
  0081                92     SP      DATA    081H
  00D9                93     CMOD    DATA    0D9H
  00D8                94     CCON    DATA    0D8H
  00C4                95     IAP_ADDRL       DATA    0C4H
  00BF                96     PPCA    BIT     0B8H.7
  00D2                97     OV      BIT     0D0H.2
  00B6                98     WR      BIT     0B0H.6
  00AE                99     ELVD    BIT     0A8H.6
  0080               100     P00     BIT     080H.0
  0090               101     P10     BIT     090H.0
  0081               102     P01     BIT     080H.1
  00BC               103     ADC_CONTR       DATA    0BCH
  0099               104     SBUF    DATA    099H
  0087               105     PCON    DATA    087H
  00A0               106     P20     BIT     0A0H.0
  0091               107     P11     BIT     090H.1
  0082               108     P02     BIT     080H.2
  00C3               109     ISP_ADDRH       DATA    0C3H
  00B0               110     P30     BIT     0B0H.0
  00A1               111     P21     BIT     0A0H.1
  0092               112     P12     BIT     090H.2
  0083               113     P03     BIT     080H.3
  00C0               114     P40     BIT     0C0H.0
  00B1               115     P31     BIT     0B0H.1
  00A2               116     P22     BIT     0A0H.2
  0093               117     P13     BIT     090H.3
  0084               118     P04     BIT     080H.4
  0098               119     SCON    DATA    098H
  008F               120     WAKE_CLKO       DATA    08FH
  00C8               121     P50     BIT     0C8H.0
  00C1               122     P41     BIT     0C0H.1
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     3

  00B2               123     P32     BIT     0B0H.2
  00A3               124     P23     BIT     0A0H.3
  0094               125     P14     BIT     090H.4
  0085               126     P05     BIT     080H.5
  0089               127     TMOD    DATA    089H
  0088               128     TCON    DATA    088H
  00C9               129     P51     BIT     0C8H.1
  00C2               130     P42     BIT     0C0H.2
  00B3               131     P33     BIT     0B0H.3
  00A4               132     P24     BIT     0A0H.4
  0095               133     P15     BIT     090H.5
  0086               134     P06     BIT     080H.6
  00C4               135     ISP_ADDRL       DATA    0C4H
  00BE               136     PLVD    BIT     0B8H.6
  00CA               137     P52     BIT     0C8H.2
  00C3               138     P43     BIT     0C0H.3
  00B4               139     P34     BIT     0B0H.4
  00A5               140     P25     BIT     0A0H.5
  0096               141     P16     BIT     090H.6
  0087               142     P07     BIT     080H.7
  00CB               143     P53     BIT     0C8H.3
  00C4               144     P44     BIT     0C0H.4
  00B5               145     P35     BIT     0B0H.5
  00A6               146     P26     BIT     0A0H.6
  0097               147     P17     BIT     090H.7
  00CC               148     P54     BIT     0C8H.4
  00C5               149     P45     BIT     0C0H.5
  00B6               150     P36     BIT     0B0H.6
  00A7               151     P27     BIT     0A0H.7
  00CD               152     P55     BIT     0C8H.5
  00C6               153     P46     BIT     0C0H.6
  00B7               154     P37     BIT     0B0H.7
  00CE               155     P56     BIT     0C8H.6
  00C7               156     P47     BIT     0C0H.7
  00CF               157     P57     BIT     0C8H.7
  0089               158     IE0     BIT     088H.1
  00A1               159     BUS_SPEED       DATA    0A1H
  008B               160     IE1     BIT     088H.3
  00AF               161     IE2     DATA    0AFH
  00F0               162     B       DATA    0F0H
  008E               163     AUXR    DATA    08EH
  00C7               164     IAP_CONTR       DATA    0C7H
  00E0               165     ACC     DATA    0E0H
  00A9               166     ET0     BIT     0A8H.1
  00AB               167     ET1     BIT     0A8H.3
  008D               168     TF0     BIT     088H.5
  008F               169     TF1     BIT     088H.7
  00B5               170     IP2     DATA    0B5H
  008C               171     RL_TH0  DATA    08CH
  009A               172     RB8     BIT     098H.2
  008D               173     RL_TH1  DATA    08DH
  008C               174     TH0     DATA    08CH
  00A8               175     EX0     BIT     0A8H.0
  0088               176     IT0     BIT     088H.0
  00D6               177     RL_T2H  DATA    0D6H
  008D               178     TH1     DATA    08DH
  00AA               179     EX1     BIT     0A8H.2
  009B               180     TB8     BIT     098H.3
  008A               181     IT1     BIT     088H.2
  00D4               182     RL_T3H  DATA    0D4H
  00D6               183     TH2     DATA    0D6H
  00D6               184     T2H     DATA    0D6H
  00D0               185     P       BIT     0D0H.0
  00D2               186     RL_T4H  DATA    0D2H
  00D4               187     TH3     DATA    0D4H
  00D4               188     T3H     DATA    0D4H
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     4

  008A               189     RL_TL0  DATA    08AH
  009F               190     SM0     BIT     098H.7
  00D2               191     TH4     DATA    0D2H
  00D2               192     T4H     DATA    0D2H
  008B               193     RL_TL1  DATA    08BH
  008A               194     TL0     DATA    08AH
  009E               195     SM1     BIT     098H.6
  00D7               196     RL_T2L  DATA    0D7H
  008B               197     TL1     DATA    08BH
  009D               198     SM2     BIT     098H.5
  00D5               199     RL_T3L  DATA    0D5H
  00D7               200     TL2     DATA    0D7H
  00D7               201     T2L     DATA    0D7H
  00D3               202     RL_T4L  DATA    0D3H
  00D5               203     TL3     DATA    0D5H
  00D5               204     T3L     DATA    0D5H
  00B9               205     PT0     BIT     0B8H.1
  00D3               206     TL4     DATA    0D3H
  00D3               207     T4L     DATA    0D3H
  00BB               208     PT1     BIT     0B8H.3
  00D3               209     RS0     BIT     0D0H.3
  00C7               210     ISP_CONTR       DATA    0C7H
  008C               211     TR0     BIT     088H.4
  00D4               212     RS1     BIT     0D0H.4
  00C2               213     IAP_DATA        DATA    0C2H
  008E               214     TR1     BIT     088H.6
  00B8               215     PX0     BIT     0B8H.0
  00C1               216     WDT_CONTR       DATA    0C1H
  00BA               217     PX1     BIT     0B8H.2
  00F2               218     PCA_PWM0        DATA    0F2H
  00F3               219     PCA_PWM1        DATA    0F3H
  00F4               220     PCA_PWM2        DATA    0F4H
  009D               221     P1ASF   DATA    09DH
  0083               222     DPH     DATA    083H
  00D1               223     T4T3M   DATA    0D1H
  00BE               224     ADC_RESL        DATA    0BEH
  0082               225     DPL     DATA    082H
  00CD               226     SPSTAT  DATA    0CDH
  00B7               227     IPH     DATA    0B7H
  009B               228     S2BUF   DATA    09BH
  0097               229     PCON2   DATA    097H
  00AD               230     S3BUF   DATA    0ADH
  009C               231     REN     BIT     098H.4
  0085               232     S4BUF   DATA    085H
  009A               233     S2CON   DATA    09AH
  00AC               234     S3CON   DATA    0ACH
  00C2               235     ISP_DATA        DATA    0C2H
  0084               236     S4CON   DATA    084H
  00B9               237     SADEN   DATA    0B9H
  00B0               238     RXD     BIT     0B0H.0
  00A9               239     SADDR   DATA    0A9H
  00B1               240     TXD     BIT     0B0H.1
  00F0               241     B0      BIT     0F0H.0
  00F1               242     B1      BIT     0F0H.1
  00C6               243     IAP_TRIG        DATA    0C6H
  00A2               244     AUXR1   DATA    0A2H
  00F2               245     B2      BIT     0F0H.2
  0092               246     SPI_SS  BIT     090H.2
  008F               247     AUXR2   DATA    08FH
  00F3               248     B3      BIT     0F0H.3
  00F4               249     B4      BIT     0F0H.4
  00D5               250     F0      BIT     0D0H.5
  00F5               251     B5      BIT     0F0H.5
  00D1               252     F1      BIT     0D0H.1
  008F               253     INT_CLKO        DATA    08FH
  00F6               254     B6      BIT     0F0H.6
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     5

  00E0               255     ACC0    BIT     0E0H.0
  00F7               256     B7      BIT     0F0H.7
  00E1               257     ACC1    BIT     0E0H.1
  00E2               258     ACC2    BIT     0E0H.2
  00E3               259     ACC3    BIT     0E0H.3
  00D0               260     PSW     DATA    0D0H
  00E4               261     ACC4    BIT     0E0H.4
  0095               262     SPI_SCLK        BIT     090H.5
  00D8               263     CCF0    BIT     0D8H.0
  00E5               264     ACC5    BIT     0E0H.5
  00D9               265     CCF1    BIT     0D8H.1
  00E6               266     ACC6    BIT     0E0H.6
  00CF               267     SPDAT   DATA    0CFH
  0094               268     P0M0    DATA    094H
                     269     ?PR?OS_TASK_SW?RT_OS_ASM                 SEGMENT CODE 
                     270     ?XD?OS_TASK_SW?RT_OS_ASM                 SEGMENT XDATA OVERLAYABLE 
                     271     ?PR?timer0_int?RT_OS_ASM                 SEGMENT CODE 
                     272     ?XD?timer0_int?RT_OS_ASM                 SEGMENT XDATA OVERLAYABLE 
                     273     ?PR?RT_OS_ASM        SEGMENT CODE 
                     274             EXTRN   XDATA (os_task_run)
                     275             EXTRN   XDATA (os_task_running_ID)
                     276             EXTRN   XDATA (os_tcb)
                     277             EXTRN   CODE (?C?IILDX)
                     278             PUBLIC  timer0_int
                     279             PUBLIC  OS_TASK_SW
                     280     
----                 281             RSEG  ?XD?timer0_int?RT_OS_ASM
0000                 282     ?timer0_int?BYTE:
0005                 283             ORG  5
0005                 284     temp_task_sequence?147:   DS   1
0005                 285             ORG  5
0005                 286         temp_id?148:   DS   1
0006                 287             ORG  6
0006                 288     temp_temp_id?149:   DS   1
0001                 289             ORG  1
0001                 290               i?150:   DS   1
0002                 291             ORG  2
0002                 292               j?151:   DS   1
0003                 293             ORG  3
0003                 294     highest_prio_id?152:   DS   1
0004                 295             ORG  4
0004                 296     task_sequence?153:   DS   1
0000                 297             ORG  0
0000                 298     need_schedule?155:   DS   1
                     299     
----                 300             RSEG  ?XD?OS_TASK_SW?RT_OS_ASM
0000                 301     ?OS_TASK_SW?BYTE:
0004                 302             ORG  4
0004                 303     temp_task_sequence?040:   DS   1
0004                 304             ORG  4
0004                 305         temp_id?041:   DS   1
0005                 306             ORG  5
0005                 307     temp_temp_id?042:   DS   1
0000                 308             ORG  0
0000                 309               i?043:   DS   1
0001                 310             ORG  1
0001                 311               j?044:   DS   1
0002                 312             ORG  2
0002                 313     highest_prio_id?045:   DS   1
0003                 314             ORG  3
0003                 315     task_sequence?046:   DS   1
                     316     ; #include "rt_os.h"
                     317     ; #include "rt_os_private.h"
                     318     ; 
                     319     ; //»ŒŒÒµ˜∂»∫Ø £¨÷ªƒ‹‘⁄∑«÷–∂œ÷– π”√
                     320     
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     6

----                 321             RSEG  ?PR?RT_OS_ASM
0000                 322     Com0047:
0000                 323     L?0072:
                     324             USING   0
0000                 325     L?0073:
0000 EF              326             MOV     A,R7
0001 33              327             RLC     A
0002 95E0            328             SUBB    A,ACC
0004 FE              329             MOV     R6,A
0005                 330     L?0074:
0005 7400     F      331             MOV     A,#LOW (os_task_run)
0007 2F              332             ADD     A,R7
0008 F582            333             MOV     DPL,A
000A 7400     F      334             MOV     A,#HIGH (os_task_run)
000C 3E              335             ADDC    A,R6
000D F583            336             MOV     DPH,A
000F 22              337             RET     
0010                 338     L?0075:
                     339             USING   0
0010 900000   F      340             MOV     DPTR,#os_task_running_ID
0013 E0              341             MOVX    A,@DPTR
0014 FF              342             MOV     R7,A
0015 75F008          343             MOV     B,#08H
0018 A4              344             MUL     AB
0019 2400     F      345             ADD     A,#LOW (os_tcb+06H)
001B F582            346             MOV     DPL,A
001D E4              347             CLR     A
001E 3400     F      348             ADDC    A,#HIGH (os_tcb+06H)
0020 F583            349             MOV     DPH,A
0022 E0              350             MOVX    A,@DPTR
0023 FE              351             MOV     R6,A
0024                 352     L?0076:
0024 EF              353             MOV     A,R7
0025                 354     L?0077:
0025 75F008          355             MOV     B,#08H
0028 A4              356             MUL     AB
0029 2400     F      357             ADD     A,#LOW (os_tcb+07H)
002B F582            358             MOV     DPL,A
002D E4              359             CLR     A
002E 3400     F      360             ADDC    A,#HIGH (os_tcb+07H)
0030 F583            361             MOV     DPH,A
0032 22              362             RET     
0033                 363     L?0078:
                     364             USING   0
0033 900000   F      365             MOV     DPTR,#os_task_running_ID
0036 E0              366             MOVX    A,@DPTR
0037 FF              367             MOV     R7,A
0038 75F008          368             MOV     B,#08H
003B A4              369             MUL     AB
003C 2400     F      370             ADD     A,#LOW (os_tcb+03H)
003E F582            371             MOV     DPL,A
0040 E4              372             CLR     A
0041 3400     F      373             ADDC    A,#HIGH (os_tcb+03H)
0043 F583            374             MOV     DPH,A
0045 E4              375             CLR     A
0046 F0              376             MOVX    @DPTR,A
0047 A3              377             INC     DPTR
0048 04              378             INC     A
0049 F0              379             MOVX    @DPTR,A
004A EF              380             MOV     A,R7
004B                 381     L?0079:
004B 75F008          382             MOV     B,#08H
004E A4              383             MUL     AB
004F 2400     F      384             ADD     A,#LOW (os_tcb)
0051 F582            385             MOV     DPL,A
0053 E4              386             CLR     A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     7

0054 3400     F      387             ADDC    A,#HIGH (os_tcb)
0056 F583            388             MOV     DPH,A
0058 22              389             RET     
0059                 390     L?0080:
                     391             USING   0
0059 900000   F      392             MOV     DPTR,#j?044
005C                 393     L?0081:
005C E0              394             MOVX    A,@DPTR
005D FF              395             MOV     R7,A
005E FD              396             MOV     R5,A
005F 33              397             RLC     A
0060 95E0            398             SUBB    A,ACC
0062 FC              399             MOV     R4,A
0063 C3              400             CLR     C
0064 ED              401             MOV     A,R5
0065 9408            402             SUBB    A,#08H
0067 EC              403             MOV     A,R4
0068 6480            404             XRL     A,#080H
006A 9480            405             SUBB    A,#080H
006C 22              406             RET     
006D                 407     L?0082:
                     408             USING   0
006D                 409     L?0083:
006D EF              410             MOV     A,R7
006E 75F008          411             MOV     B,#08H
0071 A4              412             MUL     AB
0072 2400     F      413             ADD     A,#LOW (os_tcb+01H)
0074 F582            414             MOV     DPL,A
0076 E4              415             CLR     A
0077 3400     F      416             ADDC    A,#HIGH (os_tcb+01H)
0079 F583            417             MOV     DPH,A
007B 22              418             RET     
007C                 419     L?0084:
                     420             USING   0
007C 900000   F      421             MOV     DPTR,#i?043
007F                 422     L?0085:
007F E0              423             MOVX    A,@DPTR
0080 FF              424             MOV     R7,A
0081 33              425             RLC     A
0082 95E0            426             SUBB    A,ACC
0084 FE              427             MOV     R6,A
0085 22              428             RET     
0086                 429     L?0086:
                     430             USING   0
0086 7400     F      431             MOV     A,#LOW (os_tcb+05H)
0088 2F              432             ADD     A,R7
0089                 433     L?0087:
0089 F582            434             MOV     DPL,A
008B 7400     F      435             MOV     A,#HIGH (os_tcb+05H)
008D 3E              436             ADDC    A,R6
008E F583            437             MOV     DPH,A
0090 E0              438             MOVX    A,@DPTR
0091 22              439             RET     
0092                 440     L?0088:
                     441             USING   0
0092 FF              442             MOV     R7,A
0093 E0              443             MOVX    A,@DPTR
0094 75F008          444             MOV     B,#08H
0097 A4              445             MUL     AB
0098 2400     F      446             ADD     A,#LOW (os_tcb+05H)
009A F582            447             MOV     DPL,A
009C E4              448             CLR     A
009D 3400     F      449             ADDC    A,#HIGH (os_tcb+05H)
009F F583            450             MOV     DPH,A
00A1 E0              451             MOVX    A,@DPTR
00A2 FD              452             MOV     R5,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     8

00A3 EF              453             MOV     A,R7
00A4 D3              454             SETB    C
00A5 9D              455             SUBB    A,R5
00A6 22              456             RET     
00A7                 457     L?0089:
                     458             USING   0
00A7 EF              459             MOV     A,R7
00A8 75F008          460             MOV     B,#08H
00AB A4              461             MUL     AB
00AC 2400     F      462             ADD     A,#LOW (os_tcb+03H)
00AE F582            463             MOV     DPL,A
00B0 E4              464             CLR     A
00B1 3400     F      465             ADDC    A,#HIGH (os_tcb+03H)
00B3 F583            466             MOV     DPH,A
00B5 E4              467             CLR     A
00B6 F0              468             MOVX    @DPTR,A
00B7 A3              469             INC     DPTR
00B8 7402            470             MOV     A,#02H
00BA F0              471             MOVX    @DPTR,A
00BB 22              472             RET     
00BC                 473     L?0090:
                     474             USING   0
00BC FF              475             MOV     R7,A
00BD 2400     F      476             ADD     A,#LOW (os_tcb+03H)
00BF F582            477             MOV     DPL,A
00C1 7400     F      478             MOV     A,#HIGH (os_tcb+03H)
00C3 3E              479             ADDC    A,R6
00C4 F583            480             MOV     DPH,A
00C6 E0              481             MOVX    A,@DPTR
00C7 FC              482             MOV     R4,A
00C8 A3              483             INC     DPTR
00C9 E0              484             MOVX    A,@DPTR
00CA 6402            485             XRL     A,#02H
00CC 4C              486             ORL     A,R4
00CD 22              487             RET     
00CE                 488     L?0091:
                     489             USING   0
00CE EF              490             MOV     A,R7
00CF 33              491             RLC     A
00D0 95E0            492             SUBB    A,ACC
00D2 FE              493             MOV     R6,A
00D3 7400     F      494             MOV     A,#LOW (os_task_run+0FFFFH)
00D5 2F              495             ADD     A,R7
00D6 F582            496             MOV     DPL,A
00D8 7400     F      497             MOV     A,#HIGH (os_task_run+0FFFFH)
00DA 3E              498             ADDC    A,R6
00DB F583            499             MOV     DPH,A
00DD E0              500             MOVX    A,@DPTR
00DE FD              501             MOV     R5,A
00DF 22              502             RET     
00E0                 503     L?0092:
                     504             USING   0
00E0 E0              505             MOVX    A,@DPTR
00E1 FF              506             MOV     R7,A
00E2 FB              507             MOV     R3,A
00E3 33              508             RLC     A
00E4 95E0            509             SUBB    A,ACC
00E6 FA              510             MOV     R2,A
00E7 C3              511             CLR     C
00E8 EB              512             MOV     A,R3
00E9 9408            513             SUBB    A,#08H
00EB EA              514             MOV     A,R2
00EC 6480            515             XRL     A,#080H
00EE 9480            516             SUBB    A,#080H
00F0 22              517             RET     
00F1                 518     L?0093:
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE     9

                     519             USING   0
00F1 E0              520             MOVX    A,@DPTR
00F2 FF              521             MOV     R7,A
00F3 FD              522             MOV     R5,A
00F4 33              523             RLC     A
00F5 95E0            524             SUBB    A,ACC
00F7 FC              525             MOV     R4,A
00F8 D3              526             SETB    C
00F9 ED              527             MOV     A,R5
00FA 9400            528             SUBB    A,#00H
00FC EC              529             MOV     A,R4
00FD 6480            530             XRL     A,#080H
00FF 9480            531             SUBB    A,#080H
0101 22              532             RET     
0102                 533     L?0094:
                     534             USING   0
0102 F0              535             MOVX    @DPTR,A
0103 A3              536             INC     DPTR
0104 F0              537             MOVX    @DPTR,A
0105 A3              538             INC     DPTR
0106 F0              539             MOVX    @DPTR,A
0107 A3              540             INC     DPTR
0108 F0              541             MOVX    @DPTR,A
0109 22              542             RET     
010A                 543     L?0095:
                     544             USING   0
010A 900000   F      545             MOV     DPTR,#temp_task_sequence?147
010D F0              546             MOVX    @DPTR,A
010E 900000   F      547             MOV     DPTR,#j?151
0111 22              548             RET     
0112                 549     L?0096:
                     550             USING   0
0112 C3              551             CLR     C
0113 EF              552             MOV     A,R7
0114 9408            553             SUBB    A,#08H
0116 EE              554             MOV     A,R6
0117 6480            555             XRL     A,#080H
0119 9480            556             SUBB    A,#080H
011B 22              557             RET     
011C                 558     L?0097:
                     559             USING   0
011C 900000   F      560             MOV     DPTR,#i?043
011F E0              561             MOVX    A,@DPTR
0120 900000   F      562             MOV     DPTR,#highest_prio_id?045
0123 F0              563             MOVX    @DPTR,A
0124 A3              564             INC     DPTR
0125 22              565             RET     
0126                 566     L?0098:
                     567             USING   0
0126                 568     L?0099:
0126 900000   F      569             MOV     DPTR,#j?044
0129 E0              570             MOVX    A,@DPTR
012A 04              571             INC     A
012B F0              572             MOVX    @DPTR,A
012C 22              573             RET     
012D                 574     L?0100:
                     575             USING   0
012D 900000   F      576             MOV     DPTR,#i?150
0130 E0              577             MOVX    A,@DPTR
0131 900000   F      578             MOV     DPTR,#highest_prio_id?152
0134 F0              579             MOVX    @DPTR,A
0135 A3              580             INC     DPTR
0136 22              581             RET     
                     582     ; END OF Com0047
                     583     
                     584     ; void OS_TASK_SW(void)
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    10

                     585     
----                 586             RSEG  ?PR?OS_TASK_SW?RT_OS_ASM
0000                 587     OS_TASK_SW:
                     588             USING   0
                     589                             ; SOURCE LINE # 5
                     590     ; {
                     591                             ; SOURCE LINE # 6
                     592     ;     char i = 0, j = 0;
                     593                             ; SOURCE LINE # 7
0000 E4              594             CLR     A
0001 900000   F      595             MOV     DPTR,#i?043
                     596     ;     u8 highest_prio_id = 0;
                     597                             ; SOURCE LINE # 8
                     598     ;     u8 task_sequence = 0;//µ±«∞»ŒŒÒµƒ“—‘À––∂”¡–÷–“ª∂® «0
                     599                             ; SOURCE LINE # 9
0004 120000   F      600             LCALL   L?0094
                     601     ;     OS_ENTER_CRITICAL();
                     602                             ; SOURCE LINE # 10
0007 C2AF            603             CLR     EA
                     604     ; #pragma asm
                     605     ;     PUSH     ACC
0009 C0E0            606               PUSH     ACC
                     607     ;     PUSH     B
000B C0F0            608               PUSH     B
                     609     ;     PUSH     DPH
000D C083            610               PUSH     DPH
                     611     ;     PUSH     DPL
000F C082            612               PUSH     DPL
                     613     ;     PUSH     PSW
0011 C0D0            614               PUSH     PSW
                     615     ;     MOV      PSW,#00H
0013 75D000          616               MOV      PSW,#00H
                     617     ;     PUSH     AR0
0016 C000            618               PUSH     AR0
                     619     ;     PUSH     AR1
0018 C001            620               PUSH     AR1
                     621     ;     PUSH     AR2
001A C002            622               PUSH     AR2
                     623     ;     PUSH     AR3
001C C003            624               PUSH     AR3
                     625     ;     PUSH     AR4
001E C004            626               PUSH     AR4
                     627     ;     PUSH     AR5
0020 C005            628               PUSH     AR5
                     629     ;     PUSH     AR6
0022 C006            630               PUSH     AR6
                     631     ;     PUSH     AR7
0024 C007            632               PUSH     AR7
                     633     ; #pragma endasm
                     634     ;     os_tcb[os_task_running_ID].OSTCBStkPtr = SP;
                     635                             ; SOURCE LINE # 27
0026 900000   F      636             MOV     DPTR,#os_task_running_ID
0029 E0              637             MOVX    A,@DPTR
002A 120000   F      638             LCALL   L?0079
002D E581            639             MOV     A,SP
002F F0              640             MOVX    @DPTR,A
                     641     ; //«–ªª»ŒŒÒ’ª
                     642     ;     for (; i<TASK_SIZE; i++) { //’“µΩ”≈œ»º∂◊Ó∏ﬂ»ŒŒÒ£¨≤¢«“ «‘⁄“—‘À––»ŒŒÒ∂”¡–µƒ◊Ó∫Û£¨»Áπ˚“—
                             ‘À––»ŒŒÒ∂”¡–÷–√ª”–‘Ú”≈œ»‘À––
                     643                             ; SOURCE LINE # 29
0030                 644     ?C0001:
0030 120000   F      645             LCALL   L?0084
0033 120000   F      646             LCALL   L?0096
0036 4003            647             JC      $ + 5H
0038 020000   F      648             LJMP    ?C0002
                     649     ;         if (os_tcb[i].OSTCBStatus == OS_STAT_RDY) {
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    11

                     650                             ; SOURCE LINE # 30
003B EF              651             MOV     A,R7
003C 7803            652             MOV     R0,#03H
003E                 653     ?C0067:
003E C3              654             CLR     C
003F 33              655             RLC     A
0040 CE              656             XCH     A,R6
0041 33              657             RLC     A
0042 CE              658             XCH     A,R6
0043 D8F9            659             DJNZ    R0,?C0067
0045 120000   F      660             LCALL   L?0090
0048 6003            661             JZ      $ + 5H
004A 020000   F      662             LJMP    ?C0003
                     663     ;             if (os_tcb[i].OSTCBPrio > os_tcb[highest_prio_id].OSTCBPrio) {
                     664                             ; SOURCE LINE # 31
004D 120000   F      665             LCALL   L?0086
0050 900000   F      666             MOV     DPTR,#highest_prio_id?045
0053 120000   F      667             LCALL   L?0088
0056 4031            668             JC      ?C0005
                     669     ;                 highest_prio_id = i;
                     670                             ; SOURCE LINE # 32
                     671     ;                 //≤È’“∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
                     672     ;                 task_sequence = 0xFF;//œ»ºŸ…Ë’‚∏ˆ≈≈‘⁄◊Ó◊Ó◊Ó∫Û√Ê
                     673                             ; SOURCE LINE # 34
0058 120000   F      674             LCALL   L?0097
005B 74FF            675             MOV     A,#0FFH
005D F0              676             MOVX    @DPTR,A
                     677     ;                 for (j=0; j<TASK_SIZE; j++) {
                     678                             ; SOURCE LINE # 35
005E E4              679             CLR     A
005F 900000   F      680             MOV     DPTR,#j?044
0062 F0              681             MOVX    @DPTR,A
0063                 682     ?C0006:
0063 900000   F      683             MOV     DPTR,#j?044
0066 120000   F      684             LCALL   L?0092
0069 5071            685             JNC     ?C0003
                     686     ;                     if (os_task_run[j] == i) {
                     687                             ; SOURCE LINE # 36
006B 120000   F      688             LCALL   L?0072
006E E0              689             MOVX    A,@DPTR
006F FF              690             MOV     R7,A
0070 900000   F      691             MOV     DPTR,#i?043
0073 E0              692             MOVX    A,@DPTR
0074 B50709          693             CJNE    A,AR7,?C0009
                     694     ;                         task_sequence = j;
                     695                             ; SOURCE LINE # 37
0077 A3              696             INC     DPTR
0078 E0              697             MOVX    A,@DPTR
0079 900000   F      698             MOV     DPTR,#task_sequence?046
007C F0              699             MOVX    @DPTR,A
                     700     ;                         break;
                     701                             ; SOURCE LINE # 38
007D 020000   F      702             LJMP    ?C0003
                     703     ;                     }
                     704                             ; SOURCE LINE # 39
0080                 705     ?C0009:
                     706     ;                     if (os_task_run[j] == 0xFF)
                     707                             ; SOURCE LINE # 40
0080 EF              708             MOV     A,R7
0081 F4              709             CPL     A
0082 6058            710             JZ      ?C0003
                     711     ;                          break;
                     712                             ; SOURCE LINE # 41
                     713     ;                 }
                     714                             ; SOURCE LINE # 42
0084 120000   F      715             LCALL   L?0098
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    12

0087 80DA            716             SJMP    ?C0006
                     717     ;             } else if (os_tcb[i].OSTCBPrio == os_tcb[highest_prio_id].OSTCBPrio) {
                     718                             ; SOURCE LINE # 43
0089                 719     ?C0005:
0089 120000   F      720             LCALL   L?0084
008C EF              721             MOV     A,R7
008D 7803            722             MOV     R0,#03H
008F                 723     ?C0068:
008F C3              724             CLR     C
0090 33              725             RLC     A
0091 CE              726             XCH     A,R6
0092 33              727             RLC     A
0093 CE              728             XCH     A,R6
0094 D8F9            729             DJNZ    R0,?C0068
0096 2400     F      730             ADD     A,#LOW (os_tcb+05H)
0098 120000   F      731             LCALL   L?0087
009B 6D              732             XRL     A,R5
009C 703E            733             JNZ     ?C0003
                     734     ;                 //≤È’“–¬’“µΩµƒ∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
                     735     ;                 u8 temp_task_sequence = 0xFF;//Õ¨”≈œ»º∂ π”√µƒ¡Ÿ ±»ŒŒÒ–Ú¡–
                     736                             ; SOURCE LINE # 45
009E 900000   F      737             MOV     DPTR,#temp_task_sequence?040
00A1 74FF            738             MOV     A,#0FFH
00A3 F0              739             MOVX    @DPTR,A
                     740     ;                 for (j=0; j<TASK_SIZE; j++) { //≤È’“–¬µƒÕ¨º∂»ŒŒÒ‘⁄»ŒŒÒ∂”¡–÷–µƒ≈≈Œª
                     741                             ; SOURCE LINE # 46
00A4 E4              742             CLR     A
00A5 900000   F      743             MOV     DPTR,#j?044
00A8 F0              744             MOVX    @DPTR,A
00A9                 745     ?C0013:
00A9 120000   F      746             LCALL   L?0080
00AC 501D            747             JNC     ?C0014
                     748     ;                     if (os_task_run[j] == i) {
                     749                             ; SOURCE LINE # 47
00AE 120000   F      750             LCALL   L?0072
00B1 E0              751             MOVX    A,@DPTR
00B2 FF              752             MOV     R7,A
00B3 900000   F      753             MOV     DPTR,#i?043
00B6 E0              754             MOVX    A,@DPTR
00B7 B50708          755             CJNE    A,AR7,?C0016
                     756     ;                         temp_task_sequence = j;
                     757                             ; SOURCE LINE # 48
00BA A3              758             INC     DPTR
00BB E0              759             MOVX    A,@DPTR
00BC 900000   F      760             MOV     DPTR,#temp_task_sequence?040
00BF F0              761             MOVX    @DPTR,A
                     762     ;                         break;
                     763                             ; SOURCE LINE # 49
00C0 8009            764             SJMP    ?C0014
                     765     ;                     }
                     766                             ; SOURCE LINE # 50
00C2                 767     ?C0016:
                     768     ;                     if (os_task_run[j] == 0xFF)
                     769                             ; SOURCE LINE # 51
00C2 EF              770             MOV     A,R7
00C3 F4              771             CPL     A
00C4 6005            772             JZ      ?C0014
                     773     ;                          break;
                     774                             ; SOURCE LINE # 52
                     775     ;                 }
                     776                             ; SOURCE LINE # 53
00C6 120000   F      777             LCALL   L?0098
00C9 80DE            778             SJMP    ?C0013
00CB                 779     ?C0014:
                     780     ;                 if (temp_task_sequence > task_sequence) { //¥À¥¶Œ“√«√ª”–øº¬«¡Ω∏ˆœ‡Õ¨”≈œ»º
                             ∂∂º√ª‘⁄“—‘À––»ŒŒÒ∂”¡–÷–µƒ«Èøˆ£¨’‚÷÷«Èøˆœ¬‘À––µ⁄“ª∏ˆ±ª’“µΩµƒ»ŒŒÒ
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    13

                     781                             ; SOURCE LINE # 54
00CB 900000   F      782             MOV     DPTR,#task_sequence?046
00CE E0              783             MOVX    A,@DPTR
00CF FF              784             MOV     R7,A
00D0 A3              785             INC     DPTR
00D1 E0              786             MOVX    A,@DPTR
00D2 FE              787             MOV     R6,A
00D3 D3              788             SETB    C
00D4 9F              789             SUBB    A,R7
00D5 4005            790             JC      ?C0003
                     791     ;                     highest_prio_id = i;
                     792                             ; SOURCE LINE # 55
                     793     ;                     task_sequence = temp_task_sequence;
                     794                             ; SOURCE LINE # 56
00D7 120000   F      795             LCALL   L?0097
00DA EE              796             MOV     A,R6
00DB F0              797             MOVX    @DPTR,A
                     798     ;                 }
                     799                             ; SOURCE LINE # 57
                     800     ;             }
                     801                             ; SOURCE LINE # 58
                     802     ;         }
                     803                             ; SOURCE LINE # 59
                     804     ;     }
                     805                             ; SOURCE LINE # 60
00DC                 806     ?C0003:
00DC 900000   F      807             MOV     DPTR,#i?043
00DF E0              808             MOVX    A,@DPTR
00E0 04              809             INC     A
00E1 F0              810             MOVX    @DPTR,A
00E2 020000   F      811             LJMP    ?C0001
00E5                 812     ?C0002:
                     813     ;     os_task_running_ID = highest_prio_id;
                     814                             ; SOURCE LINE # 61
00E5 900000   F      815             MOV     DPTR,#highest_prio_id?045
00E8 E0              816             MOVX    A,@DPTR
00E9 900000   F      817             MOV     DPTR,#os_task_running_ID
00EC F0              818             MOVX    @DPTR,A
                     819     ;     //∞—µ±«∞»ŒŒÒ≤Â»Î“—‘À––»ŒŒÒ∂”¡–÷–
                     820     ;     {
                     821                             ; SOURCE LINE # 63
                     822     ;         u8 temp_id = os_task_running_ID, temp_temp_id;
                     823                             ; SOURCE LINE # 64
00ED 900000   F      824             MOV     DPTR,#temp_id?041
00F0 F0              825             MOVX    @DPTR,A
                     826     ;         if (task_sequence == 0xFF) { //≤ª‘⁄»ŒŒÒ∂”¡–÷–£¨÷±Ω”Õ∑≤Â
                     827                             ; SOURCE LINE # 65
00F1 900000   F      828             MOV     DPTR,#task_sequence?046
00F4 E0              829             MOVX    A,@DPTR
00F5 F9              830             MOV     R1,A
00F6 F4              831             CPL     A
00F7 703C            832             JNZ     ?C0019
                     833     ;             for (j=0; j<TASK_SIZE; j++) {
                     834                             ; SOURCE LINE # 66
00F9 900000   F      835             MOV     DPTR,#j?044
00FC F0              836             MOVX    @DPTR,A
00FD                 837     ?C0020:
00FD 120000   F      838             LCALL   L?0080
0100 5058            839             JNC     ?C0024
                     840     ;                 if (os_task_run[j] == 0xFF) {
                     841                             ; SOURCE LINE # 67
0102 120000   F      842             LCALL   L?0073
0105 E0              843             MOVX    A,@DPTR
0106 FD              844             MOV     R5,A
0107 F4              845             CPL     A
0108 700C            846             JNZ     ?C0023
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    14

                     847     ;                     os_task_run[j] = temp_id;
                     848                             ; SOURCE LINE # 68
010A 900000   F      849             MOV     DPTR,#temp_id?041
010D E0              850             MOVX    A,@DPTR
010E FC              851             MOV     R4,A
010F 120000   F      852             LCALL   L?0074
0112 EC              853             MOV     A,R4
0113 F0              854             MOVX    @DPTR,A
                     855     ;                     break;
                     856                             ; SOURCE LINE # 69
0114 8044            857             SJMP    ?C0024
                     858     ;                 }
                     859                             ; SOURCE LINE # 70
0116                 860     ?C0023:
                     861     ;                 temp_temp_id = os_task_run[j];
                     862                             ; SOURCE LINE # 71
0116 900000   F      863             MOV     DPTR,#j?044
0119 120000   F      864             LCALL   L?0085
011C 900000   F      865             MOV     DPTR,#temp_temp_id?042
011F ED              866             MOV     A,R5
0120 F0              867             MOVX    @DPTR,A
                     868     ;                 os_task_run[j] = temp_id;
                     869                             ; SOURCE LINE # 72
0121 900000   F      870             MOV     DPTR,#temp_id?041
0124 E0              871             MOVX    A,@DPTR
0125 FC              872             MOV     R4,A
0126 120000   F      873             LCALL   L?0074
0129 EC              874             MOV     A,R4
012A F0              875             MOVX    @DPTR,A
                     876     ;                 temp_id = temp_temp_id;
                     877                             ; SOURCE LINE # 73
012B 900000   F      878             MOV     DPTR,#temp_id?041
012E ED              879             MOV     A,R5
012F F0              880             MOVX    @DPTR,A
                     881     ;             }
                     882                             ; SOURCE LINE # 74
0130 120000   F      883             LCALL   L?0099
0133 80C8            884             SJMP    ?C0020
                     885     ;         } else { //“—‘⁄»ŒŒÒ∂”¡–÷–£¨‘⁄À˘‘⁄Œª÷√«∞“∆
                     886                             ; SOURCE LINE # 75
0135                 887     ?C0019:
                     888     ;             for (j = task_sequence; j>0; j--) {
                     889                             ; SOURCE LINE # 76
0135 900000   F      890             MOV     DPTR,#j?044
0138 E9              891             MOV     A,R1
0139 F0              892             MOVX    @DPTR,A
013A                 893     ?C0025:
013A 900000   F      894             MOV     DPTR,#j?044
013D 120000   F      895             LCALL   L?0093
0140 4010            896             JC      ?C0026
                     897     ;                 os_task_run[j] = os_task_run[j-1];
                     898                             ; SOURCE LINE # 77
0142 120000   F      899             LCALL   L?0091
0145 120000   F      900             LCALL   L?0074
0148 ED              901             MOV     A,R5
0149 F0              902             MOVX    @DPTR,A
                     903     ;             }
                     904                             ; SOURCE LINE # 78
014A 900000   F      905             MOV     DPTR,#j?044
014D E0              906             MOVX    A,@DPTR
014E 14              907             DEC     A
014F F0              908             MOVX    @DPTR,A
0150 80E8            909             SJMP    ?C0025
0152                 910     ?C0026:
                     911     ;             os_task_run[0] = os_task_running_ID;
                     912                             ; SOURCE LINE # 79
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    15

0152 900000   F      913             MOV     DPTR,#os_task_running_ID
0155 E0              914             MOVX    A,@DPTR
0156 900000   F      915             MOV     DPTR,#os_task_run
0159 F0              916             MOVX    @DPTR,A
                     917     ;         }
                     918                             ; SOURCE LINE # 80
015A                 919     ?C0024:
                     920     ;     }
                     921                             ; SOURCE LINE # 81
                     922     ;     if (os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr == 0)//∏¯µ±«∞‘À––µƒ ±º‰∆¨∏≥÷µ
                     923                             ; SOURCE LINE # 82
015A 900000   F      924             MOV     DPTR,#os_task_running_ID
015D E0              925             MOVX    A,@DPTR
015E 120000   F      926             LCALL   L?0077
0161 E0              927             MOVX    A,@DPTR
0162 7005            928             JNZ     ?C0028
                     929     ;         os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr = os_tcb[os_task_running_ID].OSTCBT
                             imeQuanta;
                     930                             ; SOURCE LINE # 83
0164 120000   F      931             LCALL   L?0075
0167 EE              932             MOV     A,R6
0168 F0              933             MOVX    @DPTR,A
0169                 934     ?C0028:
                     935     ;     os_tcb[os_task_running_ID].OSTCBStatus = OS_STAT_RUNNING;
                     936                             ; SOURCE LINE # 84
                     937     ;     SP = os_tcb[os_task_running_ID].OSTCBStkPtr;
                     938                             ; SOURCE LINE # 85
0169 120000   F      939             LCALL   L?0078
016C E0              940             MOVX    A,@DPTR
016D F581            941             MOV     SP,A
                     942     ; #pragma asm
                     943     ;     POP      AR7
016F D007            944               POP      AR7
                     945     ;     POP      AR6
0171 D006            946               POP      AR6
                     947     ;     POP      AR5
0173 D005            948               POP      AR5
                     949     ;     POP      AR4
0175 D004            950               POP      AR4
                     951     ;     POP      AR3
0177 D003            952               POP      AR3
                     953     ;     POP      AR2
0179 D002            954               POP      AR2
                     955     ;     POP      AR1
017B D001            956               POP      AR1
                     957     ;     POP      AR0
017D D000            958               POP      AR0
                     959     ;     POP      PSW
017F D0D0            960               POP      PSW
                     961     ;     POP      DPL
0181 D082            962               POP      DPL
                     963     ;     POP      DPH
0183 D083            964               POP      DPH
                     965     ;     POP      B
0185 D0F0            966               POP      B
                     967     ;     POP      ACC
0187 D0E0            968               POP      ACC
                     969     ; #pragma endasm
                     970     ;     OS_EXIT_CRITICAL();
                     971                             ; SOURCE LINE # 101
0189 D2AF            972             SETB    EA
                     973     ; }
                     974                             ; SOURCE LINE # 102
018B 22              975             RET     
                     976     ; END OF OS_TASK_SW
                     977     
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    16

----                 978     CSEG    AT      0000BH
000B 020000   F      979             LJMP    timer0_int
                     980     
                     981     ; 
                     982     ; /********************* Timer0÷–∂œ∫Ø ************************/
                     983     ; void timer0_int (void) interrupt TIMER0_VECTOR {
                     984     
----                 985             RSEG  ?PR?timer0_int?RT_OS_ASM
                     986             USING   0
0000                 987     timer0_int:
0000 C0E0            988             PUSH    ACC
0002 C0F0            989             PUSH    B
0004 C083            990             PUSH    DPH
0006 C082            991             PUSH    DPL
0008 C0D0            992             PUSH    PSW
000A 75D000          993             MOV     PSW,#00H
000D C000            994             PUSH    AR0
000F C001            995             PUSH    AR1
0011 C002            996             PUSH    AR2
0013 C003            997             PUSH    AR3
0015 C004            998             PUSH    AR4
0017 C005            999             PUSH    AR5
0019 C006           1000             PUSH    AR6
001B C007           1001             PUSH    AR7
                    1002             USING   0
                    1003                             ; SOURCE LINE # 105
                    1004     ;     u8 i;
                    1005     ;     BOOLEAN need_schedule = FALSE;
                    1006                             ; SOURCE LINE # 107
001D 900000   F     1007             MOV     DPTR,#need_schedule?155
0020 E4             1008             CLR     A
0021 F0             1009             MOVX    @DPTR,A
                    1010     ; #pragma asm
                    1011     ;     MOV AR1,AR1
0022 850101         1012               MOV AR1,AR1
                    1013     ; #pragma endasm
                    1014     ;     for(i=0; i<TASK_SIZE; i++) { //»ŒŒÒ ±÷”
                    1015                             ; SOURCE LINE # 111
                    1016     ;---- Variable 'i?154' assigned to Register 'R7' ----
0025 E4             1017             CLR     A
0026 FF             1018             MOV     R7,A
0027                1019     ?C0030:
0027 EF             1020             MOV     A,R7
0028 C3             1021             CLR     C
0029 9408           1022             SUBB    A,#08H
002B 7480           1023             MOV     A,#080H
002D 9480           1024             SUBB    A,#080H
002F 5029           1025             JNC     ?C0031
                    1026     ;         if(os_tcb[i].OSTCBDly) {
                    1027                             ; SOURCE LINE # 112
0031 120000   F     1028             LCALL   L?0082
0034 E0             1029             MOVX    A,@DPTR
0035 FC             1030             MOV     R4,A
0036 A3             1031             INC     DPTR
0037 E0             1032             MOVX    A,@DPTR
0038 4C             1033             ORL     A,R4
0039 601C           1034             JZ      ?C0032
                    1035     ;             os_tcb[i].OSTCBDly--;
                    1036                             ; SOURCE LINE # 113
003B 120000   F     1037             LCALL   L?0082
003E 74FF           1038             MOV     A,#0FFH
0040 F5F0           1039             MOV     B,A
0042 120000   F     1040             LCALL   ?C?IILDX
                    1041     ;             if(os_tcb[i].OSTCBDly == 0) { //µ±»ŒŒÒ ±÷”µΩ ±,±ÿ–Î «”…∂® ±∆˜ºı ±µƒ≤≈––
                    1042                             ; SOURCE LINE # 114
0045 120000   F     1043             LCALL   L?0083
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    17

0048 E0             1044             MOVX    A,@DPTR
0049 FC             1045             MOV     R4,A
004A A3             1046             INC     DPTR
004B E0             1047             MOVX    A,@DPTR
004C 4C             1048             ORL     A,R4
004D 7008           1049             JNZ     ?C0032
                    1050     ;                 //os_rdy_tbl |= (0x01<<i); // π»ŒŒÒ‘⁄æÕ–˜±Ì÷–÷√Œª
                    1051     ;                 os_tcb[i].OSTCBStatus = OS_STAT_RDY;
                    1052                             ; SOURCE LINE # 116
004F 120000   F     1053             LCALL   L?0089
                    1054     ;                 need_schedule = TRUE;//“ÚŒ™ ±º‰µΩ£¨ø…ƒ‹∏ﬂº∂»ŒŒÒ◊º±∏æÕ–˜£¨–Ë“™µ˜∂»
                    1055                             ; SOURCE LINE # 117
0052 900000   F     1056             MOV     DPTR,#need_schedule?155
0055 14             1057             DEC     A
0056 F0             1058             MOVX    @DPTR,A
                    1059     ;             }
                    1060                             ; SOURCE LINE # 118
                    1061     ;         }
                    1062                             ; SOURCE LINE # 119
                    1063     ;     }
                    1064                             ; SOURCE LINE # 120
0057                1065     ?C0032:
0057 0F             1066             INC     R7
0058 80CD           1067             SJMP    ?C0030
005A                1068     ?C0031:
                    1069     ;     // ±º‰∆¨¬÷◊™º∆ ¬ﬂº≠
                    1070     ;     if (os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr == 0) { //µ±«∞‘À––»ŒŒÒ ±º‰∆¨∫ƒæ°£¨÷
                             ¥––÷–∂œœ¬»ŒŒÒµ˜∂»
                    1071                             ; SOURCE LINE # 122
005A 900000   F     1072             MOV     DPTR,#os_task_running_ID
005D E0             1073             MOVX    A,@DPTR
005E FF             1074             MOV     R7,A
005F 120000   F     1075             LCALL   L?0077
0062 E0             1076             MOVX    A,@DPTR
0063 7007           1077             JNZ     ?C0035
                    1078     ;         need_schedule = TRUE; //“ÚŒ™ ±º‰∆¨∫ƒæ°£¨–Ë“™µ˜∂»
                    1079                             ; SOURCE LINE # 123
0065 900000   F     1080             MOV     DPTR,#need_schedule?155
0068 04             1081             INC     A
0069 F0             1082             MOVX    @DPTR,A
                    1083     ;     } else { // ±º‰∆¨Œ¥µΩ£¨Ω¯––◊‘ºı
                    1084                             ; SOURCE LINE # 124
006A 8006           1085             SJMP    ?C0036
006C                1086     ?C0035:
                    1087     ;         os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr--;
                    1088                             ; SOURCE LINE # 125
006C 120000   F     1089             LCALL   L?0076
006F E0             1090             MOVX    A,@DPTR
0070 14             1091             DEC     A
0071 F0             1092             MOVX    @DPTR,A
                    1093     ;     }
                    1094                             ; SOURCE LINE # 126
0072                1095     ?C0036:
                    1096     ;     if (need_schedule == TRUE) { //µ˜∂»»ŒŒÒ÷¥––¥˙¬Î
                    1097                             ; SOURCE LINE # 127
0072 900000   F     1098             MOV     DPTR,#need_schedule?155
0075 E0             1099             MOVX    A,@DPTR
0076 6401           1100             XRL     A,#01H
0078 6003           1101             JZ      $ + 5H
007A 020000   F     1102             LJMP    ?C0066
                    1103     ;         char i = 0, j = 0;
                    1104                             ; SOURCE LINE # 128
007D A3             1105             INC     DPTR
                    1106     ;         u8 highest_prio_id = 0;
                    1107                             ; SOURCE LINE # 129
                    1108     ;         u8 task_sequence = 0;//µ±«∞»ŒŒÒµƒ“—‘À––∂”¡–÷–“ª∂® «0
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    18

                    1109                             ; SOURCE LINE # 130
007E 120000   F     1110             LCALL   L?0094
                    1111     ;         //SP -= 2;
                    1112     ;         os_tcb[os_task_running_ID].OSTCBStkPtr = SP;
                    1113                             ; SOURCE LINE # 132
0081 900000   F     1114             MOV     DPTR,#os_task_running_ID
0084 E0             1115             MOVX    A,@DPTR
0085 FF             1116             MOV     R7,A
0086 120000   F     1117             LCALL   L?0079
0089 E581           1118             MOV     A,SP
008B F0             1119             MOVX    @DPTR,A
                    1120     ;         os_tcb[os_task_running_ID].OSTCBStatus = OS_STAT_RDY;
                    1121                             ; SOURCE LINE # 133
008C 120000   F     1122             LCALL   L?0089
                    1123     ;         //«–ªª»ŒŒÒ’ª
                    1124     ;         for (; i<TASK_SIZE; i++) { //’“µΩ”≈œ»º∂◊Ó∏ﬂ»ŒŒÒ£¨≤¢«“ «‘⁄“—‘À––»ŒŒÒ∂”¡–µƒ◊Ó∫Û£¨»Á
                             π˚“—‘À––»ŒŒÒ∂”¡–÷–√ª”–‘Ú”≈œ»‘À––
                    1125                             ; SOURCE LINE # 135
008F                1126     ?C0038:
008F 900000   F     1127             MOV     DPTR,#i?150
0092 120000   F     1128             LCALL   L?0085
0095 120000   F     1129             LCALL   L?0096
0098 4003           1130             JC      $ + 5H
009A 020000   F     1131             LJMP    ?C0039
                    1132     ;             if (os_tcb[i].OSTCBStatus == OS_STAT_RDY) {
                    1133                             ; SOURCE LINE # 136
009D EF             1134             MOV     A,R7
009E 7803           1135             MOV     R0,#03H
00A0                1136     ?C0069:
00A0 C3             1137             CLR     C
00A1 33             1138             RLC     A
00A2 CE             1139             XCH     A,R6
00A3 33             1140             RLC     A
00A4 CE             1141             XCH     A,R6
00A5 D8F9           1142             DJNZ    R0,?C0069
00A7 120000   F     1143             LCALL   L?0090
00AA 6003           1144             JZ      $ + 5H
00AC 020000   F     1145             LJMP    ?C0040
                    1146     ;                 if (os_tcb[i].OSTCBPrio > os_tcb[highest_prio_id].OSTCBPrio) {
                    1147                             ; SOURCE LINE # 137
00AF 120000   F     1148             LCALL   L?0086
00B2 900000   F     1149             MOV     DPTR,#highest_prio_id?152
00B5 120000   F     1150             LCALL   L?0088
00B8 4034           1151             JC      ?C0042
                    1152     ;                     highest_prio_id = i;
                    1153                             ; SOURCE LINE # 138
                    1154     ;                     //≤È’“∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
                    1155     ;                     task_sequence = 0xFF;//œ»ºŸ…Ë’‚∏ˆ≈≈‘⁄◊Ó◊Ó◊Ó∫Û√Ê
                    1156                             ; SOURCE LINE # 140
00BA 120000   F     1157             LCALL   L?0100
00BD 74FF           1158             MOV     A,#0FFH
00BF F0             1159             MOVX    @DPTR,A
                    1160     ;                     for (j=0; j<TASK_SIZE; j++) {
                    1161                             ; SOURCE LINE # 141
00C0 900000   F     1162             MOV     DPTR,#j?151
00C3 E4             1163             CLR     A
00C4 F0             1164             MOVX    @DPTR,A
00C5                1165     ?C0043:
00C5 900000   F     1166             MOV     DPTR,#j?151
00C8 120000   F     1167             LCALL   L?0092
00CB 5079           1168             JNC     ?C0040
                    1169     ;                         if (os_task_run[j] == i) {
                    1170                             ; SOURCE LINE # 142
00CD 120000   F     1171             LCALL   L?0073
00D0 E0             1172             MOVX    A,@DPTR
00D1 FF             1173             MOV     R7,A
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    19

00D2 900000   F     1174             MOV     DPTR,#i?150
00D5 E0             1175             MOVX    A,@DPTR
00D6 B50709         1176             CJNE    A,AR7,?C0046
                    1177     ;                             task_sequence = j;
                    1178                             ; SOURCE LINE # 143
00D9 A3             1179             INC     DPTR
00DA E0             1180             MOVX    A,@DPTR
00DB 900000   F     1181             MOV     DPTR,#task_sequence?153
00DE F0             1182             MOVX    @DPTR,A
                    1183     ;                             break;
                    1184                             ; SOURCE LINE # 144
00DF 020000   F     1185             LJMP    ?C0040
                    1186     ;                         }
                    1187                             ; SOURCE LINE # 145
00E2                1188     ?C0046:
                    1189     ;                         if (os_task_run[j] == 0xFF)
                    1190                             ; SOURCE LINE # 146
00E2 EF             1191             MOV     A,R7
00E3 F4             1192             CPL     A
00E4 6060           1193             JZ      ?C0040
                    1194     ;                          break;
                    1195                             ; SOURCE LINE # 147
                    1196     ;                     }
                    1197                             ; SOURCE LINE # 148
00E6 900000   F     1198             MOV     DPTR,#j?151
00E9 E0             1199             MOVX    A,@DPTR
00EA 04             1200             INC     A
00EB F0             1201             MOVX    @DPTR,A
00EC 80D7           1202             SJMP    ?C0043
                    1203     ;                 } else if (os_tcb[i].OSTCBPrio == os_tcb[highest_prio_id].OSTCBPrio) {
                    1204                             ; SOURCE LINE # 149
00EE                1205     ?C0042:
00EE 900000   F     1206             MOV     DPTR,#i?150
00F1 120000   F     1207             LCALL   L?0085
00F4 EF             1208             MOV     A,R7
00F5 7803           1209             MOV     R0,#03H
00F7                1210     ?C0070:
00F7 C3             1211             CLR     C
00F8 33             1212             RLC     A
00F9 CE             1213             XCH     A,R6
00FA 33             1214             RLC     A
00FB CE             1215             XCH     A,R6
00FC D8F9           1216             DJNZ    R0,?C0070
00FE 2400     F     1217             ADD     A,#LOW (os_tcb+05H)
0100 120000   F     1218             LCALL   L?0087
0103 6D             1219             XRL     A,R5
0104 7040           1220             JNZ     ?C0040
                    1221     ;                     //≤È’“–¬’“µΩµƒ∏ﬂ”≈œ»º∂‘⁄“—‘À––∂”¡–÷–µƒ≈≈Œª
                    1222     ;                     u8 temp_task_sequence = 0xFF;//Õ¨”≈œ»º∂ π”√µƒ¡Ÿ ±»ŒŒÒ–Ú¡–
                    1223                             ; SOURCE LINE # 151
0106 74FF           1224             MOV     A,#0FFH
                    1225     ;                     for (j=0; j<TASK_SIZE; j++) { //≤È’“–¬µƒÕ¨º∂»ŒŒÒ‘⁄»ŒŒÒ∂”¡–÷–µƒ≈≈Œª
                    1226                             ; SOURCE LINE # 152
0108 120000   F     1227             LCALL   L?0095
010B E4             1228             CLR     A
010C F0             1229             MOVX    @DPTR,A
010D                1230     ?C0050:
010D 900000   F     1231             MOV     DPTR,#j?151
0110 120000   F     1232             LCALL   L?0081
0113 5020           1233             JNC     ?C0051
                    1234     ;                         if (os_task_run[j] == i) {
                    1235                             ; SOURCE LINE # 153
0115 120000   F     1236             LCALL   L?0073
0118 E0             1237             MOVX    A,@DPTR
0119 FF             1238             MOV     R7,A
011A 900000   F     1239             MOV     DPTR,#i?150
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    20

011D E0             1240             MOVX    A,@DPTR
011E B50708         1241             CJNE    A,AR7,?C0053
                    1242     ;                             temp_task_sequence = j;
                    1243                             ; SOURCE LINE # 154
0121 A3             1244             INC     DPTR
0122 E0             1245             MOVX    A,@DPTR
0123 900000   F     1246             MOV     DPTR,#temp_task_sequence?147
0126 F0             1247             MOVX    @DPTR,A
                    1248     ;                             break;
                    1249                             ; SOURCE LINE # 155
0127 800C           1250             SJMP    ?C0051
                    1251     ;                         }
                    1252                             ; SOURCE LINE # 156
0129                1253     ?C0053:
                    1254     ;                         if (os_task_run[j] == 0xFF)
                    1255                             ; SOURCE LINE # 157
0129 EF             1256             MOV     A,R7
012A F4             1257             CPL     A
012B 6008           1258             JZ      ?C0051
                    1259     ;                          break;
                    1260                             ; SOURCE LINE # 158
                    1261     ;                     }
                    1262                             ; SOURCE LINE # 159
012D 900000   F     1263             MOV     DPTR,#j?151
0130 E0             1264             MOVX    A,@DPTR
0131 04             1265             INC     A
0132 F0             1266             MOVX    @DPTR,A
0133 80D8           1267             SJMP    ?C0050
0135                1268     ?C0051:
                    1269     ;                     if (temp_task_sequence > task_sequence) { //¥À¥¶Œ“√«√ª”–øº¬«¡Ω∏ˆœ‡Õ¨”
                             ≈œ»º∂∂º√ª‘⁄“—‘À––»ŒŒÒ∂”¡–÷–µƒ«Èøˆ£¨’‚÷÷«Èøˆœ¬‘À––µ⁄“ª∏ˆ±ª’“µΩµƒ»ŒŒÒ
                    1270                             ; SOURCE LINE # 160
0135 900000   F     1271             MOV     DPTR,#task_sequence?153
0138 E0             1272             MOVX    A,@DPTR
0139 FF             1273             MOV     R7,A
013A A3             1274             INC     DPTR
013B E0             1275             MOVX    A,@DPTR
013C FE             1276             MOV     R6,A
013D D3             1277             SETB    C
013E 9F             1278             SUBB    A,R7
013F 4005           1279             JC      ?C0040
                    1280     ;                         highest_prio_id = i;
                    1281                             ; SOURCE LINE # 161
                    1282     ;                         task_sequence = temp_task_sequence;
                    1283                             ; SOURCE LINE # 162
0141 120000   F     1284             LCALL   L?0100
0144 EE             1285             MOV     A,R6
0145 F0             1286             MOVX    @DPTR,A
                    1287     ;                     }
                    1288                             ; SOURCE LINE # 163
                    1289     ;                 }
                    1290                             ; SOURCE LINE # 164
                    1291     ;             }
                    1292                             ; SOURCE LINE # 165
                    1293     ;         }
                    1294                             ; SOURCE LINE # 166
0146                1295     ?C0040:
0146 900000   F     1296             MOV     DPTR,#i?150
0149 E0             1297             MOVX    A,@DPTR
014A 04             1298             INC     A
014B F0             1299             MOVX    @DPTR,A
014C 020000   F     1300             LJMP    ?C0038
014F                1301     ?C0039:
                    1302     ;         os_task_running_ID = highest_prio_id;
                    1303                             ; SOURCE LINE # 167
014F 900000   F     1304             MOV     DPTR,#highest_prio_id?152
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    21

0152 E0             1305             MOVX    A,@DPTR
0153 900000   F     1306             MOV     DPTR,#os_task_running_ID
0156 F0             1307             MOVX    @DPTR,A
                    1308     ;         //∞—µ±«∞»ŒŒÒ≤Â»Î“—‘À––»ŒŒÒ∂”¡–÷–
                    1309     ;         {
                    1310                             ; SOURCE LINE # 169
                    1311     ;             u8 temp_id = os_task_running_ID, temp_temp_id;
                    1312                             ; SOURCE LINE # 170
0157 900000   F     1313             MOV     DPTR,#temp_id?148
015A F0             1314             MOVX    @DPTR,A
                    1315     ;             if (task_sequence == 0xFF) { //≤ª‘⁄»ŒŒÒ∂”¡–÷–£¨÷±Ω”Õ∑≤Â
                    1316                             ; SOURCE LINE # 171
015B 900000   F     1317             MOV     DPTR,#task_sequence?153
015E E0             1318             MOVX    A,@DPTR
015F F9             1319             MOV     R1,A
0160 F4             1320             CPL     A
0161 703E           1321             JNZ     ?C0056
                    1322     ;                 for (j=0; j<TASK_SIZE; j++) {
                    1323                             ; SOURCE LINE # 172
0163 900000   F     1324             MOV     DPTR,#j?151
0166 F0             1325             MOVX    @DPTR,A
0167                1326     ?C0057:
0167 900000   F     1327             MOV     DPTR,#j?151
016A 120000   F     1328             LCALL   L?0081
016D 5057           1329             JNC     ?C0061
                    1330     ;                     if (os_task_run[j] == 0xFF) {
                    1331                             ; SOURCE LINE # 173
016F 120000   F     1332             LCALL   L?0073
0172 E0             1333             MOVX    A,@DPTR
0173 FD             1334             MOV     R5,A
0174 F4             1335             CPL     A
0175 700C           1336             JNZ     ?C0060
                    1337     ;                         os_task_run[j] = temp_id;
                    1338                             ; SOURCE LINE # 174
0177 900000   F     1339             MOV     DPTR,#temp_id?148
017A E0             1340             MOVX    A,@DPTR
017B FC             1341             MOV     R4,A
017C 120000   F     1342             LCALL   L?0074
017F EC             1343             MOV     A,R4
0180 F0             1344             MOVX    @DPTR,A
                    1345     ;                         break;
                    1346                             ; SOURCE LINE # 175
0181 8043           1347             SJMP    ?C0061
                    1348     ;                     }
                    1349                             ; SOURCE LINE # 176
0183                1350     ?C0060:
                    1351     ;                     temp_temp_id = os_task_run[j];
                    1352                             ; SOURCE LINE # 177
0183 900000   F     1353             MOV     DPTR,#j?151
0186 120000   F     1354             LCALL   L?0085
0189 900000   F     1355             MOV     DPTR,#temp_temp_id?149
018C ED             1356             MOV     A,R5
018D F0             1357             MOVX    @DPTR,A
                    1358     ;                     os_task_run[j] = temp_id;
                    1359                             ; SOURCE LINE # 178
018E 900000   F     1360             MOV     DPTR,#temp_id?148
0191 E0             1361             MOVX    A,@DPTR
0192 FC             1362             MOV     R4,A
0193 120000   F     1363             LCALL   L?0074
0196 EC             1364             MOV     A,R4
0197 F0             1365             MOVX    @DPTR,A
                    1366     ;                     temp_id = temp_temp_id;
                    1367                             ; SOURCE LINE # 179
0198 ED             1368             MOV     A,R5
                    1369     ;                 }
                    1370                             ; SOURCE LINE # 180
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    22

0199 120000   F     1371             LCALL   L?0095
019C E0             1372             MOVX    A,@DPTR
019D 04             1373             INC     A
019E F0             1374             MOVX    @DPTR,A
019F 80C6           1375             SJMP    ?C0057
                    1376     ;             } else { //“—‘⁄»ŒŒÒ∂”¡–÷–£¨‘⁄À˘‘⁄Œª÷√«∞“∆
                    1377                             ; SOURCE LINE # 181
01A1                1378     ?C0056:
                    1379     ;                 for (j = task_sequence; j>0; j--) {
                    1380                             ; SOURCE LINE # 182
01A1 900000   F     1381             MOV     DPTR,#j?151
01A4 E9             1382             MOV     A,R1
01A5 F0             1383             MOVX    @DPTR,A
01A6                1384     ?C0062:
01A6 900000   F     1385             MOV     DPTR,#j?151
01A9 120000   F     1386             LCALL   L?0093
01AC 4010           1387             JC      ?C0063
                    1388     ;                     os_task_run[j] = os_task_run[j-1];
                    1389                             ; SOURCE LINE # 183
01AE 120000   F     1390             LCALL   L?0091
01B1 120000   F     1391             LCALL   L?0074
01B4 ED             1392             MOV     A,R5
01B5 F0             1393             MOVX    @DPTR,A
                    1394     ;                 }
                    1395                             ; SOURCE LINE # 184
01B6 900000   F     1396             MOV     DPTR,#j?151
01B9 E0             1397             MOVX    A,@DPTR
01BA 14             1398             DEC     A
01BB F0             1399             MOVX    @DPTR,A
01BC 80E8           1400             SJMP    ?C0062
01BE                1401     ?C0063:
                    1402     ;                 os_task_run[0] = os_task_running_ID;
                    1403                             ; SOURCE LINE # 185
01BE 900000   F     1404             MOV     DPTR,#os_task_running_ID
01C1 E0             1405             MOVX    A,@DPTR
01C2 900000   F     1406             MOV     DPTR,#os_task_run
01C5 F0             1407             MOVX    @DPTR,A
                    1408     ;             }
                    1409                             ; SOURCE LINE # 186
01C6                1410     ?C0061:
                    1411     ;         }
                    1412                             ; SOURCE LINE # 187
                    1413     ;         if (os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr == 0) //∏¯µ±«∞‘À––µƒ ±º‰∆¨∏≥÷µ
                    1414                             ; SOURCE LINE # 188
01C6 900000   F     1415             MOV     DPTR,#os_task_running_ID
01C9 E0             1416             MOVX    A,@DPTR
01CA 120000   F     1417             LCALL   L?0077
01CD E0             1418             MOVX    A,@DPTR
01CE 7005           1419             JNZ     ?C0065
                    1420     ;             os_tcb[os_task_running_ID].OSTCBTimeQuantaCtr = os_tcb[os_task_running_ID].OS
                             TCBTimeQuanta;
                    1421                             ; SOURCE LINE # 189
01D0 120000   F     1422             LCALL   L?0075
01D3 EE             1423             MOV     A,R6
01D4 F0             1424             MOVX    @DPTR,A
01D5                1425     ?C0065:
                    1426     ;         os_tcb[os_task_running_ID].OSTCBStatus = OS_STAT_RUNNING;
                    1427                             ; SOURCE LINE # 190
                    1428     ;         SP = os_tcb[os_task_running_ID].OSTCBStkPtr;
                    1429                             ; SOURCE LINE # 191
01D5 120000   F     1430             LCALL   L?0078
01D8 E0             1431             MOVX    A,@DPTR
01D9 F581           1432             MOV     SP,A
                    1433     ;     }
                    1434                             ; SOURCE LINE # 192
                    1435     ; }
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    23

                    1436                             ; SOURCE LINE # 193
01DB                1437     ?C0066:
01DB D007           1438             POP     AR7
01DD D006           1439             POP     AR6
01DF D005           1440             POP     AR5
01E1 D004           1441             POP     AR4
01E3 D003           1442             POP     AR3
01E5 D002           1443             POP     AR2
01E7 D001           1444             POP     AR1
01E9 D000           1445             POP     AR0
01EB D0D0           1446             POP     PSW
01ED D082           1447             POP     DPL
01EF D083           1448             POP     DPH
01F1 D0F0           1449             POP     B
01F3 D0E0           1450             POP     ACC
01F5 32             1451             RETI    
                    1452     ; END OF timer0_int
                    1453     
                    1454             END
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    24

SYMBOL TABLE LISTING
------ ----- -------


N A M E                   T Y P E  V A L U E   ATTRIBUTES

?C0001 . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0002 . . . . . . . . .  C ADDR   00E5H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0003 . . . . . . . . .  C ADDR   00DCH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0005 . . . . . . . . .  C ADDR   0089H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0006 . . . . . . . . .  C ADDR   0063H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0009 . . . . . . . . .  C ADDR   0080H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0013 . . . . . . . . .  C ADDR   00A9H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0014 . . . . . . . . .  C ADDR   00CBH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0016 . . . . . . . . .  C ADDR   00C2H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0019 . . . . . . . . .  C ADDR   0135H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0020 . . . . . . . . .  C ADDR   00FDH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0023 . . . . . . . . .  C ADDR   0116H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0024 . . . . . . . . .  C ADDR   015AH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0025 . . . . . . . . .  C ADDR   013AH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0026 . . . . . . . . .  C ADDR   0152H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0028 . . . . . . . . .  C ADDR   0169H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0030 . . . . . . . . .  C ADDR   0027H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0031 . . . . . . . . .  C ADDR   005AH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0032 . . . . . . . . .  C ADDR   0057H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0035 . . . . . . . . .  C ADDR   006CH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0036 . . . . . . . . .  C ADDR   0072H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0038 . . . . . . . . .  C ADDR   008FH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0039 . . . . . . . . .  C ADDR   014FH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0040 . . . . . . . . .  C ADDR   0146H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0042 . . . . . . . . .  C ADDR   00EEH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0043 . . . . . . . . .  C ADDR   00C5H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0046 . . . . . . . . .  C ADDR   00E2H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0050 . . . . . . . . .  C ADDR   010DH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0051 . . . . . . . . .  C ADDR   0135H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0053 . . . . . . . . .  C ADDR   0129H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0056 . . . . . . . . .  C ADDR   01A1H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0057 . . . . . . . . .  C ADDR   0167H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0060 . . . . . . . . .  C ADDR   0183H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0061 . . . . . . . . .  C ADDR   01C6H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0062 . . . . . . . . .  C ADDR   01A6H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0063 . . . . . . . . .  C ADDR   01BEH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0065 . . . . . . . . .  C ADDR   01D5H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0066 . . . . . . . . .  C ADDR   01DBH   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0067 . . . . . . . . .  C ADDR   003EH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0068 . . . . . . . . .  C ADDR   008FH   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
?C0069 . . . . . . . . .  C ADDR   00A0H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C0070 . . . . . . . . .  C ADDR   00F7H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
?C?IILDX . . . . . . . .  C ADDR   -----       EXT
?OS_TASK_SW?BYTE . . . .  X ADDR   0000H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
?PR?OS_TASK_SW?RT_OS_ASM  C SEG    018CH       REL=UNIT
?PR?RT_OS_ASM. . . . . .  C SEG    0137H       REL=UNIT
?PR?TIMER0_INT?RT_OS_ASM  C SEG    01F6H       REL=UNIT
?TIMER0_INT?BYTE . . . .  X ADDR   0000H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
?XD?OS_TASK_SW?RT_OS_ASM  X SEG    0006H       REL=UNIT
?XD?TIMER0_INT?RT_OS_ASM  X SEG    0007H       REL=UNIT
AC . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . . . . .  D ADDR   00E0H   A   
ACC0 . . . . . . . . . .  B ADDR   00E0H.0 A   
ACC1 . . . . . . . . . .  B ADDR   00E0H.1 A   
ACC2 . . . . . . . . . .  B ADDR   00E0H.2 A   
ACC3 . . . . . . . . . .  B ADDR   00E0H.3 A   
ACC4 . . . . . . . . . .  B ADDR   00E0H.4 A   
ACC5 . . . . . . . . . .  B ADDR   00E0H.5 A   
ACC6 . . . . . . . . . .  B ADDR   00E0H.6 A   
ACC7 . . . . . . . . . .  B ADDR   00E0H.7 A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    25

ADC_CONTR. . . . . . . .  D ADDR   00BCH   A   
ADC_RES. . . . . . . . .  D ADDR   00BDH   A   
ADC_RESL . . . . . . . .  D ADDR   00BEH   A   
AR0. . . . . . . . . . .  D ADDR   0000H   A   
AR1. . . . . . . . . . .  D ADDR   0001H   A   
AR2. . . . . . . . . . .  D ADDR   0002H   A   
AR3. . . . . . . . . . .  D ADDR   0003H   A   
AR4. . . . . . . . . . .  D ADDR   0004H   A   
AR5. . . . . . . . . . .  D ADDR   0005H   A   
AR6. . . . . . . . . . .  D ADDR   0006H   A   
AR7. . . . . . . . . . .  D ADDR   0007H   A   
AUXR . . . . . . . . . .  D ADDR   008EH   A   
AUXR1. . . . . . . . . .  D ADDR   00A2H   A   
AUXR2. . . . . . . . . .  D ADDR   008FH   A   
B. . . . . . . . . . . .  D ADDR   00F0H   A   
B0 . . . . . . . . . . .  B ADDR   00F0H.0 A   
B1 . . . . . . . . . . .  B ADDR   00F0H.1 A   
B2 . . . . . . . . . . .  B ADDR   00F0H.2 A   
B3 . . . . . . . . . . .  B ADDR   00F0H.3 A   
B4 . . . . . . . . . . .  B ADDR   00F0H.4 A   
B5 . . . . . . . . . . .  B ADDR   00F0H.5 A   
B6 . . . . . . . . . . .  B ADDR   00F0H.6 A   
B7 . . . . . . . . . . .  B ADDR   00F0H.7 A   
BUS_SPEED. . . . . . . .  D ADDR   00A1H   A   
CCAP0H . . . . . . . . .  D ADDR   00FAH   A   
CCAP0L . . . . . . . . .  D ADDR   00EAH   A   
CCAP1H . . . . . . . . .  D ADDR   00FBH   A   
CCAP1L . . . . . . . . .  D ADDR   00EBH   A   
CCAP2H . . . . . . . . .  D ADDR   00FCH   A   
CCAP2L . . . . . . . . .  D ADDR   00ECH   A   
CCAPM0 . . . . . . . . .  D ADDR   00DAH   A   
CCAPM1 . . . . . . . . .  D ADDR   00DBH   A   
CCAPM2 . . . . . . . . .  D ADDR   00DCH   A   
CCF0 . . . . . . . . . .  B ADDR   00D8H.0 A   
CCF1 . . . . . . . . . .  B ADDR   00D8H.1 A   
CCF2 . . . . . . . . . .  B ADDR   00D8H.2 A   
CCON . . . . . . . . . .  D ADDR   00D8H   A   
CCP0 . . . . . . . . . .  B ADDR   0090H.1 A   
CCP1 . . . . . . . . . .  B ADDR   0090H.0 A   
CCP2 . . . . . . . . . .  B ADDR   00B0H.7 A   
CF . . . . . . . . . . .  B ADDR   00D8H.7 A   
CH . . . . . . . . . . .  D ADDR   00F9H   A   
CL . . . . . . . . . . .  D ADDR   00E9H   A   
CLKOUT0. . . . . . . . .  B ADDR   00B0H.5 A   
CLKOUT1. . . . . . . . .  B ADDR   00B0H.4 A   
CLK_DIV. . . . . . . . .  D ADDR   0097H   A   
CMOD . . . . . . . . . .  D ADDR   00D9H   A   
COM0047. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?RT_OS_ASM
CR . . . . . . . . . . .  B ADDR   00D8H.6 A   
CY . . . . . . . . . . .  B ADDR   00D0H.7 A   
DPH. . . . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . . . . .  B ADDR   00A8H.7 A   
EADC . . . . . . . . . .  B ADDR   00A8H.5 A   
ELVD . . . . . . . . . .  B ADDR   00A8H.6 A   
ES . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0. . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . . . . .  B ADDR   00A8H.3 A   
EX0. . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . . . . .  B ADDR   00A8H.2 A   
F0 . . . . . . . . . . .  B ADDR   00D0H.5 A   
F1 . . . . . . . . . . .  B ADDR   00D0H.1 A   
HIGHEST_PRIO_ID?045. . .  X ADDR   0002H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
HIGHEST_PRIO_ID?152. . .  X ADDR   0003H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
I?043. . . . . . . . . .  X ADDR   0000H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
I?150. . . . . . . . . .  X ADDR   0001H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    26

IAP_ADDRH. . . . . . . .  D ADDR   00C3H   A   
IAP_ADDRL. . . . . . . .  D ADDR   00C4H   A   
IAP_CMD. . . . . . . . .  D ADDR   00C5H   A   
IAP_CONTR. . . . . . . .  D ADDR   00C7H   A   
IAP_DATA . . . . . . . .  D ADDR   00C2H   A   
IAP_TRIG . . . . . . . .  D ADDR   00C6H   A   
IE . . . . . . . . . . .  D ADDR   00A8H   A   
IE0. . . . . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . . . . .  B ADDR   0088H.3 A   
IE2. . . . . . . . . . .  D ADDR   00AFH   A   
INT0 . . . . . . . . . .  B ADDR   00B0H.2 A   
INT1 . . . . . . . . . .  B ADDR   00B0H.3 A   
INT_CLKO . . . . . . . .  D ADDR   008FH   A   
IP . . . . . . . . . . .  D ADDR   00B8H   A   
IP2. . . . . . . . . . .  D ADDR   00B5H   A   
IPH. . . . . . . . . . .  D ADDR   00B7H   A   
IPH2 . . . . . . . . . .  D ADDR   00B6H   A   
ISP_ADDRH. . . . . . . .  D ADDR   00C3H   A   
ISP_ADDRL. . . . . . . .  D ADDR   00C4H   A   
ISP_CMD. . . . . . . . .  D ADDR   00C5H   A   
ISP_CONTR. . . . . . . .  D ADDR   00C7H   A   
ISP_DATA . . . . . . . .  D ADDR   00C2H   A   
ISP_TRIG . . . . . . . .  D ADDR   00C6H   A   
IT0. . . . . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . . . . .  B ADDR   0088H.2 A   
J?044. . . . . . . . . .  X ADDR   0001H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
J?151. . . . . . . . . .  X ADDR   0002H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
L?0072 . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?RT_OS_ASM
L?0073 . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?RT_OS_ASM
L?0074 . . . . . . . . .  C ADDR   0005H   R   SEG=?PR?RT_OS_ASM
L?0075 . . . . . . . . .  C ADDR   0010H   R   SEG=?PR?RT_OS_ASM
L?0076 . . . . . . . . .  C ADDR   0024H   R   SEG=?PR?RT_OS_ASM
L?0077 . . . . . . . . .  C ADDR   0025H   R   SEG=?PR?RT_OS_ASM
L?0078 . . . . . . . . .  C ADDR   0033H   R   SEG=?PR?RT_OS_ASM
L?0079 . . . . . . . . .  C ADDR   004BH   R   SEG=?PR?RT_OS_ASM
L?0080 . . . . . . . . .  C ADDR   0059H   R   SEG=?PR?RT_OS_ASM
L?0081 . . . . . . . . .  C ADDR   005CH   R   SEG=?PR?RT_OS_ASM
L?0082 . . . . . . . . .  C ADDR   006DH   R   SEG=?PR?RT_OS_ASM
L?0083 . . . . . . . . .  C ADDR   006DH   R   SEG=?PR?RT_OS_ASM
L?0084 . . . . . . . . .  C ADDR   007CH   R   SEG=?PR?RT_OS_ASM
L?0085 . . . . . . . . .  C ADDR   007FH   R   SEG=?PR?RT_OS_ASM
L?0086 . . . . . . . . .  C ADDR   0086H   R   SEG=?PR?RT_OS_ASM
L?0087 . . . . . . . . .  C ADDR   0089H   R   SEG=?PR?RT_OS_ASM
L?0088 . . . . . . . . .  C ADDR   0092H   R   SEG=?PR?RT_OS_ASM
L?0089 . . . . . . . . .  C ADDR   00A7H   R   SEG=?PR?RT_OS_ASM
L?0090 . . . . . . . . .  C ADDR   00BCH   R   SEG=?PR?RT_OS_ASM
L?0091 . . . . . . . . .  C ADDR   00CEH   R   SEG=?PR?RT_OS_ASM
L?0092 . . . . . . . . .  C ADDR   00E0H   R   SEG=?PR?RT_OS_ASM
L?0093 . . . . . . . . .  C ADDR   00F1H   R   SEG=?PR?RT_OS_ASM
L?0094 . . . . . . . . .  C ADDR   0102H   R   SEG=?PR?RT_OS_ASM
L?0095 . . . . . . . . .  C ADDR   010AH   R   SEG=?PR?RT_OS_ASM
L?0096 . . . . . . . . .  C ADDR   0112H   R   SEG=?PR?RT_OS_ASM
L?0097 . . . . . . . . .  C ADDR   011CH   R   SEG=?PR?RT_OS_ASM
L?0098 . . . . . . . . .  C ADDR   0126H   R   SEG=?PR?RT_OS_ASM
L?0099 . . . . . . . . .  C ADDR   0126H   R   SEG=?PR?RT_OS_ASM
L?0100 . . . . . . . . .  C ADDR   012DH   R   SEG=?PR?RT_OS_ASM
NEED_SCHEDULE?155. . . .  X ADDR   0000H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
OS_TASK_RUN. . . . . . .  X ADDR   -----       EXT
OS_TASK_RUNNING_ID . . .  X ADDR   -----       EXT
OS_TASK_SW . . . . . . .  C ADDR   0000H   R   SEG=?PR?OS_TASK_SW?RT_OS_ASM
OS_TCB . . . . . . . . .  X ADDR   -----       EXT
OV . . . . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . . . . .  D ADDR   0080H   A   
P00. . . . . . . . . . .  B ADDR   0080H.0 A   
P01. . . . . . . . . . .  B ADDR   0080H.1 A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    27

P02. . . . . . . . . . .  B ADDR   0080H.2 A   
P03. . . . . . . . . . .  B ADDR   0080H.3 A   
P04. . . . . . . . . . .  B ADDR   0080H.4 A   
P05. . . . . . . . . . .  B ADDR   0080H.5 A   
P06. . . . . . . . . . .  B ADDR   0080H.6 A   
P07. . . . . . . . . . .  B ADDR   0080H.7 A   
P0M0 . . . . . . . . . .  D ADDR   0094H   A   
P0M1 . . . . . . . . . .  D ADDR   0093H   A   
P1 . . . . . . . . . . .  D ADDR   0090H   A   
P10. . . . . . . . . . .  B ADDR   0090H.0 A   
P11. . . . . . . . . . .  B ADDR   0090H.1 A   
P12. . . . . . . . . . .  B ADDR   0090H.2 A   
P13. . . . . . . . . . .  B ADDR   0090H.3 A   
P14. . . . . . . . . . .  B ADDR   0090H.4 A   
P15. . . . . . . . . . .  B ADDR   0090H.5 A   
P16. . . . . . . . . . .  B ADDR   0090H.6 A   
P17. . . . . . . . . . .  B ADDR   0090H.7 A   
P1ASF. . . . . . . . . .  D ADDR   009DH   A   
P1M0 . . . . . . . . . .  D ADDR   0092H   A   
P1M1 . . . . . . . . . .  D ADDR   0091H   A   
P2 . . . . . . . . . . .  D ADDR   00A0H   A   
P20. . . . . . . . . . .  B ADDR   00A0H.0 A   
P21. . . . . . . . . . .  B ADDR   00A0H.1 A   
P22. . . . . . . . . . .  B ADDR   00A0H.2 A   
P23. . . . . . . . . . .  B ADDR   00A0H.3 A   
P24. . . . . . . . . . .  B ADDR   00A0H.4 A   
P25. . . . . . . . . . .  B ADDR   00A0H.5 A   
P26. . . . . . . . . . .  B ADDR   00A0H.6 A   
P27. . . . . . . . . . .  B ADDR   00A0H.7 A   
P2M0 . . . . . . . . . .  D ADDR   0096H   A   
P2M1 . . . . . . . . . .  D ADDR   0095H   A   
P3 . . . . . . . . . . .  D ADDR   00B0H   A   
P30. . . . . . . . . . .  B ADDR   00B0H.0 A   
P31. . . . . . . . . . .  B ADDR   00B0H.1 A   
P32. . . . . . . . . . .  B ADDR   00B0H.2 A   
P33. . . . . . . . . . .  B ADDR   00B0H.3 A   
P34. . . . . . . . . . .  B ADDR   00B0H.4 A   
P35. . . . . . . . . . .  B ADDR   00B0H.5 A   
P36. . . . . . . . . . .  B ADDR   00B0H.6 A   
P37. . . . . . . . . . .  B ADDR   00B0H.7 A   
P3M0 . . . . . . . . . .  D ADDR   00B2H   A   
P3M1 . . . . . . . . . .  D ADDR   00B1H   A   
P4 . . . . . . . . . . .  D ADDR   00C0H   A   
P40. . . . . . . . . . .  B ADDR   00C0H.0 A   
P41. . . . . . . . . . .  B ADDR   00C0H.1 A   
P42. . . . . . . . . . .  B ADDR   00C0H.2 A   
P43. . . . . . . . . . .  B ADDR   00C0H.3 A   
P44. . . . . . . . . . .  B ADDR   00C0H.4 A   
P45. . . . . . . . . . .  B ADDR   00C0H.5 A   
P46. . . . . . . . . . .  B ADDR   00C0H.6 A   
P47. . . . . . . . . . .  B ADDR   00C0H.7 A   
P4M0 . . . . . . . . . .  D ADDR   00B4H   A   
P4M1 . . . . . . . . . .  D ADDR   00B3H   A   
P5 . . . . . . . . . . .  D ADDR   00C8H   A   
P50. . . . . . . . . . .  B ADDR   00C8H.0 A   
P51. . . . . . . . . . .  B ADDR   00C8H.1 A   
P52. . . . . . . . . . .  B ADDR   00C8H.2 A   
P53. . . . . . . . . . .  B ADDR   00C8H.3 A   
P54. . . . . . . . . . .  B ADDR   00C8H.4 A   
P55. . . . . . . . . . .  B ADDR   00C8H.5 A   
P56. . . . . . . . . . .  B ADDR   00C8H.6 A   
P57. . . . . . . . . . .  B ADDR   00C8H.7 A   
P5M0 . . . . . . . . . .  D ADDR   00CAH   A   
P5M1 . . . . . . . . . .  D ADDR   00C9H   A   
P6 . . . . . . . . . . .  D ADDR   00E8H   A   
P6M0 . . . . . . . . . .  D ADDR   00CCH   A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    28

P6M1 . . . . . . . . . .  D ADDR   00CBH   A   
P7 . . . . . . . . . . .  D ADDR   00F8H   A   
P7M0 . . . . . . . . . .  D ADDR   00E2H   A   
P7M1 . . . . . . . . . .  D ADDR   00E1H   A   
PADC . . . . . . . . . .  B ADDR   00B8H.5 A   
PCA_PWM0 . . . . . . . .  D ADDR   00F2H   A   
PCA_PWM1 . . . . . . . .  D ADDR   00F3H   A   
PCA_PWM2 . . . . . . . .  D ADDR   00F4H   A   
PCON . . . . . . . . . .  D ADDR   0087H   A   
PCON2. . . . . . . . . .  D ADDR   0097H   A   
PLVD . . . . . . . . . .  B ADDR   00B8H.6 A   
PPCA . . . . . . . . . .  B ADDR   00B8H.7 A   
PS . . . . . . . . . . .  B ADDR   00B8H.4 A   
PSW. . . . . . . . . . .  D ADDR   00D0H   A   
PT0. . . . . . . . . . .  B ADDR   00B8H.1 A   
PT1. . . . . . . . . . .  B ADDR   00B8H.3 A   
PX0. . . . . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . . . . .  B ADDR   00B8H.2 A   
P_SW1. . . . . . . . . .  D ADDR   00A2H   A   
P_SW2. . . . . . . . . .  D ADDR   00BAH   A   
RB8. . . . . . . . . . .  B ADDR   0098H.2 A   
RD . . . . . . . . . . .  B ADDR   00B0H.7 A   
REN. . . . . . . . . . .  B ADDR   0098H.4 A   
RI . . . . . . . . . . .  B ADDR   0098H.0 A   
RL_T2H . . . . . . . . .  D ADDR   00D6H   A   
RL_T2L . . . . . . . . .  D ADDR   00D7H   A   
RL_T3H . . . . . . . . .  D ADDR   00D4H   A   
RL_T3L . . . . . . . . .  D ADDR   00D5H   A   
RL_T4H . . . . . . . . .  D ADDR   00D2H   A   
RL_T4L . . . . . . . . .  D ADDR   00D3H   A   
RL_TH0 . . . . . . . . .  D ADDR   008CH   A   
RL_TH1 . . . . . . . . .  D ADDR   008DH   A   
RL_TL0 . . . . . . . . .  D ADDR   008AH   A   
RL_TL1 . . . . . . . . .  D ADDR   008BH   A   
RS0. . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . . . . .  B ADDR   00D0H.4 A   
RT_OS_ASM. . . . . . . .  N NUMB   -----       
RXD. . . . . . . . . . .  B ADDR   00B0H.0 A   
RXD2 . . . . . . . . . .  B ADDR   0090H.0 A   
S2BUF. . . . . . . . . .  D ADDR   009BH   A   
S2CON. . . . . . . . . .  D ADDR   009AH   A   
S3BUF. . . . . . . . . .  D ADDR   00ADH   A   
S3CON. . . . . . . . . .  D ADDR   00ACH   A   
S4BUF. . . . . . . . . .  D ADDR   0085H   A   
S4CON. . . . . . . . . .  D ADDR   0084H   A   
SADDR. . . . . . . . . .  D ADDR   00A9H   A   
SADEN. . . . . . . . . .  D ADDR   00B9H   A   
SBUF . . . . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . . . . .  D ADDR   0098H   A   
SM0. . . . . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . . . . .  D ADDR   0081H   A   
SPCTL. . . . . . . . . .  D ADDR   00CEH   A   
SPDAT. . . . . . . . . .  D ADDR   00CFH   A   
SPI_MISO . . . . . . . .  B ADDR   0090H.4 A   
SPI_MISO_2 . . . . . . .  B ADDR   00A0H.2 A   
SPI_MISO_3 . . . . . . .  B ADDR   00C0H.1 A   
SPI_MOSI . . . . . . . .  B ADDR   0090H.3 A   
SPI_MOSI_2 . . . . . . .  B ADDR   00A0H.3 A   
SPI_MOSI_3 . . . . . . .  B ADDR   00C0H.0 A   
SPI_SCLK . . . . . . . .  B ADDR   0090H.5 A   
SPI_SCLK_2 . . . . . . .  B ADDR   00A0H.1 A   
SPI_SCLK_3 . . . . . . .  B ADDR   00C0H.3 A   
SPI_SS . . . . . . . . .  B ADDR   0090H.2 A   
SPI_SS_2 . . . . . . . .  B ADDR   00A0H.4 A   
A51 MACRO ASSEMBLER  RT_OS_ASM                                                            09/11/2019 19:09:22 PAGE    29

SPI_SS_3 . . . . . . . .  B ADDR   00C8H.4 A   
SPSTAT . . . . . . . . .  D ADDR   00CDH   A   
T0 . . . . . . . . . . .  B ADDR   00B0H.4 A   
T1 . . . . . . . . . . .  B ADDR   00B0H.5 A   
T2H. . . . . . . . . . .  D ADDR   00D6H   A   
T2L. . . . . . . . . . .  D ADDR   00D7H   A   
T3H. . . . . . . . . . .  D ADDR   00D4H   A   
T3L. . . . . . . . . . .  D ADDR   00D5H   A   
T4H. . . . . . . . . . .  D ADDR   00D2H   A   
T4L. . . . . . . . . . .  D ADDR   00D3H   A   
T4T3M. . . . . . . . . .  D ADDR   00D1H   A   
TASK_SEQUENCE?046. . . .  X ADDR   0003H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TASK_SEQUENCE?153. . . .  X ADDR   0004H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TB8. . . . . . . . . . .  B ADDR   0098H.3 A   
TCON . . . . . . . . . .  D ADDR   0088H   A   
TEMP_ID?041. . . . . . .  X ADDR   0004H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TEMP_ID?148. . . . . . .  X ADDR   0005H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TEMP_TASK_SEQUENCE?040 .  X ADDR   0004H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TEMP_TASK_SEQUENCE?147 .  X ADDR   0005H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TEMP_TEMP_ID?042 . . . .  X ADDR   0005H   R   SEG=?XD?OS_TASK_SW?RT_OS_ASM
TEMP_TEMP_ID?149 . . . .  X ADDR   0006H   R   SEG=?XD?TIMER0_INT?RT_OS_ASM
TF0. . . . . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . . . . .  B ADDR   0088H.7 A   
TH0. . . . . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . . . . .  D ADDR   00D6H   A   
TH3. . . . . . . . . . .  D ADDR   00D4H   A   
TH4. . . . . . . . . . .  D ADDR   00D2H   A   
TI . . . . . . . . . . .  B ADDR   0098H.1 A   
TIMER0_INT . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_INT?RT_OS_ASM
TL0. . . . . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . . . . .  D ADDR   00D7H   A   
TL3. . . . . . . . . . .  D ADDR   00D5H   A   
TL4. . . . . . . . . . .  D ADDR   00D3H   A   
TMOD . . . . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . . . . .  B ADDR   0088H.6 A   
TXD. . . . . . . . . . .  B ADDR   00B0H.1 A   
TXD2 . . . . . . . . . .  B ADDR   0090H.1 A   
WAKE_CLKO. . . . . . . .  D ADDR   008FH   A   
WDT_CONTR. . . . . . . .  D ADDR   00C1H   A   
WKTCH. . . . . . . . . .  D ADDR   00ABH   A   
WKTCL. . . . . . . . . .  D ADDR   00AAH   A   
WR . . . . . . . . . . .  B ADDR   00B0H.6 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
